var Ol=Object.defineProperty;var Dl=(t,e,l)=>e in t?Ol(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l;var Te=(t,e,l)=>(Dl(t,typeof e!="symbol"?e+"":e,l),l);import{s as it,f as M,a as j,l as U,g as P,h as L,A as tt,c as q,m as B,d as w,j as y,i as J,y as v,D as C,n as x,z as $e,G as lt,F as We,r as yt,u as pt,v as vt,w as bt,x as wt,H as El,o as yl,I as Mt,e as Ie,p as st,k as He,J as kt,K as Re,L as Vl,M as Jl,N as Q,E as Qe,O as ve,B as Pt,C as Ze,P as zt,Q as Lt}from"../chunks/scheduler.1588ed99.js";import{S as nt,i as rt,g as Ue,c as Be,a as K,t as $,b as Ve,d as Je,m as je,e as qe,f as Nt}from"../chunks/index.afb56b95.js";import{e as ze,u as jl,o as ql,g as Ul,L as Bl,S as Tt}from"../chunks/locale.c86ad037.js";import{a as Tl,c as Rl,d as ie}from"../chunks/index.cbb50a11.js";import{p as Fl}from"../chunks/stores.c2303d8c.js";import{a as Ke,o as Al,t as ft,b as Hl,d as At,c as Ot,e as et,f as Dt,g as It,h as Vt,i as Jt,j as jt,k as Kl,m as qt,n as Yl,s as Xl,p as Gl}from"../chunks/worker.6affabe5.js";import{r as Wl,d as Ql}from"../chunks/paths.2172a9eb.js";const Cl=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Ut(t,e,l){const s=t.slice();return s[7]=e[l],s}function Bt(t,e,l){const s=t.slice();return s[10]=e[l],s}function Ft(t){let e,l=ft(t[10],t[7].stats[t[10]])+"",s;return{c(){e=M("li"),s=U(l)},l(i){e=P(i,"LI",{});var n=L(e);s=B(n,l),n.forEach(w)},m(i,n){J(i,e,n),v(e,s)},p(i,n){n&2&&l!==(l=ft(i[10],i[7].stats[i[10]])+"")&&x(s,l)},d(i){i&&w(e)}}}function Ht(t){let e,l,s=Ke.nodes[t[7].passive].name+"",i,n,r=t[7].passive+"",o,a,h,u,b,m=ze(Object.keys(t[7].stats)),_=[];for(let c=0;c<m.length;c+=1)_[c]=Ft(Bt(t,m,c));return{c(){e=M("div"),l=M("span"),i=U(s),n=U(" ("),o=U(r),a=U(")"),h=j(),u=M("ul");for(let c=0;c<_.length;c+=1)_[c].c();b=j(),this.h()},l(c){e=P(c,"DIV",{class:!0});var f=L(e);l=P(f,"SPAN",{});var d=L(l);i=B(d,s),n=B(d," ("),o=B(d,r),a=B(d,")"),d.forEach(w),h=q(f),u=P(f,"UL",{class:!0});var g=L(u);for(let k=0;k<_.length;k+=1)_[k].l(g);g.forEach(w),b=q(f),f.forEach(w),this.h()},h(){y(u,"class","list-disc pl-6 font-bold"),y(e,"class","mt-2")},m(c,f){J(c,e,f),v(e,l),v(l,i),v(l,n),v(l,o),v(l,a),v(e,h),v(e,u);for(let d=0;d<_.length;d+=1)_[d]&&_[d].m(u,null);v(e,b)},p(c,f){if(f&2&&s!==(s=Ke.nodes[c[7].passive].name+"")&&x(i,s),f&2&&r!==(r=c[7].passive+"")&&x(o,r),f&2){m=ze(Object.keys(c[7].stats));let d;for(d=0;d<m.length;d+=1){const g=Bt(c,m,d);_[d]?_[d].p(g,f):(_[d]=Ft(g),_[d].c(),_[d].m(u,null))}for(;d<_.length;d+=1)_[d].d(1);_.length=m.length}},d(c){c&&w(e),lt(_,c)}}}function Zl(t){let e,l,s,i="Trade",n,r,o,a=t[1].seed+"",h,u,b=t[1].weight+"",m,_,c,f,d=t[4]("Trade")+"",g,k,D,A,T=ze(t[1].skills),E=[];for(let I=0;I<T.length;I+=1)E[I]=Ht(Ut(t,T,I));return{c(){e=M("div"),l=M("div"),s=M("button"),s.textContent=i,n=j(),r=M("div"),o=U("Seed "),h=U(a),u=U(" (weight "),m=U(b),_=U(")"),c=j(),f=M("button"),g=U(d),k=j();for(let I=0;I<E.length;I+=1)E[I].c();this.h()},l(I){e=P(I,"DIV",{class:!0});var V=L(e);l=P(V,"DIV",{class:!0});var z=L(l);s=P(z,"BUTTON",{class:!0,"data-svelte-h":!0}),tt(s)!=="svelte-1wpptz2"&&(s.textContent=i),n=q(z),r=P(z,"DIV",{class:!0});var Z=L(r);o=B(Z,"Seed "),h=B(Z,a),u=B(Z," (weight "),m=B(Z,b),_=B(Z,")"),Z.forEach(w),c=q(z),f=P(z,"BUTTON",{class:!0});var Y=L(f);g=B(Y,d),Y.forEach(w),z.forEach(w),k=q(V);for(let W=0;W<E.length;W+=1)E[W].l(V);V.forEach(w),this.h()},h(){y(s,"class","px-3 invisible"),y(r,"class","font-bold text-orange-500 text-center"),y(f,"class","px-3 bg-blue-500/40 rounded"),y(l,"class","flex flex-row justify-between"),y(e,"class","my-2 border-white/50 border p-2 flex flex-col cursor-pointer")},m(I,V){J(I,e,V),v(e,l),v(l,s),v(l,n),v(l,r),v(r,o),v(r,h),v(r,u),v(r,m),v(r,_),v(l,c),v(l,f),v(f,g),v(e,k);for(let z=0;z<E.length;z+=1)E[z]&&E[z].m(e,null);D||(A=[C(f,"click",t[5]),C(e,"click",t[6])],D=!0)},p(I,[V]){if(V&2&&a!==(a=I[1].seed+"")&&x(h,a),V&2&&b!==(b=I[1].weight+"")&&x(m,b),V&16&&d!==(d=I[4]("Trade")+"")&&x(g,d),V&2){T=ze(I[1].skills);let z;for(z=0;z<T.length;z+=1){const Z=Ut(I,T,z);E[z]?E[z].p(Z,V):(E[z]=Ht(Z),E[z].c(),E[z].m(e,null))}for(;z<E.length;z+=1)E[z].d(1);E.length=T.length}},i:$e,o:$e,d(I){I&&w(e),lt(E,I),D=!1,We(A)}}}function $l(t,e,l){let s;yt(t,Tl,u=>l(4,s=u));let{highlight:i}=e,{set:n}=e,{jewel:r}=e,{conqueror:o}=e;const a=()=>Al(r,o,[n]),h=()=>i(n.seed,n.skills.map(u=>u.passive));return t.$$set=u=>{"highlight"in u&&l(0,i=u.highlight),"set"in u&&l(1,n=u.set),"jewel"in u&&l(2,r=u.jewel),"conqueror"in u&&l(3,o=u.conqueror)},[i,n,r,o,s,a,h]}class Ml extends nt{constructor(e){super(),rt(this,e,$l,Zl,it,{highlight:0,set:1,jewel:2,conqueror:3})}}const Et={AUTO:"auto",START:"start",CENTER:"center",END:"end"},Ge={HORIZONTAL:"horizontal",VERTICAL:"vertical"},gt={OBSERVED:0,REQUESTED:1},xl={[Ge.VERTICAL]:"top",[Ge.HORIZONTAL]:"left"},Kt={[Ge.VERTICAL]:"scrollTop",[Ge.HORIZONTAL]:"scrollLeft"};class es{constructor({itemSize:e,itemCount:l,estimatedItemSize:s}){this.itemSize=e,this.itemCount=l,this.estimatedItemSize=s,this.itemSizeAndPositionData={},this.lastMeasuredIndex=-1,this.checkForMismatchItemSizeAndItemCount(),this.justInTime||this.computeTotalSizeAndPositionData()}get justInTime(){return typeof this.itemSize=="function"}updateConfig({itemSize:e,itemCount:l,estimatedItemSize:s}){l!=null&&(this.itemCount=l),s!=null&&(this.estimatedItemSize=s),e!=null&&(this.itemSize=e),this.checkForMismatchItemSizeAndItemCount(),this.justInTime&&this.totalSize!=null?this.totalSize=void 0:this.computeTotalSizeAndPositionData()}checkForMismatchItemSizeAndItemCount(){if(Array.isArray(this.itemSize)&&this.itemSize.length<this.itemCount)throw Error("When itemSize is an array, itemSize.length can't be smaller than itemCount")}getSize(e){const{itemSize:l}=this;return typeof l=="function"?l(e):Array.isArray(l)?l[e]:l}computeTotalSizeAndPositionData(){let e=0;for(let l=0;l<this.itemCount;l++){const s=this.getSize(l),i=e;e+=s,this.itemSizeAndPositionData[l]={offset:i,size:s}}this.totalSize=e}getLastMeasuredIndex(){return this.lastMeasuredIndex}getSizeAndPositionForIndex(e){if(e<0||e>=this.itemCount)throw Error(`Requested index ${e} is outside of range 0..${this.itemCount}`);return this.justInTime?this.getJustInTimeSizeAndPositionForIndex(e):this.itemSizeAndPositionData[e]}getJustInTimeSizeAndPositionForIndex(e){if(e>this.lastMeasuredIndex){const l=this.getSizeAndPositionOfLastMeasuredItem();let s=l.offset+l.size;for(let i=this.lastMeasuredIndex+1;i<=e;i++){const n=this.getSize(i);if(n==null||isNaN(n))throw Error(`Invalid size returned for index ${i} of value ${n}`);this.itemSizeAndPositionData[i]={offset:s,size:n},s+=n}this.lastMeasuredIndex=e}return this.itemSizeAndPositionData[e]}getSizeAndPositionOfLastMeasuredItem(){return this.lastMeasuredIndex>=0?this.itemSizeAndPositionData[this.lastMeasuredIndex]:{offset:0,size:0}}getTotalSize(){if(this.totalSize)return this.totalSize;const e=this.getSizeAndPositionOfLastMeasuredItem();return e.offset+e.size+(this.itemCount-this.lastMeasuredIndex-1)*this.estimatedItemSize}getUpdatedOffsetForIndex({align:e=Et.START,containerSize:l,currentOffset:s,targetIndex:i}){if(l<=0)return 0;const n=this.getSizeAndPositionForIndex(i),r=n.offset,o=r-l+n.size;let a;switch(e){case Et.END:a=o;break;case Et.CENTER:a=r-(l-n.size)/2;break;case Et.START:a=r;break;default:a=Math.max(o,Math.min(r,s))}const h=this.getTotalSize();return Math.max(0,Math.min(h-l,a))}getVisibleRange({containerSize:e=0,offset:l,overscanCount:s}){if(this.getTotalSize()===0)return{};const n=l+e;let r=this.findNearestItem(l);if(r===void 0)throw Error(`Invalid offset ${l} specified`);const o=this.getSizeAndPositionForIndex(r);l=o.offset+o.size;let a=r;for(;l<n&&a<this.itemCount-1;)a++,l+=this.getSizeAndPositionForIndex(a).size;return s&&(r=Math.max(0,r-s),a=Math.min(a+s,this.itemCount-1)),{start:r,stop:a}}resetItem(e){this.lastMeasuredIndex=Math.min(this.lastMeasuredIndex,e-1)}findNearestItem(e){if(isNaN(e))throw Error(`Invalid offset ${e} specified`);e=Math.max(0,e);const l=this.getSizeAndPositionOfLastMeasuredItem(),s=Math.max(0,this.lastMeasuredIndex);return l.offset>=e?this.binarySearch({high:s,low:0,offset:e}):this.exponentialSearch({index:s,offset:e})}binarySearch({low:e,high:l,offset:s}){let i=0,n=0;for(;e<=l;){if(i=e+Math.floor((l-e)/2),n=this.getSizeAndPositionForIndex(i).offset,n===s)return i;n<s?e=i+1:n>s&&(l=i-1)}return e>0?e-1:0}exponentialSearch({index:e,offset:l}){let s=1;for(;e<this.itemCount&&this.getSizeAndPositionForIndex(e).offset<l;)e+=s,s*=2;return this.binarySearch({high:Math.min(e,this.itemCount-1),low:Math.floor(e/2),offset:l})}}const ts=t=>({}),Yt=t=>({});function Xt(t,e,l){const s=t.slice();return s[37]=e[l],s}const ls=t=>({style:t[0]&4,index:t[0]&4}),Gt=t=>({style:t[37].style,index:t[37].index}),ss=t=>({}),Wt=t=>({});function Qt(t,e){let l,s;const i=e[21].item,n=pt(i,e,e[20],Gt);return{key:t,first:null,c(){l=Ie(),n&&n.c(),this.h()},l(r){l=Ie(),n&&n.l(r),this.h()},h(){this.first=l},m(r,o){J(r,l,o),n&&n.m(r,o),s=!0},p(r,o){e=r,n&&n.p&&(!s||o[0]&1048580)&&vt(n,i,e,e[20],s?wt(i,e[20],o,ls):bt(e[20]),Gt)},i(r){s||(K(n,r),s=!0)},o(r){$(n,r),s=!1},d(r){r&&w(l),n&&n.d(r)}}}function is(t){let e,l,s,i=[],n=new Map,r,o;const a=t[21].header,h=pt(a,t,t[20],Wt);let u=ze(t[2]);const b=c=>c[0]?c[0](c[37].index):c[37].index;for(let c=0;c<u.length;c+=1){let f=Xt(t,u,c),d=b(f);n.set(d,i[c]=Qt(d,f))}const m=t[21].footer,_=pt(m,t,t[20],Yt);return{c(){e=M("div"),h&&h.c(),l=j(),s=M("div");for(let c=0;c<i.length;c+=1)i[c].c();r=j(),_&&_.c(),this.h()},l(c){e=P(c,"DIV",{class:!0,style:!0});var f=L(e);h&&h.l(f),l=q(f),s=P(f,"DIV",{class:!0,style:!0});var d=L(s);for(let g=0;g<i.length;g+=1)i[g].l(d);d.forEach(w),r=q(f),_&&_.l(f),f.forEach(w),this.h()},h(){y(s,"class","virtual-list-inner svelte-1d4hv8l"),y(s,"style",t[4]),y(e,"class","virtual-list-wrapper svelte-1d4hv8l"),y(e,"style",t[3])},m(c,f){J(c,e,f),h&&h.m(e,null),v(e,l),v(e,s);for(let d=0;d<i.length;d+=1)i[d]&&i[d].m(s,null);v(e,r),_&&_.m(e,null),t[22](e),o=!0},p(c,f){h&&h.p&&(!o||f[0]&1048576)&&vt(h,a,c,c[20],o?wt(a,c[20],f,ss):bt(c[20]),Wt),f[0]&1048581&&(u=ze(c[2]),Ue(),i=jl(i,f,b,1,c,u,n,s,ql,Qt,null,Xt),Be()),(!o||f[0]&16)&&y(s,"style",c[4]),_&&_.p&&(!o||f[0]&1048576)&&vt(_,m,c,c[20],o?wt(m,c[20],f,ts):bt(c[20]),Yt),(!o||f[0]&8)&&y(e,"style",c[3])},i(c){if(!o){K(h,c);for(let f=0;f<u.length;f+=1)K(i[f]);K(_,c),o=!0}},o(c){$(h,c);for(let f=0;f<i.length;f+=1)$(i[f]);$(_,c),o=!1},d(c){c&&w(e),h&&h.d(c);for(let f=0;f<i.length;f+=1)i[f].d();_&&_.d(c),t[22](null)}}}const ns=(()=>{let t=!1;try{const e=Object.defineProperty({},"passive",{get(){return t={passive:!0},!0}});window.addEventListener("testpassive",e,e),window.remove("testpassive",e,e)}catch{}return t})();function rs(t,e,l){let{$$slots:s={},$$scope:i}=e,{height:n}=e,{width:r="100%"}=e,{itemCount:o}=e,{itemSize:a}=e,{estimatedItemSize:h=null}=e,{stickyIndices:u=null}=e,{getKey:b=null}=e,{scrollDirection:m=Ge.VERTICAL}=e,{scrollOffset:_=null}=e,{scrollToIndex:c=null}=e,{scrollToAlignment:f=null}=e,{scrollToBehaviour:d="instant"}=e,{overscanCount:g=3}=e;const k=El(),D=new es({itemCount:o,itemSize:a,estimatedItemSize:we()});let A=!1,T,E=[],I={offset:_||c!=null&&E.length&&ae(c)||0,scrollChangeReason:gt.REQUESTED},V=I,z={scrollToIndex:c,scrollToAlignment:f,scrollOffset:_,itemCount:o,itemSize:a,estimatedItemSize:h},Z={},Y="",W="";ue(),yl(()=>{l(18,A=!0),T.addEventListener("scroll",Ee,ns),_!=null?fe(_):c!=null&&fe(ae(c))}),Mt(()=>{A&&T.removeEventListener("scroll",Ee)});function F(){if(!A)return;const O=z.scrollToIndex!==c||z.scrollToAlignment!==f,p=z.itemCount!==o||z.itemSize!==a||z.estimatedItemSize!==h;p&&(D.updateConfig({itemSize:a,itemCount:o,estimatedItemSize:we()}),le()),z.scrollOffset!==_?l(19,I={offset:_||0,scrollChangeReason:gt.REQUESTED}):typeof c=="number"&&(O||p)&&l(19,I={offset:ae(c,f,o),scrollChangeReason:gt.REQUESTED}),z={scrollToIndex:c,scrollToAlignment:f,scrollOffset:_,itemCount:o,itemSize:a,estimatedItemSize:h}}function ee(){if(!A)return;const{offset:O,scrollChangeReason:p}=I;(V.offset!==O||V.scrollChangeReason!==p)&&ue(),V.offset!==O&&p===gt.REQUESTED&&fe(O),V=I}function ue(){const{offset:O}=I,{start:p,stop:N}=D.getVisibleRange({containerSize:m===Ge.VERTICAL?n:r,offset:O,overscanCount:g});let X=[];const H=D.getTotalSize();m===Ge.VERTICAL?(l(3,Y=`height:${n}px;width:${r};`),l(4,W=`flex-direction:column;height:${H}px;`)):(l(3,Y=`height:${n};width:${r}px`),l(4,W=`min-height:100%;width:${H}px;`));const de=u!=null&&u.length!==0;if(de)for(let re=0;re<u.length;re++){const ge=u[re];X.push({index:ge,style:ne(ge,!0)})}if(p!==void 0&&N!==void 0){for(let re=p;re<=N;re++)de&&u.includes(re)||X.push({index:re,style:ne(re,!1)});k("itemsUpdated",{start:p,end:N})}l(2,E=X)}function fe(O){"scroll"in T?T.scroll({[xl[m]]:O,behavior:d}):l(1,T[Kt[m]]=O,T)}function le(O=0){Z={},D.resetItem(O),ue()}function ae(O,p=f,N=o){return(O<0||O>=N)&&(O=0),D.getUpdatedOffsetForIndex({align:p,containerSize:m===Ge.VERTICAL?n:r,currentOffset:I.offset||0,targetIndex:O})}function Ee(O){const p=be();p<0||I.offset===p||O.target!==T||(l(19,I={offset:p,scrollChangeReason:gt.OBSERVED}),k("afterScroll",{offset:p,event:O}))}function be(){return T[Kt[m]]}function we(){return h||typeof a=="number"&&a||50}function ne(O,p){if(Z[O])return Z[O];const{size:N,offset:X}=D.getSizeAndPositionForIndex(O);let H;return m===Ge.VERTICAL?(H=`left:0;width:100%;height:${N}px;`,p?H+=`position:sticky;flex-grow:0;z-index:1;top:0;margin-top:${X}px;margin-bottom:${-(X+N)}px;`:H+=`position:absolute;top:${X}px;`):(H=`top:0;width:${N}px;`,p?H+=`position:sticky;z-index:1;left:0;margin-left:${X}px;margin-right:${-(X+N)}px;`:H+=`position:absolute;height:100%;left:${X}px;`),Z[O]=H}function Me(O){st[O?"unshift":"push"](()=>{T=O,l(1,T)})}return t.$$set=O=>{"height"in O&&l(5,n=O.height),"width"in O&&l(6,r=O.width),"itemCount"in O&&l(7,o=O.itemCount),"itemSize"in O&&l(8,a=O.itemSize),"estimatedItemSize"in O&&l(9,h=O.estimatedItemSize),"stickyIndices"in O&&l(10,u=O.stickyIndices),"getKey"in O&&l(0,b=O.getKey),"scrollDirection"in O&&l(11,m=O.scrollDirection),"scrollOffset"in O&&l(12,_=O.scrollOffset),"scrollToIndex"in O&&l(13,c=O.scrollToIndex),"scrollToAlignment"in O&&l(14,f=O.scrollToAlignment),"scrollToBehaviour"in O&&l(15,d=O.scrollToBehaviour),"overscanCount"in O&&l(16,g=O.overscanCount),"$$scope"in O&&l(20,i=O.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&29568&&F(),t.$$.dirty[0]&524288&&ee(),t.$$.dirty[0]&263264&&A&&le(0)},[b,T,E,Y,W,n,r,o,a,h,u,m,_,c,f,d,g,le,A,I,i,s,Me]}class Pl extends nt{constructor(e){super(),rt(this,e,rs,is,it,{height:5,width:6,itemCount:7,itemSize:8,estimatedItemSize:9,stickyIndices:10,getKey:0,scrollDirection:11,scrollOffset:12,scrollToIndex:13,scrollToAlignment:14,scrollToBehaviour:15,overscanCount:16,recomputeSizes:17},null,[-1,-1])}get recomputeSizes(){return this.$$.ctx[17]}}function Zt(t,e,l){const s=t.slice();return s[9]=e[l],s}function as(t){let e,l,s;return l=new Pl({props:{height:"auto",overscanCount:15,itemCount:t[0].raw.length,itemSize:t[0].raw.map(t[6]),$$slots:{item:[us,({style:i,index:n})=>({12:i,13:n}),({style:i,index:n})=>(i?4096:0)|(n?8192:0)]},$$scope:{ctx:t}}}),{c(){e=M("div"),Ve(l.$$.fragment),this.h()},l(i){e=P(i,"DIV",{class:!0});var n=L(e);Je(l.$$.fragment,n),n.forEach(w),this.h()},h(){y(e,"class","mt-4 flex flex-col overflow-auto")},m(i,n){J(i,e,n),je(l,e,null),s=!0},p(i,n){const r={};n&1&&(r.itemCount=i[0].raw.length),n&1&&(r.itemSize=i[0].raw.map(i[6])),n&28699&&(r.$$scope={dirty:n,ctx:i}),l.$set(r)},i(i){s||(K(l.$$.fragment,i),s=!0)},o(i){$(l.$$.fragment,i),s=!1},d(i){i&&w(e),qe(l)}}}function os(t){let e,l,s=ze(Object.keys(t[0].grouped).map(t[7]).sort(el).reverse()),i=[];for(let r=0;r<s.length;r+=1)i[r]=xt(Zt(t,s,r));const n=r=>$(i[r],1,1,()=>{i[r]=null});return{c(){e=M("div");for(let r=0;r<i.length;r+=1)i[r].c();this.h()},l(r){e=P(r,"DIV",{class:!0});var o=L(e);for(let a=0;a<i.length;a+=1)i[a].l(o);o.forEach(w),this.h()},h(){y(e,"class","flex flex-col overflow-auto")},m(r,o){J(r,e,o);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(e,null);l=!0},p(r,o){if(o&12411){s=ze(Object.keys(r[0].grouped).map(r[7]).sort(el).reverse());let a;for(a=0;a<s.length;a+=1){const h=Zt(r,s,a);i[a]?(i[a].p(h,o),K(i[a],1)):(i[a]=xt(h),i[a].c(),K(i[a],1),i[a].m(e,null))}for(Ue(),a=s.length;a<i.length;a+=1)n(a);Be()}},i(r){if(!l){for(let o=0;o<s.length;o+=1)K(i[o]);l=!0}},o(r){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)$(i[o]);l=!1},d(r){r&&w(e),lt(i,r)}}}function us(t){let e,l,s,i;return l=new Ml({props:{set:t[0].raw[t[13]],highlight:t[1],jewel:t[3],conqueror:t[4]}}),{c(){e=M("div"),Ve(l.$$.fragment),this.h()},l(n){e=P(n,"DIV",{slot:!0,style:!0});var r=L(e);Je(l.$$.fragment,r),r.forEach(w),this.h()},h(){y(e,"slot","item"),y(e,"style",s=t[12])},m(n,r){J(n,e,r),je(l,e,null),i=!0},p(n,r){const o={};r&8193&&(o.set=n[0].raw[n[13]]),r&2&&(o.highlight=n[1]),r&8&&(o.jewel=n[3]),r&16&&(o.conqueror=n[4]),l.$set(o),(!i||r&4096&&s!==(s=n[12]))&&y(e,"style",s)},i(n){i||(K(l.$$.fragment,n),i=!0)},o(n){$(l.$$.fragment,n),i=!1},d(n){n&&w(e),qe(l)}}}function $t(t){let e,l,s,i;return l=new Pl({props:{height:"auto",overscanCount:10,itemCount:t[0].grouped[t[9]].length,itemSize:t[0].grouped[t[9]].map(t[6]),$$slots:{item:[fs,({style:n,index:r})=>({12:n,13:r}),({style:n,index:r})=>(n?4096:0)|(r?8192:0)]},$$scope:{ctx:t}}}),{c(){e=M("div"),Ve(l.$$.fragment),s=j(),this.h()},l(n){e=P(n,"DIV",{class:!0});var r=L(e);Je(l.$$.fragment,r),s=q(r),r.forEach(w),this.h()},h(){y(e,"class","flex flex-col overflow-auto min-h-[200px] mb-2")},m(n,r){J(n,e,r),je(l,e,null),v(e,s),i=!0},p(n,r){const o={};r&1&&(o.itemCount=n[0].grouped[n[9]].length),r&1&&(o.itemSize=n[0].grouped[n[9]].map(n[6])),r&28699&&(o.$$scope={dirty:r,ctx:n}),l.$set(o)},i(n){i||(K(l.$$.fragment,n),i=!0)},o(n){$(l.$$.fragment,n),i=!1},d(n){n&&w(e),qe(l)}}}function fs(t){let e,l,s,i;return l=new Ml({props:{set:t[0].grouped[t[9]][t[13]],highlight:t[1],jewel:t[3],conqueror:t[4]}}),{c(){e=M("div"),Ve(l.$$.fragment),this.h()},l(n){e=P(n,"DIV",{slot:!0,style:!0});var r=L(e);Je(l.$$.fragment,r),r.forEach(w),this.h()},h(){y(e,"slot","item"),y(e,"style",s=t[12])},m(n,r){J(n,e,r),je(l,e,null),i=!0},p(n,r){const o={};r&8193&&(o.set=n[0].grouped[n[9]][n[13]]),r&2&&(o.highlight=n[1]),r&8&&(o.jewel=n[3]),r&16&&(o.conqueror=n[4]),l.$set(o),(!i||r&4096&&s!==(s=n[12]))&&y(e,"style",s)},i(n){i||(K(l.$$.fragment,n),i=!0)},o(n){$(l.$$.fragment,n),i=!1},d(n){n&&w(e),qe(l)}}}function xt(t){let e,l,s=t[9]+"",i,n,r=t[9]>1?"es":"",o,a,h=t[0].grouped[t[9]].length+"",u,b,m,_,c=t[5]===t[9]?"^":"V",f,d,g,k,D,A;function T(){return t[8](t[9])}let E=t[5]===t[9]&&$t(t);return{c(){e=M("button"),l=M("span"),i=U(s),n=U(" Match"),o=U(r),a=U(" ["),u=U(h),b=U("]"),m=j(),_=M("span"),f=U(c),d=j(),E&&E.c(),g=Ie(),this.h()},l(I){e=P(I,"BUTTON",{class:!0});var V=L(e);l=P(V,"SPAN",{});var z=L(l);i=B(z,s),n=B(z," Match"),o=B(z,r),a=B(z," ["),u=B(z,h),b=B(z,"]"),z.forEach(w),m=q(V),_=P(V,"SPAN",{});var Z=L(_);f=B(Z,c),Z.forEach(w),V.forEach(w),d=q(I),E&&E.l(I),g=Ie(),this.h()},h(){y(e,"class","text-lg w-full p-2 px-4 bg-neutral-500/30 rounded flex flex-row justify-between mb-2")},m(I,V){J(I,e,V),v(e,l),v(l,i),v(l,n),v(l,o),v(l,a),v(l,u),v(l,b),v(e,m),v(e,_),v(_,f),J(I,d,V),E&&E.m(I,V),J(I,g,V),k=!0,D||(A=C(e,"click",T),D=!0)},p(I,V){t=I,(!k||V&1)&&s!==(s=t[9]+"")&&x(i,s),(!k||V&1)&&r!==(r=t[9]>1?"es":"")&&x(o,r),(!k||V&1)&&h!==(h=t[0].grouped[t[9]].length+"")&&x(u,h),(!k||V&33)&&c!==(c=t[5]===t[9]?"^":"V")&&x(f,c),t[5]===t[9]?E?(E.p(t,V),V&33&&K(E,1)):(E=$t(t),E.c(),K(E,1),E.m(g.parentNode,g)):E&&(Ue(),$(E,1,1,()=>{E=null}),Be())},i(I){k||(K(E),k=!0)},o(I){$(E),k=!1},d(I){I&&(w(e),w(d),w(g)),E&&E.d(I),D=!1,A()}}}function hs(t){let e,l,s,i;const n=[os,as],r=[];function o(a,h){return a[2]?0:1}return e=o(t),l=r[e]=n[e](t),{c(){l.c(),s=Ie()},l(a){l.l(a),s=Ie()},m(a,h){r[e].m(a,h),J(a,s,h),i=!0},p(a,[h]){let u=e;e=o(a),e===u?r[e].p(a,h):(Ue(),$(r[u],1,1,()=>{r[u]=null}),Be(),l=r[e],l?l.p(a,h):(l=r[e]=n[e](a),l.c()),K(l,1),l.m(s.parentNode,s))},i(a){i||(K(l),i=!0)},o(a){$(l),i=!1},d(a){a&&w(s),r[e].d(a)}}}const el=(t,e)=>t-e;function cs(t,e,l){let{searchResults:s}=e,{highlight:i}=e,{groupResults:n=!0}=e,{jewel:r}=e,{conqueror:o}=e;const a=m=>8+48+m.skills.reduce((_,c)=>_+32+Object.keys(c.stats).length*24,0);let h="";const u=m=>parseInt(m),b=m=>l(5,h=h===m?"":m);return t.$$set=m=>{"searchResults"in m&&l(0,s=m.searchResults),"highlight"in m&&l(1,i=m.highlight),"groupResults"in m&&l(2,n=m.groupResults),"jewel"in m&&l(3,r=m.jewel),"conqueror"in m&&l(4,o=m.conqueror)},[s,i,n,r,o,h,a,u,b]}class ds extends nt{constructor(e){super(),rt(this,e,cs,hs,it,{searchResults:0,highlight:1,groupResults:2,jewel:3,conqueror:4})}}class ms{constructor(){Te(this,"currentLayerId");Te(this,"setups");Te(this,"renderers");Te(this,"dispatchers");Te(this,"needsSetup");Te(this,"needsRedraw");Te(this,"context");Te(this,"width");Te(this,"height");Te(this,"autoclear");Te(this,"pixelRatio");Te(this,"renderLoop");Te(this,"layerObserver");Te(this,"layerRef");Te(this,"layerSequence");Te(this,"renderingLayerId");Te(this,"activeLayerId");Te(this,"activeLayerDispatcher");this.register=this.register.bind(this),this.unregister=this.unregister.bind(this),this.redraw=this.redraw.bind(this),this.getRenderingLayerId=this.getRenderingLayerId.bind(this),this.currentLayerId=1,this.setups=new Map,this.renderers=new Map,this.dispatchers=new Map,this.needsSetup=!1,this.needsRedraw=!0,this.renderingLayerId=0,this.activeLayerId=0,this.layerSequence=[]}redraw(){this.needsRedraw=!0}register({setup:e,render:l,dispatcher:s}){return e&&(this.setups.set(this.currentLayerId,e),this.needsSetup=!0),this.renderers.set(this.currentLayerId,l),this.dispatchers.set(this.currentLayerId,s),this.needsRedraw=!0,this.currentLayerId++}unregister(e){this.renderers.delete(e),this.dispatchers.delete(e),this.needsRedraw=!0}setup(e,l){this.context=e,this.layerRef=l,this.observeLayerSequence(),this.startRenderLoop()}observeLayerSequence(){this.layerObserver=new MutationObserver(this.getLayerSequence.bind(this)),this.layerObserver.observe(this.layerRef,{childList:!0}),this.getLayerSequence()}getLayerSequence(){const e=[...this.layerRef.children];this.layerSequence=e.map(l=>+(l.dataset.layerId??-1)),this.redraw()}startRenderLoop(){this.render(),this.renderLoop=requestAnimationFrame(()=>this.startRenderLoop())}render(){var n;const e=this.context,l=this.width,s=this.height,i=this.pixelRatio;if(this.needsSetup){for(const[r,o]of this.setups)o({context:e,width:l,height:s}),this.setups.delete(r);this.needsSetup=!1}if(this.needsRedraw){e.setTransform(i,0,0,i,0,0),this.autoclear&&e.clearRect(0,0,l,s);for(const r of this.layerSequence)this.renderingLayerId=r,(n=this.renderers.get(r))==null||n({context:e,width:l,height:s});this.needsRedraw=!1}}setActiveLayer(e,l){this.activeLayerId!==e&&(l instanceof MouseEvent&&(this.dispatchLayerEvent(new PointerEvent("pointerleave",l)),this.dispatchLayerEvent(new MouseEvent("mouseleave",l))),this.activeLayerId=e,this.activeLayerDispatcher=this.dispatchers.get(e),l instanceof MouseEvent&&(this.dispatchLayerEvent(new PointerEvent("pointerenter",l)),this.dispatchLayerEvent(new MouseEvent("mouseenter",l))))}dispatchLayerEvent(e){if(this.activeLayerDispatcher){if(window.TouchEvent&&e instanceof TouchEvent){const{left:l,top:s}=e.target.getBoundingClientRect(),{clientX:i,clientY:n}=e.changedTouches[0],r={x:i-l,y:n-s,originalEvent:e};this.activeLayerDispatcher(e.type,r)}else if(e instanceof MouseEvent){const l={x:e.offsetX,y:e.offsetY,originalEvent:e};this.activeLayerDispatcher(e.type,l)}}}getRenderingLayerId(){return this.renderingLayerId}destroy(){typeof window>"u"||(this.layerObserver.disconnect(),cancelAnimationFrame(this.renderLoop))}}const _s=t=>{const e=t*2,l=e>>16&255,s=e>>8&255,i=e&255;return`rgb(${l}, ${s}, ${i})`},gs=(t,e,l)=>{const s=(t<<16|e<<8|l)/2;return s%1?0:s},ps=["drawImage"],vs=["filter","shadowBlur","globalCompositeOperation","globalAlpha"],bs=["drawImage","fill","fillRect","fillText","stroke","strokeRect","strokeText"],ws=t=>{let e;const l=document.createElement("canvas"),s=l.getContext("2d",{willReadFrequently:!0}),i=()=>{l.width=t.canvas.width,l.height=t.canvas.height};return new MutationObserver(i).observe(t.canvas,{attributeFilter:["width","height"]}),i(),new Proxy(t,{get(r,o){if(o==="_getLayerIdAtPixel")return(h,u)=>{const[b,m,_]=s.getImageData(h,u,1,1).data;return gs(b,m,_)};const a=r[o];return typeof a!="function"?a:function(...h){if(bs.includes(o)){const u=_s(e());s.fillStyle=u,s.strokeStyle=u}if(o==="drawImage"){const u=h.slice(1);s.fillRect(...u)}return ps.includes(o)||Reflect.apply(a,s,h),Reflect.apply(a,r,h)}},set(r,o,a){return o==="_renderingLayerId"?(e=a,!0):(r[o]=a,vs.includes(o)||(s[o]=a),!0)}})};function Ss(t){let e,l,s,i=`${t[0]}px`,n=`${t[1]}px`,r,o,a,h,u;const b=t[18].default,m=pt(b,t,t[17],null);return{c(){e=M("canvas"),r=j(),o=M("div"),m&&m.c(),this.h()},l(_){e=P(_,"CANVAS",{width:!0,height:!0,class:!0,style:!0}),L(e).forEach(w),r=q(_),o=P(_,"DIV",{});var c=L(o);m&&m.l(c),c.forEach(w),this.h()},h(){y(e,"width",l=t[0]*t[5]),y(e,"height",s=t[1]*t[5]),y(e,"class",t[4]),y(e,"style",t[2]),He(e,"display","block"),He(e,"width",i),He(e,"height",n),He(o,"display","none")},m(_,c){J(_,e,c),t[64](e),J(_,r,c),J(_,o,c),m&&m.m(o,null),t[65](o),a=!0,h||(u=[C(e,"touchstart",kt(function(){Re(t[3]?t[9]:null)&&(t[3]?t[9]:null).apply(this,arguments)})),C(e,"mousemove",function(){Re(t[3]?t[8]:null)&&(t[3]?t[8]:null).apply(this,arguments)}),C(e,"pointermove",function(){Re(t[3]?t[8]:null)&&(t[3]?t[8]:null).apply(this,arguments)}),C(e,"click",function(){Re(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),C(e,"contextmenu",function(){Re(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),C(e,"dblclick",function(){Re(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),C(e,"mousedown",function(){Re(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),C(e,"mouseenter",function(){Re(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),C(e,"mouseleave",function(){Re(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),C(e,"mouseup",function(){Re(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),C(e,"wheel",function(){Re(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),C(e,"touchcancel",kt(function(){Re(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)})),C(e,"touchend",kt(function(){Re(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)})),C(e,"touchmove",kt(function(){Re(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)})),C(e,"pointerenter",function(){Re(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),C(e,"pointerleave",function(){Re(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),C(e,"pointerdown",function(){Re(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),C(e,"pointerup",function(){Re(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),C(e,"pointercancel",function(){Re(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),C(e,"focus",t[19]),C(e,"blur",t[20]),C(e,"fullscreenchange",t[21]),C(e,"fullscreenerror",t[22]),C(e,"scroll",t[23]),C(e,"cut",t[24]),C(e,"copy",t[25]),C(e,"paste",t[26]),C(e,"keydown",t[27]),C(e,"keypress",t[28]),C(e,"keyup",t[29]),C(e,"auxclick",t[30]),C(e,"click",t[31]),C(e,"contextmenu",t[32]),C(e,"dblclick",t[33]),C(e,"mousedown",t[34]),C(e,"mouseenter",t[35]),C(e,"mouseleave",t[36]),C(e,"mousemove",t[37]),C(e,"mouseover",t[38]),C(e,"mouseout",t[39]),C(e,"mouseup",t[40]),C(e,"select",t[41]),C(e,"wheel",t[42]),C(e,"drag",t[43]),C(e,"dragend",t[44]),C(e,"dragenter",t[45]),C(e,"dragstart",t[46]),C(e,"dragleave",t[47]),C(e,"dragover",t[48]),C(e,"drop",t[49]),C(e,"touchcancel",t[50]),C(e,"touchend",t[51]),C(e,"touchmove",t[52]),C(e,"touchstart",t[53]),C(e,"pointerover",t[54]),C(e,"pointerenter",t[55]),C(e,"pointerdown",t[56]),C(e,"pointermove",t[57]),C(e,"pointerup",t[58]),C(e,"pointercancel",t[59]),C(e,"pointerout",t[60]),C(e,"pointerleave",t[61]),C(e,"gotpointercapture",t[62]),C(e,"lostpointercapture",t[63])],h=!0)},p(_,c){t=_,(!a||c[0]&33&&l!==(l=t[0]*t[5]))&&y(e,"width",l),(!a||c[0]&34&&s!==(s=t[1]*t[5]))&&y(e,"height",s),(!a||c[0]&16)&&y(e,"class",t[4]),(!a||c[0]&4)&&y(e,"style",t[2]);const f=c[0]&4;(c[0]&4||f)&&He(e,"display","block"),(c[0]&5&&i!==(i=`${t[0]}px`)||f)&&He(e,"width",i),(c[0]&6&&n!==(n=`${t[1]}px`)||f)&&He(e,"height",n),m&&m.p&&(!a||c[0]&131072)&&vt(m,b,t,t[17],a?wt(b,t[17],c,null):bt(t[17]),null)},i(_){a||(K(m,_),a=!0)},o(_){$(m,_),a=!1},d(_){_&&(w(e),w(r),w(o)),t[64](null),m&&m.d(_),t[65](null),h=!1,We(u)}}}const zl=Symbol(),ks=()=>Jl(zl);function Is(t,e,l){let s,{$$slots:i={},$$scope:n}=e,{width:r=640,height:o=640,pixelRatio:a=null,style:h="",autoclear:u=!0,layerEvents:b=!1}=e,{class:m=""}=e,_,c=null,f;const d=new ms;function g(){d.redraw()}function k(){return _}function D(){return c}a==null&&(typeof window<"u"?a=window.devicePixelRatio:a=2),Vl(zl,{register:d.register,unregister:d.unregister,redraw:d.redraw}),yl(()=>{const S=_.getContext("2d");b?(c=ws(S),c._renderingLayerId=d.getRenderingLayerId):c=S,d.setup(c,f)}),Mt(()=>d.destroy());const A=S=>{const dt=S.offsetX*s,mt=S.offsetY*s,_t=c._getLayerIdAtPixel(dt,mt);d.setActiveLayer(_t,S),d.dispatchLayerEvent(S)},T=S=>{const{clientX:dt,clientY:mt}=S.changedTouches[0],{left:_t,top:R}=_.getBoundingClientRect(),se=(dt-_t)*s,pe=(mt-R)*s,Se=c._getLayerIdAtPixel(se,pe);d.setActiveLayer(Se,S),d.dispatchLayerEvent(S)},E=S=>{window.TouchEvent&&S instanceof TouchEvent&&S.preventDefault(),d.dispatchLayerEvent(S)};function I(S){Q.call(this,t,S)}function V(S){Q.call(this,t,S)}function z(S){Q.call(this,t,S)}function Z(S){Q.call(this,t,S)}function Y(S){Q.call(this,t,S)}function W(S){Q.call(this,t,S)}function F(S){Q.call(this,t,S)}function ee(S){Q.call(this,t,S)}function ue(S){Q.call(this,t,S)}function fe(S){Q.call(this,t,S)}function le(S){Q.call(this,t,S)}function ae(S){Q.call(this,t,S)}function Ee(S){Q.call(this,t,S)}function be(S){Q.call(this,t,S)}function we(S){Q.call(this,t,S)}function ne(S){Q.call(this,t,S)}function Me(S){Q.call(this,t,S)}function O(S){Q.call(this,t,S)}function p(S){Q.call(this,t,S)}function N(S){Q.call(this,t,S)}function X(S){Q.call(this,t,S)}function H(S){Q.call(this,t,S)}function de(S){Q.call(this,t,S)}function re(S){Q.call(this,t,S)}function ge(S){Q.call(this,t,S)}function oe(S){Q.call(this,t,S)}function Pe(S){Q.call(this,t,S)}function me(S){Q.call(this,t,S)}function G(S){Q.call(this,t,S)}function te(S){Q.call(this,t,S)}function he(S){Q.call(this,t,S)}function ce(S){Q.call(this,t,S)}function Le(S){Q.call(this,t,S)}function Oe(S){Q.call(this,t,S)}function Ye(S){Q.call(this,t,S)}function _e(S){Q.call(this,t,S)}function ye(S){Q.call(this,t,S)}function Fe(S){Q.call(this,t,S)}function De(S){Q.call(this,t,S)}function Ce(S){Q.call(this,t,S)}function Ne(S){Q.call(this,t,S)}function at(S){Q.call(this,t,S)}function ht(S){Q.call(this,t,S)}function ct(S){Q.call(this,t,S)}function ot(S){Q.call(this,t,S)}function ut(S){st[S?"unshift":"push"](()=>{_=S,l(6,_)})}function Rt(S){st[S?"unshift":"push"](()=>{f=S,l(7,f)})}return t.$$set=S=>{"width"in S&&l(0,r=S.width),"height"in S&&l(1,o=S.height),"pixelRatio"in S&&l(11,a=S.pixelRatio),"style"in S&&l(2,h=S.style),"autoclear"in S&&l(12,u=S.autoclear),"layerEvents"in S&&l(3,b=S.layerEvents),"class"in S&&l(4,m=S.class),"$$scope"in S&&l(17,n=S.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&2048&&l(5,s=a??1),t.$$.dirty[0]&1&&l(16,d.width=r,d),t.$$.dirty[0]&2&&l(16,d.height=o,d),t.$$.dirty[0]&32&&l(16,d.pixelRatio=s,d),t.$$.dirty[0]&4096&&l(16,d.autoclear=u,d),t.$$.dirty[0]&71683&&d.redraw()},[r,o,h,b,m,s,_,f,A,T,E,a,u,g,k,D,d,n,i,I,V,z,Z,Y,W,F,ee,ue,fe,le,ae,Ee,be,we,ne,Me,O,p,N,X,H,de,re,ge,oe,Pe,me,G,te,he,ce,Le,Oe,Ye,_e,ye,Fe,De,Ce,Ne,at,ht,ct,ot,ut,Rt]}class Es extends nt{constructor(e){super(),rt(this,e,Is,Ss,it,{width:0,height:1,pixelRatio:11,style:2,autoclear:12,layerEvents:3,class:4,redraw:13,getCanvas:14,getContext:15},null,[-1,-1,-1])}get redraw(){return this.$$.ctx[13]}get getCanvas(){return this.$$.ctx[14]}get getContext(){return this.$$.ctx[15]}}function ys(t){let e;return{c(){e=M("div"),this.h()},l(l){e=P(l,"DIV",{"data-layer-id":!0}),L(e).forEach(w),this.h()},h(){y(e,"data-layer-id",t[0])},m(l,s){J(l,e,s)},p:$e,i:$e,o:$e,d(l){l&&w(e)}}}function Ts(t,e,l){const{register:s,unregister:i,redraw:n}=ks(),r=El();let{setup:o=void 0}=e,{render:a=()=>{}}=e;const h=s({setup:o,render:a,dispatcher:r});return Mt(()=>i(h)),t.$$set=u=>{"setup"in u&&l(1,o=u.setup),"render"in u&&l(2,a=u.render)},t.$$.update=()=>{t.$$.dirty&4&&n()},[h,o,a]}class Rs extends nt{constructor(e){super(),rt(this,e,Ts,ys,it,{setup:1,render:2})}}let tl;const Ll=Date.now(),Nl=t=>(t(Date.now()-Ll),tl=window.requestAnimationFrame(()=>Nl(t)),()=>window.cancelAnimationFrame(tl));function As(){}const Cs=Wl(Date.now()-Ll,typeof window>"u"?As:Nl),{window:Ct}=Cl;function ll(t){let e,l,s,i,n,r;l=new Es({props:{width:t[0],height:t[1],$$slots:{default:[Ms]},$$scope:{ctx:t}}}),l.$on("pointerdown",t[5]),l.$on("wheel",t[8]);const o=t[26].default,a=pt(o,t,t[27],null);return{c(){e=M("div"),Ve(l.$$.fragment),s=j(),a&&a.c(),this.h()},l(h){e=P(h,"DIV",{style:!0});var u=L(e);Je(l.$$.fragment,u),s=q(u),a&&a.l(u),u.forEach(w),this.h()},h(){He(e,"touch-action","none"),He(e,"cursor",t[2])},m(h,u){J(h,e,u),je(l,e,null),v(e,s),a&&a.m(e,null),i=!0,n||(r=C(e,"resize",t[9]),n=!0)},p(h,u){const b={};u[0]&1&&(b.width=h[0]),u[0]&2&&(b.height=h[1]),u[0]&134217736&&(b.$$scope={dirty:u,ctx:h}),l.$set(b),a&&a.p&&(!i||u[0]&134217728)&&vt(a,o,h,h[27],i?wt(o,h[27],u,null):bt(h[27]),null),(!i||u[0]&4)&&He(e,"cursor",h[2])},i(h){i||(K(l.$$.fragment,h),K(a,h),i=!0)},o(h){$(l.$$.fragment,h),$(a,h),i=!1},d(h){h&&w(e),qe(l),a&&a.d(h),n=!1,r()}}}function Ms(t){let e,l;return e=new Rs({props:{render:t[3]}}),{c(){Ve(e.$$.fragment)},l(s){Je(e.$$.fragment,s)},m(s,i){je(e,s,i),l=!0},p(s,i){const n={};i[0]&8&&(n.render=s[3]),e.$set(n)},i(s){l||(K(e.$$.fragment,s),l=!0)},o(s){$(e.$$.fragment,s),l=!1},d(s){qe(e,s)}}}function Ps(t){let e,l,s,i,n=t[0]&&t[1]&&ll(t);return{c(){n&&n.c(),e=Ie()},l(r){n&&n.l(r),e=Ie()},m(r,o){n&&n.m(r,o),J(r,e,o),l=!0,s||(i=[C(Ct,"pointerup",t[6]),C(Ct,"pointermove",t[7]),C(Ct,"resize",t[9])],s=!0)},p(r,o){r[0]&&r[1]?n?(n.p(r,o),o[0]&3&&K(n,1)):(n=ll(r),n.c(),K(n,1),n.m(e.parentNode,e)):n&&(Ue(),$(n,1,1,()=>{n=null}),Be())},i(r){l||(K(n),l=!0)},o(r){$(n),l=!1},d(r){r&&w(e),n&&n.d(r),s=!1,We(i)}}}const sl="25px Roboto Mono",il="17px Roboto Mono",nl=2.6;function zs(t,e,l){let s,i,n,{$$slots:r={},$$scope:o}=e,{clickNode:a}=e,{circledNode:h}=e,{selectedJewel:u}=e,{selectedConqueror:b}=e,{seed:m}=e,{highlighted:_=[]}=e,{disabled:c=[]}=e,{highlightJewels:f=!1}=e;const d=Ql(Cs,p=>(!_||!_.length)&&!f?0:Math.round(p/40));yt(t,d,p=>l(25,n=p));const g=[427,320,226,227,323,422,329];let k=10,D=0,A=0;const T={},E={},I=(p,N,X,H=!1,de=!1)=>{let re=H?Kl[N]:qt[N];!re&&H&&(re=qt[N]);const ge=re.filename;ge in(H?E:T)||((H?E:T)[ge]=new Image,(H?E:T)[ge].src=ge);const oe=re.coords[N],Pe=oe.w/k*nl,me=oe.h/k*nl,G=X.x-Pe/2,te=X.y-me/2;let he=te;de&&(he=te-me/2),p.drawImage((H?E:T)[ge],oe.x,oe.y,oe.w,oe.h,G,he,Pe,me),de&&(p.save(),p.translate(G,te),p.rotate(Math.PI),p.drawImage((H?E:T)[ge],oe.x,oe.y,oe.w,oe.h,-Pe,-(me/2),Pe,-me),p.restore())},V=(p,N,X)=>{const H=[];let de="";return p.split(" ").forEach(re=>{N.measureText(de+re).width<X?de+=" "+re:(H.push(de.trim()),de=re)}),de.length>0&&H.push(de.trim()),H};let z={x:Number.MIN_VALUE,y:Number.MIN_VALUE},Z="unset",Y,W=0,F=0,ee=0,ue=0,fe=!1;const le=p=>{fe=!0,W=p.offsetX,F=p.offsetY,ee=D,ue=A,l(21,z={x:p.offsetX,y:p.offsetY}),Y&&a(Y)},ae=p=>{p.type==="pointerup"&&(fe=!1),l(21,z={x:p.offsetX,y:p.offsetY})},Ee=p=>{fe&&(l(19,D=ee-(W-p.offsetX)*k),l(20,A=ue-(F-p.offsetY)*k)),l(21,z={x:p.offsetX,y:p.offsetY})},be=p=>{p.deltaY>0?k<30&&(l(19,D+=p.offsetX),l(20,A+=p.offsetY)):k>3&&(l(19,D-=p.offsetX),l(20,A-=p.offsetY)),l(18,k=Math.min(30,Math.max(3,k+p.deltaY/100))),p.preventDefault(),p.stopPropagation(),p.stopImmediatePropagation()};let we=0,ne=0;const Me=()=>{l(0,we=window.innerWidth),l(1,ne=window.innerHeight)};let O=!1;return t.$$set=p=>{"clickNode"in p&&l(10,a=p.clickNode),"circledNode"in p&&l(11,h=p.circledNode),"selectedJewel"in p&&l(12,u=p.selectedJewel),"selectedConqueror"in p&&l(13,b=p.selectedConqueror),"seed"in p&&l(14,m=p.seed),"highlighted"in p&&l(15,_=p.highlighted),"disabled"in p&&l(16,c=p.disabled),"highlightJewels"in p&&l(17,f=p.highlightJewels),"$$scope"in p&&l(27,o=p.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&262144&&l(24,s=Hl/k),t.$$.dirty[0]&8650752&&(!O&&Ke&&(l(23,O=!0),l(19,D=Ke.min_x+window.innerWidth/2*k),l(20,A=Ke.min_y+window.innerHeight/2*k)),Me()),t.$$.dirty[0]&58718208&&l(3,i=({context:p,width:N,height:X})=>{const H=window.performance.now();p.clearRect(0,0,N,X),p.fillStyle="#080c11",p.fillRect(0,0,N,X);const de={};Object.keys(At).forEach(me=>{const G=At[me],te=Ot(G.x,G.y,D,A,k),he=Math.max(...G.orbits);g.indexOf(parseInt(me))>=0||(he==1?I(p,"PSGroupBackground1",te,!1):he==2?I(p,"PSGroupBackground2",te,!1):(he==3||G.orbits.length>1)&&I(p,"PSGroupBackground3",te,!1,!0))}),Object.keys(et).forEach(me=>{var ce;const G=et[me],te=Dt(G.orbit,G.orbitIndex),he=It(G,D,A,k);(ce=G.out)==null||ce.forEach(Le=>{if(!et[parseInt(Le)])return;const Oe=Math.min(parseInt(Le),parseInt(me)),Ye=Math.max(parseInt(Le),parseInt(me)),_e=Oe+":"+Ye;if(_e in de)return;de[_e]=!0;const ye=et[parseInt(Le)];if(!ye||ye.isMastery)return;const Fe=Dt(ye.orbit,ye.orbitIndex),De=It(ye,D,A,k);if(p.beginPath(),G.group!=ye.group||G.orbit!=ye.orbit)p.moveTo(he.x,he.y),p.lineTo(De.x,De.y);else{let Ce=Math.PI/180-Math.PI/180*te,Ne=Math.PI/180-Math.PI/180*Fe;Ce-=Math.PI/2,Ne-=Math.PI/2;const at=Math.abs(Math.max(Ce,Ne)-Math.min(Ce,Ne)),ht=at>Math.PI?Math.max(Ce,Ne):Math.min(Ce,Ne),ct=at>Math.PI?Math.min(Ce,Ne):Math.max(Ce,Ne),ot=At[G.group],ut=Ot(ot.x,ot.y,D,A,k);p.arc(ut.x,ut.y,Ke.constants.orbitRadii[G.orbit]/k+1,ht,ct)}p.lineWidth=6/k,p.strokeStyle="#524518",p.stroke()})});let re;h&&(re=It(et[h],D,A,k),p.strokeStyle="#ad2b2b");let ge=!1,oe;if(Object.keys(et).forEach(me=>{const G=et[me],te=It(G,D,A,k);let he=0,ce=!1;h&&Vt(te,re)<s&&(ce=!0),c.indexOf(G.skill)>=0&&(ce=!1),G.isKeystone?(he=110,I(p,G.icon,te,ce),ce?I(p,"KeystoneFrameAllocated",te,!1):I(p,"KeystoneFrameUnallocated",te,!1)):G.isNotable?(he=70,I(p,G.icon,te,ce),ce?I(p,"NotableFrameAllocated",te,!1):I(p,"NotableFrameUnallocated",te,!1)):G.isJewelSocket?(he=70,G.expansionJewel?I(p,"JewelSocketAltNormal",te,!1):ce?I(p,"JewelFrameAllocated",te,!1):I(p,"JewelFrameUnallocated",te,!1)):G.isMastery?I(p,G.inactiveIcon,te,ce):(he=50,I(p,G.icon,te,ce),ce?I(p,"PSSkillFrameActive",te,!1):I(p,"PSSkillFrame",te,!1)),(_.indexOf(G.skill)>=0||f&&G.isJewelSocket)&&(p.strokeStyle=`hsl(${n}, 100%, 50%)`,p.lineWidth=3,p.beginPath(),p.arc(te.x,te.y,(he+30)/k,0,Math.PI*2),p.stroke()),Vt(te,z)<he/k&&(oe=G,ge=ce)}),l(22,Y=oe),h&&(p.strokeStyle="#ad2b2b",p.lineWidth=1,p.beginPath(),p.arc(re.x,re.y,s,0,Math.PI*2),p.stroke()),Y){let me=Y.name,G=(Y.stats||[]).map(_e=>({text:_e,special:!1}));if(!Y.isJewelSocket&&ge&&Y.skill&&m&&u&&b){const _e=Rl.Calculate(ie.TreeToPassive[Y.skill].Index,m,u,b);_e&&("AlternatePassiveSkill"in _e&&_e.AlternatePassiveSkill&&(G=[],me=_e.AlternatePassiveSkill.Name,"StatsKeys"in _e.AlternatePassiveSkill&&_e.AlternatePassiveSkill.StatsKeys.forEach((ye,Fe)=>{const De=ie.GetStatByIndex(ye),Ce=Jt[De.ID]||"";Ce&&G.push({text:jt(Ce,_e.StatRolls[Fe])||De.ID,special:!0})})),_e.AlternatePassiveAdditionInformations&&_e.AlternatePassiveAdditionInformations.forEach(ye=>{"StatsKeys"in ye.AlternatePassiveAddition&&ye.AlternatePassiveAddition.StatsKeys.forEach((Fe,De)=>{const Ce=ie.GetStatByIndex(Fe),Ne=Jt[Ce.ID]||"";Ne&&G.push({text:jt(Ne,ye.StatRolls[De])||Ce.ID,special:!0})})}))}p.font=sl;const te=p.measureText(me),he=Math.max(te.width+50,600);p.font=il;const ce=[],Le=30;let Oe=85;G&&G.length>0?G.forEach(_e=>{ce.length>0&&(Oe+=5),_e.text.split(`
`).forEach(ye=>{ce.length>0&&(Oe+=10),V(ye,p,he-Le).forEach(De=>{ce.push({text:De,offset:Oe,special:_e.special}),Oe+=20})})}):Y.isJewelSocket&&(ce.push({text:"Click to select this socket",offset:Oe,special:!0}),Oe+=20);const Ye=55;p.fillStyle="rgba(75,63,24,0.9)",p.fillRect(z.x,z.y,he,Ye),p.fillStyle="#ffffff",p.font=sl,p.textAlign="center",p.fillText(me,z.x+he/2,z.y+35),p.fillStyle="rgba(0,0,0,0.8)",p.fillRect(z.x,z.y+Ye,he,Oe-Ye),p.font=il,p.textAlign="left",ce.forEach(_e=>{_e.special?p.fillStyle="#8cf34c":p.fillStyle="#ffffff",p.fillText(_e.text,z.x+Le/2,z.y+_e.offset)})}Y&&Y.isJewelSocket?l(2,Z="pointer"):l(2,Z="unset"),p.fillStyle="#ffffff",p.textAlign="right",p.font="12px Roboto Mono";const Pe=window.performance.now();p.fillText(`${(Pe-H).toFixed(1)}ms`,N-5,17)})},[we,ne,Z,i,d,le,ae,Ee,be,Me,a,h,u,b,m,_,c,f,k,D,A,z,Y,O,s,n,r,o]}class Ls extends nt{constructor(e){super(),rt(this,e,zs,Ps,it,{clickNode:10,circledNode:11,selectedJewel:12,selectedConqueror:13,seed:14,highlighted:15,disabled:16,highlightJewels:17},null,[-1,-1])}}const xe={25:1,26:1,42:1,49:1,56:1,63:1,70:2,95:4,117:1,124:4,134:1,150:2,216:1,434:1,482:1,483:1,484:1,488:1,554:1,556:1,593:3,594:3,595:3,619:1,943:1,944:1,945:1,946:1,2133:4,3108:3,3109:4,3110:4,3111:4,5815:4,8835:1,9091:1,9772:1,14775:2,209:1,447:1,573:2,1294:1,1361:1,2031:5,8177:2,448:2,486:1,579:2,1404:1,2030:5,9090:1,9711:2,9712:2,9713:2,9714:2,9716:1,9717:1,9718:1,9721:1,9722:1,9723:1,9724:1,186:2,490:1,1251:3,1654:1,3392:1,6042:1,6048:1,6049:1,6050:1,6136:1,7499:2};const{window:Ns}=Cl;function rl(t,e,l){const s=t.slice();return s[78]=e[l],s[79]=e,s[80]=l,s}function al(t,e,l){const s=t.slice();return s[71]=e[l],s}function ol(t,e,l){const s=t.slice();return s[71]=e[l],s}function ul(t,e,l){const s=t.slice();return s[71]=e[l],s}function Os(t){let e,l="<div></div> <div></div> <div></div>",s,i;return{c(){e=M("button"),e.innerHTML=l,this.h()},l(n){e=P(n,"BUTTON",{class:!0,"data-svelte-h":!0}),tt(e)!=="svelte-rq6e1l"&&(e.innerHTML=l),this.h()},h(){y(e,"class","burger-menu absolute top-0 left-0 bg-black/80 backdrop-blur-sm rounded-br-lg p-4 pt-5")},m(n,r){J(n,e,r),s||(i=C(e,"click",t[66]),s=!0)},p:$e,i:$e,o:$e,d(n){n&&w(e),s=!1,i()}}}function Ds(t){let e,l,s,i,n,r="<div></div> <div></div> <div></div>",o,a,h=(t[14]?t[10]("Results"):t[10]("Timeless Jewel"))+"",u,b,m,_,c,f,d,g,k,D;_=new Bl({});let A=t[18]&&fl(t),T=!t[14]&&cl(t),E=t[18]&&t[14]&&Il(t);return{c(){e=M("div"),l=M("div"),s=M("div"),i=M("div"),n=M("button"),n.innerHTML=r,o=j(),a=M("h3"),u=U(h),b=j(),m=M("div"),Ve(_.$$.fragment),c=j(),A&&A.c(),f=j(),T&&T.c(),d=j(),E&&E.c(),this.h()},l(I){e=P(I,"DIV",{class:!0});var V=L(e);l=P(V,"DIV",{class:!0});var z=L(l);s=P(z,"DIV",{class:!0});var Z=L(s);i=P(Z,"DIV",{class:!0});var Y=L(i);n=P(Y,"BUTTON",{class:!0,"data-svelte-h":!0}),tt(n)!=="svelte-mvbl10"&&(n.innerHTML=r),o=q(Y),a=P(Y,"H3",{class:!0});var W=L(a);u=B(W,h),W.forEach(w),b=q(Y),m=P(Y,"DIV",{class:!0});var F=L(m);Je(_.$$.fragment,F),F.forEach(w),Y.forEach(w),c=q(Z),A&&A.l(Z),Z.forEach(w),f=q(z),T&&T.l(z),d=q(z),E&&E.l(z),z.forEach(w),V.forEach(w),this.h()},h(){y(n,"class","burger-menu mr-3"),y(a,"class","flex-grow"),y(m,"class","ml-4"),y(i,"class","flex flex-row items-center"),y(s,"class","flex flex-row justify-between mb-2"),y(l,"class","p-4 max-h-screen flex flex-col"),y(e,"class","w-screen md:w-10/12 lg:w-2/3 xl:w-1/2 2xl:w-5/12 3xl:w-1/3 4xl:w-1/4 absolute top-0 left-0 bg-black/80 backdrop-blur-sm themed rounded-br-lg max-h-screen")},m(I,V){J(I,e,V),v(e,l),v(l,s),v(s,i),v(i,n),v(i,o),v(i,a),v(a,u),v(i,b),v(i,m),je(_,m,null),v(s,c),A&&A.m(s,null),v(l,f),T&&T.m(l,null),v(l,d),E&&E.m(l,null),g=!0,k||(D=C(n,"click",t[45]),k=!0)},p(I,V){(!g||V[0]&17408)&&h!==(h=(I[14]?I[10]("Results"):I[10]("Timeless Jewel"))+"")&&x(u,h),I[18]?A?A.p(I,V):(A=fl(I),A.c(),A.m(s,null)):A&&(A.d(1),A=null),I[14]?T&&(Ue(),$(T,1,1,()=>{T=null}),Be()):T?(T.p(I,V),V[0]&16384&&K(T,1)):(T=cl(I),T.c(),K(T,1),T.m(l,d)),I[18]&&I[14]?E?(E.p(I,V),V[0]&278528&&K(E,1)):(E=Il(I),E.c(),K(E,1),E.m(l,null)):E&&(Ue(),$(E,1,1,()=>{E=null}),Be())},i(I){g||(K(_.$$.fragment,I),K(T),K(E),g=!0)},o(I){$(_.$$.fragment,I),$(T),$(E),g=!1},d(I){I&&w(e),qe(_),A&&A.d(),T&&T.d(),E&&E.d(),k=!1,D()}}}function fl(t){let e,l,s,i=(t[14]?t[10]("Config"):t[10]("Results"))+"",n,r,o,a=t[14]&&hl(t);return{c(){e=M("div"),a&&a.c(),l=j(),s=M("button"),n=U(i),this.h()},l(h){e=P(h,"DIV",{class:!0});var u=L(e);a&&a.l(u),l=q(u),s=P(u,"BUTTON",{class:!0});var b=L(s);n=B(b,i),b.forEach(w),u.forEach(w),this.h()},h(){y(s,"class","bg-neutral-100/20 px-4 p-1 rounded"),y(e,"class","flex flex-row")},m(h,u){J(h,e,u),a&&a.m(e,null),v(e,l),v(e,s),v(s,n),r||(o=C(s,"click",t[48]),r=!0)},p(h,u){h[14]?a?a.p(h,u):(a=hl(h),a.c(),a.m(e,l)):a&&(a.d(1),a=null),u[0]&17408&&i!==(i=(h[14]?h[10]("Config"):h[10]("Results"))+"")&&x(n,i)},d(h){h&&w(e),a&&a.d(),r=!1,o()}}}function hl(t){let e,l=t[10]("Trade")+"",s,i,n,r,o=t[10]("Grouped")+"",a,h,u,b;return{c(){e=M("button"),s=U(l),n=j(),r=M("button"),a=U(o),this.h()},l(m){e=P(m,"BUTTON",{class:!0});var _=L(e);s=B(_,l),_.forEach(w),n=q(m),r=P(m,"BUTTON",{class:!0});var c=L(r);a=B(c,o),c.forEach(w),this.h()},h(){y(e,"class","p-1 px-3 bg-blue-500/40 rounded disabled:bg-blue-900/40 mr-2"),e.disabled=i=!t[18],y(r,"class","p-1 px-3 bg-blue-500/40 rounded disabled:bg-blue-900/40 mr-2 svelte-9h6fz6"),r.disabled=h=!t[18],ve(r,"grouped",t[5])},m(m,_){J(m,e,_),v(e,s),J(m,n,_),J(m,r,_),v(r,a),u||(b=[C(e,"click",t[46]),C(r,"click",t[47])],u=!0)},p(m,_){_[0]&1024&&l!==(l=m[10]("Trade")+"")&&x(s,l),_[0]&262144&&i!==(i=!m[18])&&(e.disabled=i),_[0]&1024&&o!==(o=m[10]("Grouped")+"")&&x(a,o),_[0]&262144&&h!==(h=!m[18])&&(r.disabled=h),_[0]&32&&ve(r,"grouped",m[5])},d(m){m&&(w(e),w(n),w(r)),u=!1,We(b)}}}function cl(t){let e,l,s,i,n;function r(h){t[49](h)}let o={items:t[26]};t[0]!==void 0&&(o.value=t[0]),e=new Tt({props:o}),st.push(()=>Nt(e,"value",r)),e.$on("change",t[32]);let a=t[0]&&dl(t);return{c(){Ve(e.$$.fragment),s=j(),a&&a.c(),i=Ie()},l(h){Je(e.$$.fragment,h),s=q(h),a&&a.l(h),i=Ie()},m(h,u){je(e,h,u),J(h,s,u),a&&a.m(h,u),J(h,i,u),n=!0},p(h,u){const b={};!l&&u[0]&1&&(l=!0,b.value=h[0],Pt(()=>l=!1)),e.$set(b),h[0]?a?(a.p(h,u),u[0]&1&&K(a,1)):(a=dl(h),a.c(),K(a,1),a.m(i.parentNode,i)):a&&(Ue(),$(a,1,1,()=>{a=null}),Be())},i(h){n||(K(e.$$.fragment,h),K(a),n=!0)},o(h){$(e.$$.fragment,h),$(a),n=!1},d(h){h&&(w(s),w(i)),qe(e,h),a&&a.d(h)}}}function dl(t){let e,l,s=t[10]("Conqueror")+"",i,n,r,o,a,h=t[1]&&Object.keys(ie.TimelessJewelConquerors[t[0].value]).indexOf(t[1].value)>=0,u,b;function m(f){t[50](f)}let _={items:t[25]};t[1]!==void 0&&(_.value=t[1]),r=new Tt({props:_}),st.push(()=>Nt(r,"value",m)),r.$on("change",t[27]);let c=h&&ml(t);return{c(){e=M("div"),l=M("h3"),i=U(s),n=j(),Ve(r.$$.fragment),a=j(),c&&c.c(),u=Ie(),this.h()},l(f){e=P(f,"DIV",{class:!0});var d=L(e);l=P(d,"H3",{class:!0});var g=L(l);i=B(g,s),g.forEach(w),n=q(d),Je(r.$$.fragment,d),d.forEach(w),a=q(f),c&&c.l(f),u=Ie(),this.h()},h(){y(l,"class","mb-2"),y(e,"class","mt-4")},m(f,d){J(f,e,d),v(e,l),v(l,i),v(e,n),je(r,e,null),J(f,a,d),c&&c.m(f,d),J(f,u,d),b=!0},p(f,d){(!b||d[0]&1024)&&s!==(s=f[10]("Conqueror")+"")&&x(i,s);const g={};d[0]&33554432&&(g.items=f[25]),!o&&d[0]&2&&(o=!0,g.value=f[1],Pt(()=>o=!1)),r.$set(g),d[0]&3&&(h=f[1]&&Object.keys(ie.TimelessJewelConquerors[f[0].value]).indexOf(f[1].value)>=0),h?c?(c.p(f,d),d[0]&3&&K(c,1)):(c=ml(f),c.c(),K(c,1),c.m(u.parentNode,u)):c&&(Ue(),$(c,1,1,()=>{c=null}),Be())},i(f){b||(K(r.$$.fragment,f),K(c),b=!0)},o(f){$(r.$$.fragment,f),$(c),b=!1},d(f){f&&(w(e),w(a),w(u)),qe(r),c&&c.d(f)}}}function ml(t){let e,l,s=t[10]("Enter Seed")+"",i,n,r,o=t[10]("Select Stats")+"",a,h,u,b,m,_,c,f,d;const g=[Js,Vs],k=[];function D(T,E){return T[11]==="seed"?0:T[11]==="stats"?1:-1}~(u=D(t))&&(b=k[u]=g[u](t));let A=!t[3]&&kl(t);return{c(){e=M("div"),l=M("button"),i=U(s),n=j(),r=M("button"),a=U(o),h=j(),b&&b.c(),m=j(),A&&A.c(),_=Ie(),this.h()},l(T){e=P(T,"DIV",{class:!0});var E=L(e);l=P(E,"BUTTON",{class:!0});var I=L(l);i=B(I,s),I.forEach(w),n=q(E),r=P(E,"BUTTON",{class:!0});var V=L(r);a=B(V,o),V.forEach(w),E.forEach(w),h=q(T),b&&b.l(T),m=q(T),A&&A.l(T),_=Ie(),this.h()},h(){y(l,"class","selection-button svelte-9h6fz6"),ve(l,"selected",t[11]==="seed"),y(r,"class","selection-button svelte-9h6fz6"),ve(r,"selected",t[11]==="stats"),y(e,"class","mt-4 w-full flex flex-row")},m(T,E){J(T,e,E),v(e,l),v(l,i),v(e,n),v(e,r),v(r,a),J(T,h,E),~u&&k[u].m(T,E),J(T,m,E),A&&A.m(T,E),J(T,_,E),c=!0,f||(d=[C(l,"click",t[51]),C(r,"click",t[52])],f=!0)},p(T,E){(!c||E[0]&1024)&&s!==(s=T[10]("Enter Seed")+"")&&x(i,s),(!c||E[0]&2048)&&ve(l,"selected",T[11]==="seed"),(!c||E[0]&1024)&&o!==(o=T[10]("Select Stats")+"")&&x(a,o),(!c||E[0]&2048)&&ve(r,"selected",T[11]==="stats");let I=u;u=D(T),u===I?~u&&k[u].p(T,E):(b&&(Ue(),$(k[I],1,1,()=>{k[I]=null}),Be()),~u?(b=k[u],b?b.p(T,E):(b=k[u]=g[u](T),b.c()),K(b,1),b.m(m.parentNode,m)):b=null),T[3]?A&&(A.d(1),A=null):A?A.p(T,E):(A=kl(T),A.c(),A.m(_.parentNode,_))},i(T){c||(K(b),c=!0)},o(T){$(b),c=!1},d(T){T&&(w(e),w(h),w(m),w(_)),~u&&k[u].d(T),A&&A.d(T),f=!1,We(d)}}}function Vs(t){let e,l,s=t[10]("Add Stat")+"",i,n,r,o,a=Object.keys(t[4]).length>0,h,u,b={items:t[23]};r=new Tt({props:b}),t[60](r),r.$on("change",t[30]);let m=a&&_l(t);return{c(){e=M("div"),l=M("h3"),i=U(s),n=j(),Ve(r.$$.fragment),o=j(),m&&m.c(),h=Ie(),this.h()},l(_){e=P(_,"DIV",{class:!0});var c=L(e);l=P(c,"H3",{class:!0});var f=L(l);i=B(f,s),f.forEach(w),n=q(c),Je(r.$$.fragment,c),c.forEach(w),o=q(_),m&&m.l(_),h=Ie(),this.h()},h(){y(l,"class","mb-2"),y(e,"class","mt-4")},m(_,c){J(_,e,c),v(e,l),v(l,i),v(e,n),je(r,e,null),J(_,o,c),m&&m.m(_,c),J(_,h,c),u=!0},p(_,c){(!u||c[0]&1024)&&s!==(s=_[10]("Add Stat")+"")&&x(i,s);const f={};c[0]&8388608&&(f.items=_[23]),r.$set(f),c[0]&16&&(a=Object.keys(_[4]).length>0),a?m?m.p(_,c):(m=_l(_),m.c(),m.m(h.parentNode,h)):m&&(m.d(1),m=null)},i(_){u||(K(r.$$.fragment,_),u=!0)},o(_){$(r.$$.fragment,_),u=!1},d(_){_&&(w(e),w(o),w(h)),t[60](null),qe(r),m&&m.d(_)}}}function Js(t){let e,l,s=t[10]("Seed")+"",i,n,r,o,a,h,u,b,m,_,c,f=(t[2]<ie.TimelessJewelSeedRanges[t[0].value].Min||t[2]>ie.TimelessJewelSeedRanges[t[0].value].Max)&&pl(t),d=t[2]>=ie.TimelessJewelSeedRanges[t[0].value].Min&&t[2]<=ie.TimelessJewelSeedRanges[t[0].value].Max&&vl(t);return{c(){e=M("div"),l=M("h3"),i=U(s),n=j(),r=M("input"),h=j(),f&&f.c(),u=j(),d&&d.c(),b=Ie(),this.h()},l(g){e=P(g,"DIV",{class:!0});var k=L(e);l=P(k,"H3",{class:!0});var D=L(l);i=B(D,s),D.forEach(w),n=q(k),r=P(k,"INPUT",{type:!0,min:!0,max:!0}),h=q(k),f&&f.l(k),k.forEach(w),u=q(g),d&&d.l(g),b=Ie(),this.h()},h(){y(l,"class","mb-2"),y(r,"type","number"),y(r,"min",o=ie.TimelessJewelSeedRanges[t[0].value].Min),y(r,"max",a=ie.TimelessJewelSeedRanges[t[0].value].Max),y(e,"class","mt-4")},m(g,k){J(g,e,k),v(e,l),v(l,i),v(e,n),v(e,r),Ze(r,t[2]),v(e,h),f&&f.m(e,null),J(g,u,k),d&&d.m(g,k),J(g,b,k),m=!0,_||(c=[C(r,"input",t[53]),C(r,"blur",t[27])],_=!0)},p(g,k){(!m||k[0]&1024)&&s!==(s=g[10]("Seed")+"")&&x(i,s),(!m||k[0]&1&&o!==(o=ie.TimelessJewelSeedRanges[g[0].value].Min))&&y(r,"min",o),(!m||k[0]&1&&a!==(a=ie.TimelessJewelSeedRanges[g[0].value].Max))&&y(r,"max",a),k[0]&4&&Qe(r.value)!==g[2]&&Ze(r,g[2]),g[2]<ie.TimelessJewelSeedRanges[g[0].value].Min||g[2]>ie.TimelessJewelSeedRanges[g[0].value].Max?f?f.p(g,k):(f=pl(g),f.c(),f.m(e,null)):f&&(f.d(1),f=null),g[2]>=ie.TimelessJewelSeedRanges[g[0].value].Min&&g[2]<=ie.TimelessJewelSeedRanges[g[0].value].Max?d?(d.p(g,k),k[0]&5&&K(d,1)):(d=vl(g),d.c(),K(d,1),d.m(b.parentNode,b)):d&&(Ue(),$(d,1,1,()=>{d=null}),Be())},i(g){m||(K(d),m=!0)},o(g){$(d),m=!1},d(g){g&&(w(e),w(u),w(b)),f&&f.d(),d&&d.d(g),_=!1,We(c)}}}function _l(t){let e,l,s,i,n,r=t[10]("Min Total Weight")+"",o,a,h,u,b,m,_,c=t[10]("Select All")+"",f,d,g,k,D=t[10]("Notables")+"",A,T,E,I,V=t[10]("Passives")+"",z,Z,Y,W,F=t[10]("Deselect")+"",ee,ue,fe,le,ae,Ee,be,we=ze(Object.keys(t[4])),ne=[];for(let N=0;N<we.length;N+=1)ne[N]=gl(rl(t,we,N));function Me(N,X){return N[16]?qs:js}let O=Me(t),p=O(t);return{c(){e=M("div");for(let N=0;N<ne.length;N+=1)ne[N].c();l=j(),s=M("div"),i=M("div"),n=M("div"),o=U(r),a=j(),h=M("input"),u=j(),b=M("div"),m=M("div"),_=M("button"),f=U(c),g=j(),k=M("button"),A=U(D),E=j(),I=M("button"),z=U(V),Y=j(),W=M("button"),ee=U(F),fe=j(),le=M("div"),ae=M("button"),p.c(),this.h()},l(N){e=P(N,"DIV",{class:!0});var X=L(e);for(let Le=0;Le<ne.length;Le+=1)ne[Le].l(X);X.forEach(w),l=q(N),s=P(N,"DIV",{class:!0});var H=L(s);i=P(H,"DIV",{class:!0});var de=L(i);n=P(de,"DIV",{class:!0});var re=L(n);o=B(re,r),re.forEach(w),a=q(de),h=P(de,"INPUT",{type:!0,min:!0}),de.forEach(w),H.forEach(w),u=q(N),b=P(N,"DIV",{class:!0});var ge=L(b);m=P(ge,"DIV",{class:!0});var oe=L(m);_=P(oe,"BUTTON",{class:!0});var Pe=L(_);f=B(Pe,c),Pe.forEach(w),g=q(oe),k=P(oe,"BUTTON",{class:!0});var me=L(k);A=B(me,D),me.forEach(w),E=q(oe),I=P(oe,"BUTTON",{class:!0});var G=L(I);z=B(G,V),G.forEach(w),Y=q(oe),W=P(oe,"BUTTON",{class:!0});var te=L(W);ee=B(te,F),te.forEach(w),oe.forEach(w),fe=q(ge),le=P(ge,"DIV",{class:!0});var he=L(le);ae=P(he,"BUTTON",{class:!0});var ce=L(ae);p.l(ce),ce.forEach(w),he.forEach(w),ge.forEach(w),this.h()},h(){y(e,"class","mt-4 flex flex-col overflow-auto min-h-[100px]"),y(n,"class","mr-2 min-w-fit"),y(h,"type","number"),y(h,"min","0"),y(i,"class","flex flex-row items-center"),y(s,"class","flex flex-col mt-2"),y(_,"class","p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 mr-2"),_.disabled=d=t[16]||t[12].size==0,y(k,"class","p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 mr-2"),k.disabled=T=t[16]||t[12].size==0,y(I,"class","p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 mr-2"),I.disabled=Z=t[16]||t[12].size==0,y(W,"class","p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 flex-grow"),W.disabled=ue=t[16]||t[12].size>=t[9].length,y(m,"class","flex flex-row"),y(ae,"class","p-2 px-3 bg-green-500/40 rounded disabled:bg-green-900/40 flex-grow"),ae.disabled=t[16],y(le,"class","flex flex-row mt-2"),y(b,"class","flex flex-col mt-4")},m(N,X){J(N,e,X);for(let H=0;H<ne.length;H+=1)ne[H]&&ne[H].m(e,null);J(N,l,X),J(N,s,X),v(s,i),v(i,n),v(n,o),v(i,a),v(i,h),Ze(h,t[15]),J(N,u,X),J(N,b,X),v(b,m),v(m,_),v(_,f),v(m,g),v(m,k),v(k,A),v(m,E),v(m,I),v(I,z),v(m,Y),v(m,W),v(W,ee),v(b,fe),v(b,le),v(le,ae),p.m(ae,null),Ee||(be=[C(h,"input",t[64]),C(_,"click",t[35]),C(k,"click",t[36]),C(I,"click",t[37]),C(W,"click",t[38]),C(ae,"click",t[65])],Ee=!0)},p(N,X){if(X[0]&1040|X[1]&1){we=ze(Object.keys(N[4]));let H;for(H=0;H<we.length;H+=1){const de=rl(N,we,H);ne[H]?ne[H].p(de,X):(ne[H]=gl(de),ne[H].c(),ne[H].m(e,null))}for(;H<ne.length;H+=1)ne[H].d(1);ne.length=we.length}X[0]&1024&&r!==(r=N[10]("Min Total Weight")+"")&&x(o,r),X[0]&32768&&Qe(h.value)!==N[15]&&Ze(h,N[15]),X[0]&1024&&c!==(c=N[10]("Select All")+"")&&x(f,c),X[0]&69632&&d!==(d=N[16]||N[12].size==0)&&(_.disabled=d),X[0]&1024&&D!==(D=N[10]("Notables")+"")&&x(A,D),X[0]&69632&&T!==(T=N[16]||N[12].size==0)&&(k.disabled=T),X[0]&1024&&V!==(V=N[10]("Passives")+"")&&x(z,V),X[0]&69632&&Z!==(Z=N[16]||N[12].size==0)&&(I.disabled=Z),X[0]&1024&&F!==(F=N[10]("Deselect")+"")&&x(ee,F),X[0]&70144&&ue!==(ue=N[16]||N[12].size>=N[9].length)&&(W.disabled=ue),O===(O=Me(N))&&p?p.p(N,X):(p.d(1),p=O(N),p&&(p.c(),p.m(ae,null))),X[0]&65536&&(ae.disabled=N[16])},d(N){N&&(w(e),w(l),w(s),w(u),w(b)),lt(ne,N),p.d(),Ee=!1,We(be)}}}function gl(t){let e,l,s,i="-",n,r,o=ft(t[4][t[78]].id)+"",a,h,u,b,m,_=t[10]("Min")+"",c,f,d,g,k,D,A,T=t[10]("Weight")+"",E,I,V,z,Z,Y,W;function F(){return t[61](t[78])}function ee(){t[62].call(g,t[78])}function ue(){t[63].call(z,t[78])}return{c(){e=M("div"),l=M("div"),s=M("button"),s.textContent=i,n=j(),r=M("span"),a=U(o),h=j(),u=M("div"),b=M("div"),m=M("div"),c=U(_),f=U(":"),d=j(),g=M("input"),k=j(),D=M("div"),A=M("div"),E=U(T),I=U(":"),V=j(),z=M("input"),Z=j(),this.h()},l(fe){e=P(fe,"DIV",{class:!0});var le=L(e);l=P(le,"DIV",{});var ae=L(l);s=P(ae,"BUTTON",{class:!0,"data-svelte-h":!0}),tt(s)!=="svelte-bzfob2"&&(s.textContent=i),n=q(ae),r=P(ae,"SPAN",{});var Ee=L(r);a=B(Ee,o),Ee.forEach(w),ae.forEach(w),h=q(le),u=P(le,"DIV",{class:!0});var be=L(u);b=P(be,"DIV",{class:!0});var we=L(b);m=P(we,"DIV",{class:!0});var ne=L(m);c=B(ne,_),f=B(ne,":"),ne.forEach(w),d=q(we),g=P(we,"INPUT",{type:!0,min:!0}),we.forEach(w),k=q(be),D=P(be,"DIV",{class:!0});var Me=L(D);A=P(Me,"DIV",{class:!0});var O=L(A);E=B(O,T),I=B(O,":"),O.forEach(w),V=q(Me),z=P(Me,"INPUT",{type:!0,min:!0}),Me.forEach(w),be.forEach(w),Z=q(le),le.forEach(w),this.h()},h(){y(s,"class","p-2 px-4 bg-red-500/40 rounded mr-2"),y(m,"class","mr-2"),y(g,"type","number"),y(g,"min","0"),y(b,"class","mr-4 flex flex-row items-center"),y(A,"class","mr-2"),y(z,"type","number"),y(z,"min","0"),y(D,"class","flex flex-row items-center"),y(u,"class","mt-2 flex flex-row"),y(e,"class","mb-4 flex flex-row items-start flex-col border-neutral-100/40 border-b pb-4")},m(fe,le){J(fe,e,le),v(e,l),v(l,s),v(l,n),v(l,r),v(r,a),v(e,h),v(e,u),v(u,b),v(b,m),v(m,c),v(m,f),v(b,d),v(b,g),Ze(g,t[4][t[78]].min),v(u,k),v(u,D),v(D,A),v(A,E),v(A,I),v(D,V),v(D,z),Ze(z,t[4][t[78]].weight),v(e,Z),Y||(W=[C(s,"click",F),C(g,"input",ee),C(z,"input",ue)],Y=!0)},p(fe,le){t=fe,le[0]&16&&o!==(o=ft(t[4][t[78]].id)+"")&&x(a,o),le[0]&1024&&_!==(_=t[10]("Min")+"")&&x(c,_),le[0]&16&&Qe(g.value)!==t[4][t[78]].min&&Ze(g,t[4][t[78]].min),le[0]&1024&&T!==(T=t[10]("Weight")+"")&&x(E,T),le[0]&16&&Qe(z.value)!==t[4][t[78]].weight&&Ze(z,t[4][t[78]].weight)},d(fe){fe&&w(e),Y=!1,We(W)}}}function js(t){let e=t[10]("Search")+"",l;return{c(){l=U(e)},l(s){l=B(s,e)},m(s,i){J(s,l,i)},p(s,i){i[0]&1024&&e!==(e=s[10]("Search")+"")&&x(l,e)},d(s){s&&w(l)}}}function qs(t){let e,l,s=ie.TimelessJewelSeedRanges[t[0].value].Max+"",i;return{c(){e=U(t[17]),l=U(" / "),i=U(s)},l(n){e=B(n,t[17]),l=B(n," / "),i=B(n,s)},m(n,r){J(n,e,r),J(n,l,r),J(n,i,r)},p(n,r){r[0]&131072&&x(e,n[17]),r[0]&1&&s!==(s=ie.TimelessJewelSeedRanges[n[0].value].Max+"")&&x(i,s)},d(n){n&&(w(e),w(l),w(i))}}}function pl(t){let e,l=t[10]("Seed must be between",{values:{min:ie.TimelessJewelSeedRanges[t[0].value].Min,max:ie.TimelessJewelSeedRanges[t[0].value].Max}})+"",s;return{c(){e=M("div"),s=U(l),this.h()},l(i){e=P(i,"DIV",{class:!0});var n=L(e);s=B(n,l),n.forEach(w),this.h()},h(){y(e,"class","mt-2")},m(i,n){J(i,e,n),v(e,s)},p(i,n){n[0]&1025&&l!==(l=i[10]("Seed must be between",{values:{min:ie.TimelessJewelSeedRanges[i[0].value].Min,max:ie.TimelessJewelSeedRanges[i[0].value].Max}})+"")&&x(s,l)},d(i){i&&w(e)}}}function vl(t){let e,l,s,i=t[10]("Sort Order")+"",n,r,o,a,h,u,b,m=t[10]("Colors")+"",_,c,f,d,g=t[10]("Split")+"",k,D,A,T,E,I;function V(F){t[54](F)}let z={items:t[41]};t[6]!==void 0&&(z.value=t[6]),o=new Tt({props:z}),st.push(()=>Nt(o,"value",V));function Z(F,ee){return F[8]?Us:Bs}let Y=Z(t),W=Y(t);return{c(){e=M("div"),l=M("div"),s=M("h3"),n=U(i),r=j(),Ve(o.$$.fragment),h=j(),u=M("div"),b=M("button"),_=U(m),c=j(),f=M("div"),d=M("button"),k=U(g),D=j(),W.c(),A=Ie(),this.h()},l(F){e=P(F,"DIV",{class:!0});var ee=L(e);l=P(ee,"DIV",{class:!0});var ue=L(l);s=P(ue,"H3",{class:!0});var fe=L(s);n=B(fe,i),fe.forEach(w),r=q(ue),Je(o.$$.fragment,ue),ue.forEach(w),h=q(ee),u=P(ee,"DIV",{class:!0});var le=L(u);b=P(le,"BUTTON",{class:!0});var ae=L(b);_=B(ae,m),ae.forEach(w),le.forEach(w),c=q(ee),f=P(ee,"DIV",{class:!0});var Ee=L(f);d=P(Ee,"BUTTON",{class:!0});var be=L(d);k=B(be,g),be.forEach(w),Ee.forEach(w),ee.forEach(w),D=q(F),W.l(F),A=Ie(),this.h()},h(){y(s,"class","mb-2"),y(l,"class","flex-grow"),y(b,"class","bg-neutral-500/20 p-2 px-4 rounded svelte-9h6fz6"),ve(b,"selected",t[7]),y(u,"class","ml-2"),y(d,"class","bg-neutral-500/20 p-2 px-4 rounded svelte-9h6fz6"),ve(d,"selected",t[8]),y(f,"class","ml-2"),y(e,"class","flex flex-row mt-4 items-end")},m(F,ee){J(F,e,ee),v(e,l),v(l,s),v(s,n),v(l,r),je(o,l,null),v(e,h),v(e,u),v(u,b),v(b,_),v(e,c),v(e,f),v(f,d),v(d,k),J(F,D,ee),W.m(F,ee),J(F,A,ee),T=!0,E||(I=[C(b,"click",t[55]),C(d,"click",t[56])],E=!0)},p(F,ee){(!T||ee[0]&1024)&&i!==(i=F[10]("Sort Order")+"")&&x(n,i);const ue={};!a&&ee[0]&64&&(a=!0,ue.value=F[6],Pt(()=>a=!1)),o.$set(ue),(!T||ee[0]&1024)&&m!==(m=F[10]("Colors")+"")&&x(_,m),(!T||ee[0]&128)&&ve(b,"selected",F[7]),(!T||ee[0]&1024)&&g!==(g=F[10]("Split")+"")&&x(k,g),(!T||ee[0]&256)&&ve(d,"selected",F[8]),Y===(Y=Z(F))&&W?W.p(F,ee):(W.d(1),W=Y(F),W&&(W.c(),W.m(A.parentNode,A)))},i(F){T||(K(o.$$.fragment,F),T=!0)},o(F){$(o.$$.fragment,F),T=!1},d(F){F&&(w(e),w(D),w(A)),qe(o),W.d(F),E=!1,We(I)}}}function Us(t){let e,l,s="Notables",i,n,r,o,a="Smalls",h,u,b=ze(t[40](t[39](t[24],t[7],"notables"),t[6].value)),m=[];for(let f=0;f<b.length;f+=1)m[f]=bl(ol(t,b,f));let _=ze(t[40](t[39](t[24],t[7],"passives"),t[6].value)),c=[];for(let f=0;f<_.length;f+=1)c[f]=wl(al(t,_,f));return{c(){e=M("div"),l=M("h3"),l.textContent=s,i=j(),n=M("ul");for(let f=0;f<m.length;f+=1)m[f].c();r=j(),o=M("h3"),o.textContent=a,h=j(),u=M("ul");for(let f=0;f<c.length;f+=1)c[f].c();this.h()},l(f){e=P(f,"DIV",{class:!0});var d=L(e);l=P(d,"H3",{"data-svelte-h":!0}),tt(l)!=="svelte-uhg2bi"&&(l.textContent=s),i=q(d),n=P(d,"UL",{class:!0});var g=L(n);for(let D=0;D<m.length;D+=1)m[D].l(g);g.forEach(w),r=q(d),o=P(d,"H3",{class:!0,"data-svelte-h":!0}),tt(o)!=="svelte-mdvksr"&&(o.textContent=a),h=q(d),u=P(d,"UL",{class:!0});var k=L(u);for(let D=0;D<c.length;D+=1)c[D].l(k);k.forEach(w),d.forEach(w),this.h()},h(){y(n,"class","mt-1 svelte-9h6fz6"),ve(n,"rainbow",t[7]),y(o,"class","mt-2"),y(u,"class","mt-1 svelte-9h6fz6"),ve(u,"rainbow",t[7]),y(e,"class","overflow-auto mt-4")},m(f,d){J(f,e,d),v(e,l),v(e,i),v(e,n);for(let g=0;g<m.length;g+=1)m[g]&&m[g].m(n,null);v(e,r),v(e,o),v(e,h),v(e,u);for(let g=0;g<c.length;g+=1)c[g]&&c[g].m(u,null)},p(f,d){if(d[0]&16777412|d[1]&776){b=ze(f[40](f[39](f[24],f[7],"notables"),f[6].value));let g;for(g=0;g<b.length;g+=1){const k=ol(f,b,g);m[g]?m[g].p(k,d):(m[g]=bl(k),m[g].c(),m[g].m(n,null))}for(;g<m.length;g+=1)m[g].d(1);m.length=b.length}if(d[0]&128&&ve(n,"rainbow",f[7]),d[0]&16777412|d[1]&776){_=ze(f[40](f[39](f[24],f[7],"passives"),f[6].value));let g;for(g=0;g<_.length;g+=1){const k=al(f,_,g);c[g]?c[g].p(k,d):(c[g]=wl(k),c[g].c(),c[g].m(u,null))}for(;g<c.length;g+=1)c[g].d(1);c.length=_.length}d[0]&128&&ve(u,"rainbow",f[7])},d(f){f&&w(e),lt(m,f),lt(c,f)}}}function Bs(t){let e,l=ze(t[40](t[39](t[24],t[7],"all"),t[6].value)),s=[];for(let i=0;i<l.length;i+=1)s[i]=Sl(ul(t,l,i));return{c(){e=M("ul");for(let i=0;i<s.length;i+=1)s[i].c();this.h()},l(i){e=P(i,"UL",{class:!0});var n=L(e);for(let r=0;r<s.length;r+=1)s[r].l(n);n.forEach(w),this.h()},h(){y(e,"class","mt-4 overflow-auto svelte-9h6fz6"),ve(e,"rainbow",t[7])},m(i,n){J(i,e,n);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null)},p(i,n){if(n[0]&16777412|n[1]&776){l=ze(i[40](i[39](i[24],i[7],"all"),i[6].value));let r;for(r=0;r<l.length;r+=1){const o=ul(i,l,r);s[r]?s[r].p(o,n):(s[r]=Sl(o),s[r].c(),s[r].m(e,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=l.length}n[0]&128&&ve(e,"rainbow",i[7])},d(i){i&&w(e),lt(s,i)}}}function bl(t){let e,l,s,i=t[71].passives.length+"",n,r,o,a,h,u=t[71].stat+"",b,m,_;function c(){return t[58](t[71])}return{c(){e=M("li"),l=M("span"),s=U("("),n=U(i),r=U(")"),o=j(),a=M("span"),h=new zt(!1),b=j(),this.h()},l(f){e=P(f,"LI",{class:!0});var d=L(e);l=P(d,"SPAN",{class:!0});var g=L(l);s=B(g,"("),n=B(g,i),r=B(g,")"),g.forEach(w),o=q(d),a=P(d,"SPAN",{class:!0});var k=L(a);h=Lt(k,!1),k.forEach(w),b=q(d),d.forEach(w),this.h()},h(){y(l,"class","font-bold"),ve(l,"text-white",(xe[t[71].id]||0)<3),h.a=null,y(a,"class","text-white"),y(e,"class","cursor-pointer")},m(f,d){J(f,e,d),v(e,l),v(l,s),v(l,n),v(l,r),v(e,o),v(e,a),h.m(u,a),v(e,b),m||(_=C(e,"click",c),m=!0)},p(f,d){t=f,d[0]&16777408&&i!==(i=t[71].passives.length+"")&&x(n,i),d[0]&16777408|d[1]&768&&ve(l,"text-white",(xe[t[71].id]||0)<3),d[0]&16777408&&u!==(u=t[71].stat+"")&&h.p(u)},d(f){f&&w(e),m=!1,_()}}}function wl(t){let e,l,s,i=t[71].passives.length+"",n,r,o,a,h,u=t[71].stat+"",b,m,_;function c(){return t[59](t[71])}return{c(){e=M("li"),l=M("span"),s=U("("),n=U(i),r=U(")"),o=j(),a=M("span"),h=new zt(!1),b=j(),this.h()},l(f){e=P(f,"LI",{class:!0});var d=L(e);l=P(d,"SPAN",{class:!0});var g=L(l);s=B(g,"("),n=B(g,i),r=B(g,")"),g.forEach(w),o=q(d),a=P(d,"SPAN",{class:!0});var k=L(a);h=Lt(k,!1),k.forEach(w),b=q(d),d.forEach(w),this.h()},h(){y(l,"class","font-bold"),ve(l,"text-white",(xe[t[71].id]||0)<3),h.a=null,y(a,"class","text-white"),y(e,"class","cursor-pointer")},m(f,d){J(f,e,d),v(e,l),v(l,s),v(l,n),v(l,r),v(e,o),v(e,a),h.m(u,a),v(e,b),m||(_=C(e,"click",c),m=!0)},p(f,d){t=f,d[0]&16777408&&i!==(i=t[71].passives.length+"")&&x(n,i),d[0]&16777408|d[1]&768&&ve(l,"text-white",(xe[t[71].id]||0)<3),d[0]&16777408&&u!==(u=t[71].stat+"")&&h.p(u)},d(f){f&&w(e),m=!1,_()}}}function Sl(t){let e,l,s,i=t[71].passives.length+"",n,r,o,a,h,u=t[71].stat+"",b,m,_;function c(){return t[57](t[71])}return{c(){e=M("li"),l=M("span"),s=U("("),n=U(i),r=U(")"),o=j(),a=M("span"),h=new zt(!1),b=j(),this.h()},l(f){e=P(f,"LI",{class:!0});var d=L(e);l=P(d,"SPAN",{class:!0});var g=L(l);s=B(g,"("),n=B(g,i),r=B(g,")"),g.forEach(w),o=q(d),a=P(d,"SPAN",{class:!0});var k=L(a);h=Lt(k,!1),k.forEach(w),b=q(d),d.forEach(w),this.h()},h(){y(l,"class","font-bold"),ve(l,"text-white",(xe[t[71].id]||0)<3),h.a=null,y(a,"class","text-white"),y(e,"class","cursor-pointer")},m(f,d){J(f,e,d),v(e,l),v(l,s),v(l,n),v(l,r),v(e,o),v(e,a),h.m(u,a),v(e,b),m||(_=C(e,"click",c),m=!0)},p(f,d){t=f,d[0]&16777408&&i!==(i=t[71].passives.length+"")&&x(n,i),d[0]&16777408|d[1]&768&&ve(l,"text-white",(xe[t[71].id]||0)<3),d[0]&16777408&&u!==(u=t[71].stat+"")&&h.p(u)},d(f){f&&w(e),m=!1,_()}}}function kl(t){let e,l=t[10]("Click on a jewel socket")+"",s;return{c(){e=M("h2"),s=U(l),this.h()},l(i){e=P(i,"H2",{class:!0});var n=L(e);s=B(n,l),n.forEach(w),this.h()},h(){y(e,"class","mt-4")},m(i,n){J(i,e,n),v(e,s)},p(i,n){n[0]&1024&&l!==(l=i[10]("Click on a jewel socket")+"")&&x(s,l)},d(i){i&&w(e)}}}function Il(t){let e,l;return e=new ds({props:{searchResults:t[18],groupResults:t[5],highlight:t[34],jewel:t[19],conqueror:t[20]}}),{c(){Ve(e.$$.fragment)},l(s){Je(e.$$.fragment,s)},m(s,i){je(e,s,i),l=!0},p(s,i){const n={};i[0]&262144&&(n.searchResults=s[18]),i[0]&32&&(n.groupResults=s[5]),i[0]&524288&&(n.jewel=s[19]),i[0]&1048576&&(n.conqueror=s[20]),e.$set(n)},i(s){l||(K(e.$$.fragment,s),l=!0)},o(s){$(e.$$.fragment,s),l=!1},d(s){qe(e,s)}}}function Fs(t){let e,l,s,i,n='<a href="https://github.com/Vilsol/timeless-jewels" target="_blank" rel="noopener">Source (Github)</a>',r;const o=[Ds,Os],a=[];function h(u,b){return u[22]?1:0}return e=h(t),l=a[e]=o[e](t),{c(){l.c(),s=j(),i=M("div"),i.innerHTML=n,this.h()},l(u){l.l(u),s=q(u),i=P(u,"DIV",{class:!0,"data-svelte-h":!0}),tt(i)!=="svelte-1xcazan"&&(i.innerHTML=n),this.h()},h(){y(i,"class","text-orange-500 absolute bottom-0 right-0 m-2")},m(u,b){a[e].m(u,b),J(u,s,b),J(u,i,b),r=!0},p(u,b){let m=e;e=h(u),e===m?a[e].p(u,b):(Ue(),$(a[m],1,1,()=>{a[m]=null}),Be(),l=a[e],l?l.p(u,b):(l=a[e]=o[e](u),l.c()),K(l,1),l.m(s.parentNode,s))},i(u){r||(K(l),r=!0)},o(u){$(l),r=!1},d(u){u&&(w(s),w(i)),a[e].d(u)}}}function Hs(t){var n,r;let e,l,s,i;return e=new Ls({props:{clickNode:t[29],circledNode:t[3],selectedJewel:(n=t[0])==null?void 0:n.value,selectedConqueror:(r=t[1])==null?void 0:r.value,highlighted:t[21],seed:t[2],highlightJewels:!t[3],disabled:[...t[12]],$$slots:{default:[Fs]},$$scope:{ctx:t}}}),{c(){Ve(e.$$.fragment)},l(o){Je(e.$$.fragment,o)},m(o,a){je(e,o,a),l=!0,s||(i=C(Ns,"paste",t[42]),s=!0)},p(o,a){var u,b;const h={};a[0]&8&&(h.circledNode=o[3]),a[0]&1&&(h.selectedJewel=(u=o[0])==null?void 0:u.value),a[0]&2&&(h.selectedConqueror=(b=o[1])==null?void 0:b.value),a[0]&2097152&&(h.highlighted=o[21]),a[0]&4&&(h.seed=o[2]),a[0]&8&&(h.highlightJewels=!o[3]),a[0]&4096&&(h.disabled=[...o[12]]),a[0]&65011711|a[2]&524288&&(h.$$scope={dirty:a,ctx:o}),e.$set(h)},i(o){l||(K(e.$$.fragment,o),l=!0)},o(o){$(e.$$.fragment,o),l=!1},d(o){qe(e,o),s=!1,i()}}}function Ks(t,e,l){let s,i,n,r,o,a,h;yt(t,Tl,R=>l(10,a=R)),yt(t,Fl,R=>l(67,h=R));const u=h.url.searchParams,b=Object.keys(ie.TimelessJewels).map(R=>({value:parseInt(R),label:a(ie.TimelessJewels[R])}));let m=u.has("jewel")?b.find(R=>R.value==u.get("jewel")):void 0,_=u.has("conqueror")?{value:u.get("conqueror"),label:u.get("conqueror")}:void 0,c=u.has("seed")?parseInt(u.get("seed")):0,f=u.has("location")?parseInt(u.get("location")):void 0,d={};u.has("stat")&&u.getAll("stat").forEach(R=>{const se=parseInt(R);l(4,d[se]={weight:1,min:0,id:se},d)});let g=u.has("mode")?u.get("mode"):"";const k=()=>{const R=new URL(window.location.origin+window.location.pathname);m&&R.searchParams.append("jewel",m.value.toString()),_&&R.searchParams.append("conqueror",_.value),c&&R.searchParams.append("seed",c.toString()),f&&R.searchParams.append("location",f.toString()),g&&R.searchParams.append("mode",g),Object.keys(d).forEach(se=>{R.searchParams.append("stat",se.toString())}),Ul(R.toString())},D=R=>{l(11,g=R),k()};let A=new Set;const T=R=>{R.isJewelSocket?(l(3,f=R.skill),k()):R.isMastery||(A.has(R.skill)?A.delete(R.skill):A.add(R.skill),l(12,A))},E=JSON.parse(ie.PossibleStats);let I;const V=R=>{l(4,d[R.detail.value]={weight:1,min:0,id:R.detail.value},d),l(4,d),I.handleClear(),k()},z=R=>{delete d[R],l(4,d),k()},Z=()=>{l(4,d={}),k()};let Y=!1,W=0,F=!1,ee=0,ue,fe=1,le="";const ae=()=>{if(!f)return;l(19,fe=m.value),l(20,le=_.value),l(16,F=!0),l(18,ue=void 0);const R={jewel:m.value,conqueror:_.value,nodes:i.filter(se=>!A.has(se.skill)).map(se=>ie.TreeToPassive[se.skill]).filter(se=>!!se).map(se=>se.Index),stats:Object.keys(d).map(se=>d[se]),minTotalWeight:W};Xl.search(R,Gl(se=>l(17,ee=se))).then(se=>{l(18,ue=se),l(16,F=!1),l(14,Y=!0)})};let Ee=[];const be=(R,se)=>{l(2,c=R),l(21,Ee=se),k()},we=()=>{A.clear(),l(12,A)},ne=()=>{i.forEach(R=>{R.isNotable&&A.delete(R.skill)}),l(12,A)},Me=()=>{i.forEach(R=>{R.isNotable||A.delete(R.skill)}),l(12,A)},O=()=>{i.filter(R=>!R.isJewelSocket&&!R.isMastery).forEach(R=>A.add(R.skill)),l(12,A)};let p=localStorage.getItem("groupResults")===null?!0:localStorage.getItem("groupResults")==="true";const N={physical:"#c79d93",cast:"#b3f8fe",fire:"#ff9a77",cold:"#93d8ff",lightning:"#f8cb76",attack:"#da814d",life:"#c96e6e",chaos:"#d8a7d3",unique:"#af6025",critical:"#b2a7d6"},X=R=>(Object.keys(N).forEach(se=>{const pe=N[se];R=R.replace(new RegExp(`(${se}(?:$|\\s))|((?:^|\\s)${se})`,"gi"),`<span style='color: ${pe}; font-weight: bold'>$1$2</span>`)}),R),H=(R,se,pe)=>{const Se={};return R.forEach(ke=>{Ke.nodes[ke.node].isKeystone||pe!=="all"&&(pe==="notables"&&!Ke.nodes[ke.node].isNotable||pe==="passives"&&Ke.nodes[ke.node].isNotable)||(ke.result.AlternatePassiveSkill&&ke.result.AlternatePassiveSkill.StatsKeys&&ke.result.AlternatePassiveSkill.StatsKeys.forEach(Ae=>{Se[Ae]=[...Se[Ae]||[],ke.node]}),ke.result.AlternatePassiveAdditionInformations&&ke.result.AlternatePassiveAdditionInformations.forEach(Ae=>{Ae.AlternatePassiveAddition.StatsKeys&&Ae.AlternatePassiveAddition.StatsKeys.forEach(Xe=>{Se[Xe]=[...Se[Xe]||[],ke.node]})}))}),Object.keys(Se).map(ke=>{const Ae=ft(parseInt(ke));return{stat:se?X(Ae):Ae,rawStat:Ae,id:ke,passives:Se[ke]}})},de=(R,se)=>{switch(se){case"alphabet":return R.sort((pe,Se)=>pe.rawStat.replace(/[#+%]/gi,"").trim().toLowerCase().localeCompare(Se.rawStat.replace(/[#+%]/gi,"").trim().toLowerCase()));case"count":return R.sort((pe,Se)=>Se.passives.length-pe.passives.length);case"rarity":return R.sort((pe,Se)=>E[m.value][pe.id]-E[m.value][Se.id]);case"value":return R.sort((pe,Se)=>{const ke=xe[pe.id]||0,Ae=xe[Se.id]||0;return ke!=Ae?Ae-ke:E[m.value][pe.id]-E[m.value][Se.id]})}return R},re=[{label:a("Count"),value:"count"},{label:a("Alphabetical"),value:"alphabet"},{label:a("Rarity"),value:"rarity"},{label:a("Value"),value:"value"}];let ge=re.find(R=>R.value===(localStorage.getItem("sortOrder")||"count")),oe=localStorage.getItem("colored")===null?!0:localStorage.getItem("colored")==="true",Pe=localStorage.getItem("split")===null?!0:localStorage.getItem("split")==="true";const me=R=>{if(R.type!=="paste")return;const pe=(R.clipboardData||window.clipboardData).getData("text").split(`
`);if(pe.length<14)return;const Se=b.find(Xe=>Xe.label===pe[2]);if(!Se)return;let ke,Ae;for(let Xe=10;Xe<pe.length;Xe++)if(Ae=Object.keys(ie.TimelessJewelConquerors[Se.value]).find(St=>pe[Xe].indexOf(St)>=0),Ae){const St=/(\d+)/.exec(pe[Xe]);if(St.length===0)continue;ke=parseInt(St[1]);break}!Ae||!ke||(l(14,Y=!1),l(11,g="seed"),l(2,c=ke),l(0,m=Se),l(1,_={label:Ae,value:Ae}),k())};let G=!1;const te=()=>l(22,G=!0),he=()=>Al(fe,le,ue.raw),ce=()=>l(5,p=!p),Le=()=>l(14,Y=!Y);function Oe(R){m=R,l(0,m)}function Ye(R){_=R,l(1,_)}const _e=()=>D("seed"),ye=()=>D("stats");function Fe(){c=Qe(this.value),l(2,c)}function De(R){ge=R,l(6,ge)}const Ce=()=>l(7,oe=!oe),Ne=()=>l(8,Pe=!Pe),at=R=>be(c,R.passives),ht=R=>be(c,R.passives),ct=R=>be(c,R.passives);function ot(R){st[R?"unshift":"push"](()=>{I=R,l(13,I)})}const ut=R=>z(d[R].id);function Rt(R){d[R].min=Qe(this.value),l(4,d)}function S(R){d[R].weight=Qe(this.value),l(4,d)}function dt(){W=Qe(this.value),l(15,W)}const mt=()=>ae(),_t=()=>l(22,G=!1);return t.$$.update=()=>{t.$$.dirty[0]&1025&&l(25,s=m?Object.keys(ie.TimelessJewelConquerors[m.value]).map(R=>({value:R,label:a(R)})):[]),t.$$.dirty[0]&8&&l(9,i=f?Yl(Ke.nodes[f]).filter(R=>!R.isJewelSocket&&!R.isMastery):[]),t.$$.dirty[0]&519&&l(24,n=!c||!m||!_||Object.keys(ie.TimelessJewelConquerors[m.value]).indexOf(_.value)<0?[]:i.filter(R=>!!ie.TreeToPassive[R.skill]).map(R=>({node:R.skill,result:Rl.Calculate(ie.TreeToPassive[R.skill].Index,c,m.value,_.value)}))),t.$$.dirty[0]&1&&l(44,r=m?Object.keys(E[m.value]):[]),t.$$.dirty[0]&16|t.$$.dirty[1]&8192&&l(23,o=r.map(R=>{const se=parseInt(R);return{label:ft(se),value:se}}).filter(R=>!(R.value in d))),t.$$.dirty[0]&32&&localStorage.setItem("groupResults",p?"true":"false"),t.$$.dirty[0]&64&&localStorage.setItem("sortOrder",ge.value),t.$$.dirty[0]&128&&localStorage.setItem("colored",oe?"true":"false"),t.$$.dirty[0]&256&&localStorage.setItem("split",Pe?"true":"false")},[m,_,c,f,d,p,ge,oe,Pe,i,a,g,A,I,Y,W,F,ee,ue,fe,le,Ee,G,o,n,s,b,k,D,T,V,z,Z,ae,be,we,ne,Me,O,H,de,re,me,N,r,te,he,ce,Le,Oe,Ye,_e,ye,Fe,De,Ce,Ne,at,ht,ct,ot,ut,Rt,S,dt,mt,_t]}class ei extends nt{constructor(e){super(),rt(this,e,Ks,Hs,it,{colorKeys:43},null,[-1,-1,-1])}get colorKeys(){return this.$$.ctx[43]}}export{ei as component};

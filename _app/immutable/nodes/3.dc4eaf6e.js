var Dl=Object.defineProperty;var Vl=(t,e,l)=>e in t?Dl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l;var Te=(t,e,l)=>(Vl(t,typeof e!="symbol"?e+"":e,l),l);import{s as it,f as M,l as F,a as q,g as P,h as L,m as H,d as w,c as U,A as xe,j as I,i as j,y as v,D as C,n as te,z as $e,G as lt,F as We,r as yt,u as pt,v as vt,w as bt,x as wt,H as Tl,o as Rl,I as zt,e as ke,p as st,k as He,J as kt,K as Re,L as Jl,M as jl,N as $,E as Qe,O as ve,B as Lt,C as Ze,P as Nt,Q as Ot}from"../chunks/scheduler.1588ed99.js";import{S as nt,i as rt,g as Ue,c as Be,a as X,t as x,b as Ve,d as Je,m as je,e as qe,f as Dt}from"../chunks/index.afb56b95.js";import{e as ze,u as ql,o as Ul,g as Bl,L as Fl,S as Rt}from"../chunks/locale.f76e2bc1.js";import{a as Al,c as Cl,d as re}from"../chunks/index.3f5f20b6.js";import{p as Hl}from"../chunks/stores.0142bb45.js";import{a as Ke,o as Tt,t as ft,b as Kl,d as Mt,c as Vt,e as tt,f as Jt,g as It,h as jt,i as qt,j as Ut,k as Yl,m as Bt,n as Gl,s as Xl,p as Wl}from"../chunks/worker.e56897ad.js";import{r as Ql,d as Zl}from"../chunks/paths.5615ab7e.js";const Ml=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Ft(t,e,l){const s=t.slice();return s[8]=e[l],s}function Ht(t,e,l){const s=t.slice();return s[11]=e[l],s}function Kt(t){let e,l=ft(t[11],t[8].stats[t[11]])+"",s;return{c(){e=M("li"),s=F(l)},l(i){e=P(i,"LI",{});var n=L(e);s=H(n,l),n.forEach(w)},m(i,n){j(i,e,n),v(e,s)},p(i,n){n&2&&l!==(l=ft(i[11],i[8].stats[i[11]])+"")&&te(s,l)},d(i){i&&w(e)}}}function Yt(t){let e,l,s=Ke.nodes[t[8].passive].name+"",i,n,r=t[8].passive+"",o,a,c,h,p,m=ze(Object.keys(t[8].stats)),_=[];for(let f=0;f<m.length;f+=1)_[f]=Kt(Ht(t,m,f));return{c(){e=M("div"),l=M("span"),i=F(s),n=F(" ("),o=F(r),a=F(")"),c=q(),h=M("ul");for(let f=0;f<_.length;f+=1)_[f].c();p=q(),this.h()},l(f){e=P(f,"DIV",{class:!0});var u=L(e);l=P(u,"SPAN",{});var d=L(l);i=H(d,s),n=H(d," ("),o=H(d,r),a=H(d,")"),d.forEach(w),c=U(u),h=P(u,"UL",{class:!0});var g=L(h);for(let S=0;S<_.length;S+=1)_[S].l(g);g.forEach(w),p=U(u),u.forEach(w),this.h()},h(){I(h,"class","list-disc pl-6 font-bold"),I(e,"class","mt-2")},m(f,u){j(f,e,u),v(e,l),v(l,i),v(l,n),v(l,o),v(l,a),v(e,c),v(e,h);for(let d=0;d<_.length;d+=1)_[d]&&_[d].m(h,null);v(e,p)},p(f,u){if(u&2&&s!==(s=Ke.nodes[f[8].passive].name+"")&&te(i,s),u&2&&r!==(r=f[8].passive+"")&&te(o,r),u&2){m=ze(Object.keys(f[8].stats));let d;for(d=0;d<m.length;d+=1){const g=Ht(f,m,d);_[d]?_[d].p(g,u):(_[d]=Kt(g),_[d].c(),_[d].m(h,null))}for(;d<_.length;d+=1)_[d].d(1);_.length=m.length}},d(f){f&&w(e),lt(_,f)}}}function $l(t){let e,l,s,i,n=t[1].seed+"",r,o,a=t[1].weight+"",c,h,p,m,_,f=t[4]("Trade")+"",u,d,g,S="Global",z,E,y="CN",A,T,B,V=ze(t[1].skills),Y=[];for(let J=0;J<V.length;J+=1)Y[J]=Yt(Ft(t,V,J));return{c(){e=M("div"),l=M("div"),s=M("div"),i=F("Seed "),r=F(n),o=F(" (weight "),c=F(a),h=F(")"),p=q(),m=M("div"),_=M("span"),u=F(f),d=q(),g=M("button"),g.textContent=S,z=q(),E=M("button"),E.textContent=y,A=q();for(let J=0;J<Y.length;J+=1)Y[J].c();this.h()},l(J){e=P(J,"DIV",{class:!0});var K=L(e);l=P(K,"DIV",{class:!0});var O=L(l);s=P(O,"DIV",{class:!0});var Q=L(s);i=H(Q,"Seed "),r=H(Q,n),o=H(Q," (weight "),c=H(Q,a),h=H(Q,")"),Q.forEach(w),p=U(O),m=P(O,"DIV",{class:!0});var se=L(m);_=P(se,"SPAN",{class:!0});var ne=L(_);u=H(ne,f),ne.forEach(w),d=U(se),g=P(se,"BUTTON",{class:!0,"data-svelte-h":!0}),xe(g)!=="svelte-1b45ur0"&&(g.textContent=S),z=U(se),E=P(se,"BUTTON",{class:!0,"data-svelte-h":!0}),xe(E)!=="svelte-10uwdnd"&&(E.textContent=y),se.forEach(w),O.forEach(w),A=U(K);for(let ee=0;ee<Y.length;ee+=1)Y[ee].l(K);K.forEach(w),this.h()},h(){I(s,"class","font-bold text-orange-500"),I(_,"class","text-gray-500 mr-2"),I(g,"class","px-3 text-sm bg-blue-500/40 hover:bg-blue-500/70 rounded cursor-pointer"),I(E,"class","px-3 text-sm bg-red-500/40 hover:bg-red-500/70 rounded cursor-pointer"),I(m,"class","flex gap-1 items-center"),I(l,"class","flex flex-row justify-between"),I(e,"class","my-2 border-gray-800 border p-4 flex flex-col")},m(J,K){j(J,e,K),v(e,l),v(l,s),v(s,i),v(s,r),v(s,o),v(s,c),v(s,h),v(l,p),v(l,m),v(m,_),v(_,u),v(m,d),v(m,g),v(m,z),v(m,E),v(e,A);for(let O=0;O<Y.length;O+=1)Y[O]&&Y[O].m(e,null);T||(B=[C(g,"click",t[5]),C(E,"click",t[6]),C(e,"click",t[7])],T=!0)},p(J,[K]){if(K&2&&n!==(n=J[1].seed+"")&&te(r,n),K&2&&a!==(a=J[1].weight+"")&&te(c,a),K&16&&f!==(f=J[4]("Trade")+"")&&te(u,f),K&2){V=ze(J[1].skills);let O;for(O=0;O<V.length;O+=1){const Q=Ft(J,V,O);Y[O]?Y[O].p(Q,K):(Y[O]=Yt(Q),Y[O].c(),Y[O].m(e,null))}for(;O<Y.length;O+=1)Y[O].d(1);Y.length=V.length}},i:$e,o:$e,d(J){J&&w(e),lt(Y,J),T=!1,We(B)}}}function xl(t,e,l){let s;yt(t,Al,p=>l(4,s=p));let{highlight:i}=e,{set:n}=e,{jewel:r}=e,{conqueror:o}=e;const a=()=>Tt(r,o,[n]),c=()=>Tt(r,o,[n],"tencent"),h=()=>i(n.seed,n.skills.map(p=>p.passive));return t.$$set=p=>{"highlight"in p&&l(0,i=p.highlight),"set"in p&&l(1,n=p.set),"jewel"in p&&l(2,r=p.jewel),"conqueror"in p&&l(3,o=p.conqueror)},[i,n,r,o,s,a,c,h]}class Pl extends nt{constructor(e){super(),rt(this,e,xl,$l,it,{highlight:0,set:1,jewel:2,conqueror:3})}}const Et={AUTO:"auto",START:"start",CENTER:"center",END:"end"},Xe={HORIZONTAL:"horizontal",VERTICAL:"vertical"},gt={OBSERVED:0,REQUESTED:1},es={[Xe.VERTICAL]:"top",[Xe.HORIZONTAL]:"left"},Gt={[Xe.VERTICAL]:"scrollTop",[Xe.HORIZONTAL]:"scrollLeft"};class ts{constructor({itemSize:e,itemCount:l,estimatedItemSize:s}){this.itemSize=e,this.itemCount=l,this.estimatedItemSize=s,this.itemSizeAndPositionData={},this.lastMeasuredIndex=-1,this.checkForMismatchItemSizeAndItemCount(),this.justInTime||this.computeTotalSizeAndPositionData()}get justInTime(){return typeof this.itemSize=="function"}updateConfig({itemSize:e,itemCount:l,estimatedItemSize:s}){l!=null&&(this.itemCount=l),s!=null&&(this.estimatedItemSize=s),e!=null&&(this.itemSize=e),this.checkForMismatchItemSizeAndItemCount(),this.justInTime&&this.totalSize!=null?this.totalSize=void 0:this.computeTotalSizeAndPositionData()}checkForMismatchItemSizeAndItemCount(){if(Array.isArray(this.itemSize)&&this.itemSize.length<this.itemCount)throw Error("When itemSize is an array, itemSize.length can't be smaller than itemCount")}getSize(e){const{itemSize:l}=this;return typeof l=="function"?l(e):Array.isArray(l)?l[e]:l}computeTotalSizeAndPositionData(){let e=0;for(let l=0;l<this.itemCount;l++){const s=this.getSize(l),i=e;e+=s,this.itemSizeAndPositionData[l]={offset:i,size:s}}this.totalSize=e}getLastMeasuredIndex(){return this.lastMeasuredIndex}getSizeAndPositionForIndex(e){if(e<0||e>=this.itemCount)throw Error(`Requested index ${e} is outside of range 0..${this.itemCount}`);return this.justInTime?this.getJustInTimeSizeAndPositionForIndex(e):this.itemSizeAndPositionData[e]}getJustInTimeSizeAndPositionForIndex(e){if(e>this.lastMeasuredIndex){const l=this.getSizeAndPositionOfLastMeasuredItem();let s=l.offset+l.size;for(let i=this.lastMeasuredIndex+1;i<=e;i++){const n=this.getSize(i);if(n==null||isNaN(n))throw Error(`Invalid size returned for index ${i} of value ${n}`);this.itemSizeAndPositionData[i]={offset:s,size:n},s+=n}this.lastMeasuredIndex=e}return this.itemSizeAndPositionData[e]}getSizeAndPositionOfLastMeasuredItem(){return this.lastMeasuredIndex>=0?this.itemSizeAndPositionData[this.lastMeasuredIndex]:{offset:0,size:0}}getTotalSize(){if(this.totalSize)return this.totalSize;const e=this.getSizeAndPositionOfLastMeasuredItem();return e.offset+e.size+(this.itemCount-this.lastMeasuredIndex-1)*this.estimatedItemSize}getUpdatedOffsetForIndex({align:e=Et.START,containerSize:l,currentOffset:s,targetIndex:i}){if(l<=0)return 0;const n=this.getSizeAndPositionForIndex(i),r=n.offset,o=r-l+n.size;let a;switch(e){case Et.END:a=o;break;case Et.CENTER:a=r-(l-n.size)/2;break;case Et.START:a=r;break;default:a=Math.max(o,Math.min(r,s))}const c=this.getTotalSize();return Math.max(0,Math.min(c-l,a))}getVisibleRange({containerSize:e=0,offset:l,overscanCount:s}){if(this.getTotalSize()===0)return{};const n=l+e;let r=this.findNearestItem(l);if(r===void 0)throw Error(`Invalid offset ${l} specified`);const o=this.getSizeAndPositionForIndex(r);l=o.offset+o.size;let a=r;for(;l<n&&a<this.itemCount-1;)a++,l+=this.getSizeAndPositionForIndex(a).size;return s&&(r=Math.max(0,r-s),a=Math.min(a+s,this.itemCount-1)),{start:r,stop:a}}resetItem(e){this.lastMeasuredIndex=Math.min(this.lastMeasuredIndex,e-1)}findNearestItem(e){if(isNaN(e))throw Error(`Invalid offset ${e} specified`);e=Math.max(0,e);const l=this.getSizeAndPositionOfLastMeasuredItem(),s=Math.max(0,this.lastMeasuredIndex);return l.offset>=e?this.binarySearch({high:s,low:0,offset:e}):this.exponentialSearch({index:s,offset:e})}binarySearch({low:e,high:l,offset:s}){let i=0,n=0;for(;e<=l;){if(i=e+Math.floor((l-e)/2),n=this.getSizeAndPositionForIndex(i).offset,n===s)return i;n<s?e=i+1:n>s&&(l=i-1)}return e>0?e-1:0}exponentialSearch({index:e,offset:l}){let s=1;for(;e<this.itemCount&&this.getSizeAndPositionForIndex(e).offset<l;)e+=s,s*=2;return this.binarySearch({high:Math.min(e,this.itemCount-1),low:Math.floor(e/2),offset:l})}}const ls=t=>({}),Xt=t=>({});function Wt(t,e,l){const s=t.slice();return s[37]=e[l],s}const ss=t=>({style:t[0]&4,index:t[0]&4}),Qt=t=>({style:t[37].style,index:t[37].index}),is=t=>({}),Zt=t=>({});function $t(t,e){let l,s;const i=e[21].item,n=pt(i,e,e[20],Qt);return{key:t,first:null,c(){l=ke(),n&&n.c(),this.h()},l(r){l=ke(),n&&n.l(r),this.h()},h(){this.first=l},m(r,o){j(r,l,o),n&&n.m(r,o),s=!0},p(r,o){e=r,n&&n.p&&(!s||o[0]&1048580)&&vt(n,i,e,e[20],s?wt(i,e[20],o,ss):bt(e[20]),Qt)},i(r){s||(X(n,r),s=!0)},o(r){x(n,r),s=!1},d(r){r&&w(l),n&&n.d(r)}}}function ns(t){let e,l,s,i=[],n=new Map,r,o;const a=t[21].header,c=pt(a,t,t[20],Zt);let h=ze(t[2]);const p=f=>f[0]?f[0](f[37].index):f[37].index;for(let f=0;f<h.length;f+=1){let u=Wt(t,h,f),d=p(u);n.set(d,i[f]=$t(d,u))}const m=t[21].footer,_=pt(m,t,t[20],Xt);return{c(){e=M("div"),c&&c.c(),l=q(),s=M("div");for(let f=0;f<i.length;f+=1)i[f].c();r=q(),_&&_.c(),this.h()},l(f){e=P(f,"DIV",{class:!0,style:!0});var u=L(e);c&&c.l(u),l=U(u),s=P(u,"DIV",{class:!0,style:!0});var d=L(s);for(let g=0;g<i.length;g+=1)i[g].l(d);d.forEach(w),r=U(u),_&&_.l(u),u.forEach(w),this.h()},h(){I(s,"class","virtual-list-inner svelte-1d4hv8l"),I(s,"style",t[4]),I(e,"class","virtual-list-wrapper svelte-1d4hv8l"),I(e,"style",t[3])},m(f,u){j(f,e,u),c&&c.m(e,null),v(e,l),v(e,s);for(let d=0;d<i.length;d+=1)i[d]&&i[d].m(s,null);v(e,r),_&&_.m(e,null),t[22](e),o=!0},p(f,u){c&&c.p&&(!o||u[0]&1048576)&&vt(c,a,f,f[20],o?wt(a,f[20],u,is):bt(f[20]),Zt),u[0]&1048581&&(h=ze(f[2]),Ue(),i=ql(i,u,p,1,f,h,n,s,Ul,$t,null,Wt),Be()),(!o||u[0]&16)&&I(s,"style",f[4]),_&&_.p&&(!o||u[0]&1048576)&&vt(_,m,f,f[20],o?wt(m,f[20],u,ls):bt(f[20]),Xt),(!o||u[0]&8)&&I(e,"style",f[3])},i(f){if(!o){X(c,f);for(let u=0;u<h.length;u+=1)X(i[u]);X(_,f),o=!0}},o(f){x(c,f);for(let u=0;u<i.length;u+=1)x(i[u]);x(_,f),o=!1},d(f){f&&w(e),c&&c.d(f);for(let u=0;u<i.length;u+=1)i[u].d();_&&_.d(f),t[22](null)}}}const rs=(()=>{let t=!1;try{const e=Object.defineProperty({},"passive",{get(){return t={passive:!0},!0}});window.addEventListener("testpassive",e,e),window.remove("testpassive",e,e)}catch{}return t})();function as(t,e,l){let{$$slots:s={},$$scope:i}=e,{height:n}=e,{width:r="100%"}=e,{itemCount:o}=e,{itemSize:a}=e,{estimatedItemSize:c=null}=e,{stickyIndices:h=null}=e,{getKey:p=null}=e,{scrollDirection:m=Xe.VERTICAL}=e,{scrollOffset:_=null}=e,{scrollToIndex:f=null}=e,{scrollToAlignment:u=null}=e,{scrollToBehaviour:d="instant"}=e,{overscanCount:g=3}=e;const S=Tl(),z=new ts({itemCount:o,itemSize:a,estimatedItemSize:we()});let E=!1,y,A=[],T={offset:_||f!=null&&A.length&&ue(f)||0,scrollChangeReason:gt.REQUESTED},B=T,V={scrollToIndex:f,scrollToAlignment:u,scrollOffset:_,itemCount:o,itemSize:a,estimatedItemSize:c},Y={},J="",K="";se(),Rl(()=>{l(18,E=!0),y.addEventListener("scroll",Ie,rs),_!=null?ne(_):f!=null&&ne(ue(f))}),zt(()=>{E&&y.removeEventListener("scroll",Ie)});function O(){if(!E)return;const D=V.scrollToIndex!==f||V.scrollToAlignment!==u,b=V.itemCount!==o||V.itemSize!==a||V.estimatedItemSize!==c;b&&(z.updateConfig({itemSize:a,itemCount:o,estimatedItemSize:we()}),ee()),V.scrollOffset!==_?l(19,T={offset:_||0,scrollChangeReason:gt.REQUESTED}):typeof f=="number"&&(D||b)&&l(19,T={offset:ue(f,u,o),scrollChangeReason:gt.REQUESTED}),V={scrollToIndex:f,scrollToAlignment:u,scrollOffset:_,itemCount:o,itemSize:a,estimatedItemSize:c}}function Q(){if(!E)return;const{offset:D,scrollChangeReason:b}=T;(B.offset!==D||B.scrollChangeReason!==b)&&se(),B.offset!==D&&b===gt.REQUESTED&&ne(D),B=T}function se(){const{offset:D}=T,{start:b,stop:N}=z.getVisibleRange({containerSize:m===Xe.VERTICAL?n:r,offset:D,overscanCount:g});let W=[];const G=z.getTotalSize();m===Xe.VERTICAL?(l(3,J=`height:${n}px;width:${r};`),l(4,K=`flex-direction:column;height:${G}px;`)):(l(3,J=`height:${n};width:${r}px`),l(4,K=`min-height:100%;width:${G}px;`));const de=h!=null&&h.length!==0;if(de)for(let oe=0;oe<h.length;oe++){const ge=h[oe];W.push({index:ge,style:ae(ge,!0)})}if(b!==void 0&&N!==void 0){for(let oe=b;oe<=N;oe++)de&&h.includes(oe)||W.push({index:oe,style:ae(oe,!1)});S("itemsUpdated",{start:b,end:N})}l(2,A=W)}function ne(D){"scroll"in y?y.scroll({[es[m]]:D,behavior:d}):l(1,y[Gt[m]]=D,y)}function ee(D=0){Y={},z.resetItem(D),se()}function ue(D,b=u,N=o){return(D<0||D>=N)&&(D=0),z.getUpdatedOffsetForIndex({align:b,containerSize:m===Xe.VERTICAL?n:r,currentOffset:T.offset||0,targetIndex:D})}function Ie(D){const b=be();b<0||T.offset===b||D.target!==y||(l(19,T={offset:b,scrollChangeReason:gt.OBSERVED}),S("afterScroll",{offset:b,event:D}))}function be(){return y[Gt[m]]}function we(){return c||typeof a=="number"&&a||50}function ae(D,b){if(Y[D])return Y[D];const{size:N,offset:W}=z.getSizeAndPositionForIndex(D);let G;return m===Xe.VERTICAL?(G=`left:0;width:100%;height:${N}px;`,b?G+=`position:sticky;flex-grow:0;z-index:1;top:0;margin-top:${W}px;margin-bottom:${-(W+N)}px;`:G+=`position:absolute;top:${W}px;`):(G=`top:0;width:${N}px;`,b?G+=`position:sticky;z-index:1;left:0;margin-left:${W}px;margin-right:${-(W+N)}px;`:G+=`position:absolute;height:100%;left:${W}px;`),Y[D]=G}function Me(D){st[D?"unshift":"push"](()=>{y=D,l(1,y)})}return t.$$set=D=>{"height"in D&&l(5,n=D.height),"width"in D&&l(6,r=D.width),"itemCount"in D&&l(7,o=D.itemCount),"itemSize"in D&&l(8,a=D.itemSize),"estimatedItemSize"in D&&l(9,c=D.estimatedItemSize),"stickyIndices"in D&&l(10,h=D.stickyIndices),"getKey"in D&&l(0,p=D.getKey),"scrollDirection"in D&&l(11,m=D.scrollDirection),"scrollOffset"in D&&l(12,_=D.scrollOffset),"scrollToIndex"in D&&l(13,f=D.scrollToIndex),"scrollToAlignment"in D&&l(14,u=D.scrollToAlignment),"scrollToBehaviour"in D&&l(15,d=D.scrollToBehaviour),"overscanCount"in D&&l(16,g=D.overscanCount),"$$scope"in D&&l(20,i=D.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&29568&&O(),t.$$.dirty[0]&524288&&Q(),t.$$.dirty[0]&263264&&E&&ee(0)},[p,y,A,J,K,n,r,o,a,c,h,m,_,f,u,d,g,ee,E,T,i,s,Me]}class zl extends nt{constructor(e){super(),rt(this,e,as,ns,it,{height:5,width:6,itemCount:7,itemSize:8,estimatedItemSize:9,stickyIndices:10,getKey:0,scrollDirection:11,scrollOffset:12,scrollToIndex:13,scrollToAlignment:14,scrollToBehaviour:15,overscanCount:16,recomputeSizes:17},null,[-1,-1])}get recomputeSizes(){return this.$$.ctx[17]}}function xt(t,e,l){const s=t.slice();return s[9]=e[l],s}function os(t){let e,l,s;return l=new zl({props:{height:"auto",overscanCount:15,itemCount:t[0].raw.length,itemSize:t[0].raw.map(t[6]),$$slots:{item:[fs,({style:i,index:n})=>({12:i,13:n}),({style:i,index:n})=>(i?4096:0)|(n?8192:0)]},$$scope:{ctx:t}}}),{c(){e=M("div"),Ve(l.$$.fragment),this.h()},l(i){e=P(i,"DIV",{class:!0});var n=L(e);Je(l.$$.fragment,n),n.forEach(w),this.h()},h(){I(e,"class","mt-4 flex flex-col overflow-auto")},m(i,n){j(i,e,n),je(l,e,null),s=!0},p(i,n){const r={};n&1&&(r.itemCount=i[0].raw.length),n&1&&(r.itemSize=i[0].raw.map(i[6])),n&28699&&(r.$$scope={dirty:n,ctx:i}),l.$set(r)},i(i){s||(X(l.$$.fragment,i),s=!0)},o(i){x(l.$$.fragment,i),s=!1},d(i){i&&w(e),qe(l)}}}function us(t){let e,l,s=ze(Object.keys(t[0].grouped).map(t[7]).sort(ll).reverse()),i=[];for(let r=0;r<s.length;r+=1)i[r]=tl(xt(t,s,r));const n=r=>x(i[r],1,1,()=>{i[r]=null});return{c(){e=M("div");for(let r=0;r<i.length;r+=1)i[r].c();this.h()},l(r){e=P(r,"DIV",{class:!0});var o=L(e);for(let a=0;a<i.length;a+=1)i[a].l(o);o.forEach(w),this.h()},h(){I(e,"class","flex flex-col overflow-auto")},m(r,o){j(r,e,o);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(e,null);l=!0},p(r,o){if(o&12411){s=ze(Object.keys(r[0].grouped).map(r[7]).sort(ll).reverse());let a;for(a=0;a<s.length;a+=1){const c=xt(r,s,a);i[a]?(i[a].p(c,o),X(i[a],1)):(i[a]=tl(c),i[a].c(),X(i[a],1),i[a].m(e,null))}for(Ue(),a=s.length;a<i.length;a+=1)n(a);Be()}},i(r){if(!l){for(let o=0;o<s.length;o+=1)X(i[o]);l=!0}},o(r){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)x(i[o]);l=!1},d(r){r&&w(e),lt(i,r)}}}function fs(t){let e,l,s,i;return l=new Pl({props:{set:t[0].raw[t[13]],highlight:t[1],jewel:t[3],conqueror:t[4]}}),{c(){e=M("div"),Ve(l.$$.fragment),this.h()},l(n){e=P(n,"DIV",{slot:!0,style:!0});var r=L(e);Je(l.$$.fragment,r),r.forEach(w),this.h()},h(){I(e,"slot","item"),I(e,"style",s=t[12])},m(n,r){j(n,e,r),je(l,e,null),i=!0},p(n,r){const o={};r&8193&&(o.set=n[0].raw[n[13]]),r&2&&(o.highlight=n[1]),r&8&&(o.jewel=n[3]),r&16&&(o.conqueror=n[4]),l.$set(o),(!i||r&4096&&s!==(s=n[12]))&&I(e,"style",s)},i(n){i||(X(l.$$.fragment,n),i=!0)},o(n){x(l.$$.fragment,n),i=!1},d(n){n&&w(e),qe(l)}}}function el(t){let e,l,s,i;return l=new zl({props:{height:"auto",overscanCount:10,itemCount:t[0].grouped[t[9]].length,itemSize:t[0].grouped[t[9]].map(t[6]),$$slots:{item:[hs,({style:n,index:r})=>({12:n,13:r}),({style:n,index:r})=>(n?4096:0)|(r?8192:0)]},$$scope:{ctx:t}}}),{c(){e=M("div"),Ve(l.$$.fragment),s=q(),this.h()},l(n){e=P(n,"DIV",{class:!0});var r=L(e);Je(l.$$.fragment,r),s=U(r),r.forEach(w),this.h()},h(){I(e,"class","flex flex-col overflow-auto min-h-[200px] mb-2")},m(n,r){j(n,e,r),je(l,e,null),v(e,s),i=!0},p(n,r){const o={};r&1&&(o.itemCount=n[0].grouped[n[9]].length),r&1&&(o.itemSize=n[0].grouped[n[9]].map(n[6])),r&28699&&(o.$$scope={dirty:r,ctx:n}),l.$set(o)},i(n){i||(X(l.$$.fragment,n),i=!0)},o(n){x(l.$$.fragment,n),i=!1},d(n){n&&w(e),qe(l)}}}function hs(t){let e,l,s,i;return l=new Pl({props:{set:t[0].grouped[t[9]][t[13]],highlight:t[1],jewel:t[3],conqueror:t[4]}}),{c(){e=M("div"),Ve(l.$$.fragment),this.h()},l(n){e=P(n,"DIV",{slot:!0,style:!0});var r=L(e);Je(l.$$.fragment,r),r.forEach(w),this.h()},h(){I(e,"slot","item"),I(e,"style",s=t[12])},m(n,r){j(n,e,r),je(l,e,null),i=!0},p(n,r){const o={};r&8193&&(o.set=n[0].grouped[n[9]][n[13]]),r&2&&(o.highlight=n[1]),r&8&&(o.jewel=n[3]),r&16&&(o.conqueror=n[4]),l.$set(o),(!i||r&4096&&s!==(s=n[12]))&&I(e,"style",s)},i(n){i||(X(l.$$.fragment,n),i=!0)},o(n){x(l.$$.fragment,n),i=!1},d(n){n&&w(e),qe(l)}}}function tl(t){let e,l,s=t[9]+"",i,n,r=t[9]>1?"es":"",o,a,c=t[0].grouped[t[9]].length+"",h,p,m,_,f=t[5]===t[9]?"^":"V",u,d,g,S,z,E;function y(){return t[8](t[9])}let A=t[5]===t[9]&&el(t);return{c(){e=M("button"),l=M("span"),i=F(s),n=F(" Match"),o=F(r),a=F(" ["),h=F(c),p=F("]"),m=q(),_=M("span"),u=F(f),d=q(),A&&A.c(),g=ke(),this.h()},l(T){e=P(T,"BUTTON",{class:!0});var B=L(e);l=P(B,"SPAN",{});var V=L(l);i=H(V,s),n=H(V," Match"),o=H(V,r),a=H(V," ["),h=H(V,c),p=H(V,"]"),V.forEach(w),m=U(B),_=P(B,"SPAN",{});var Y=L(_);u=H(Y,f),Y.forEach(w),B.forEach(w),d=U(T),A&&A.l(T),g=ke(),this.h()},h(){I(e,"class","text-lg w-full p-2 px-4 bg-neutral-500/30 rounded flex flex-row justify-between mb-2")},m(T,B){j(T,e,B),v(e,l),v(l,i),v(l,n),v(l,o),v(l,a),v(l,h),v(l,p),v(e,m),v(e,_),v(_,u),j(T,d,B),A&&A.m(T,B),j(T,g,B),S=!0,z||(E=C(e,"click",y),z=!0)},p(T,B){t=T,(!S||B&1)&&s!==(s=t[9]+"")&&te(i,s),(!S||B&1)&&r!==(r=t[9]>1?"es":"")&&te(o,r),(!S||B&1)&&c!==(c=t[0].grouped[t[9]].length+"")&&te(h,c),(!S||B&33)&&f!==(f=t[5]===t[9]?"^":"V")&&te(u,f),t[5]===t[9]?A?(A.p(t,B),B&33&&X(A,1)):(A=el(t),A.c(),X(A,1),A.m(g.parentNode,g)):A&&(Ue(),x(A,1,1,()=>{A=null}),Be())},i(T){S||(X(A),S=!0)},o(T){x(A),S=!1},d(T){T&&(w(e),w(d),w(g)),A&&A.d(T),z=!1,E()}}}function cs(t){let e,l,s,i;const n=[us,os],r=[];function o(a,c){return a[2]?0:1}return e=o(t),l=r[e]=n[e](t),{c(){l.c(),s=ke()},l(a){l.l(a),s=ke()},m(a,c){r[e].m(a,c),j(a,s,c),i=!0},p(a,[c]){let h=e;e=o(a),e===h?r[e].p(a,c):(Ue(),x(r[h],1,1,()=>{r[h]=null}),Be(),l=r[e],l?l.p(a,c):(l=r[e]=n[e](a),l.c()),X(l,1),l.m(s.parentNode,s))},i(a){i||(X(l),i=!0)},o(a){x(l),i=!1},d(a){a&&w(s),r[e].d(a)}}}const ll=(t,e)=>t-e;function ds(t,e,l){let{searchResults:s}=e,{highlight:i}=e,{groupResults:n=!0}=e,{jewel:r}=e,{conqueror:o}=e;const a=m=>8+48+m.skills.reduce((_,f)=>_+32+Object.keys(f.stats).length*24,0);let c="";const h=m=>parseInt(m),p=m=>l(5,c=c===m?"":m);return t.$$set=m=>{"searchResults"in m&&l(0,s=m.searchResults),"highlight"in m&&l(1,i=m.highlight),"groupResults"in m&&l(2,n=m.groupResults),"jewel"in m&&l(3,r=m.jewel),"conqueror"in m&&l(4,o=m.conqueror)},[s,i,n,r,o,c,a,h,p]}class ms extends nt{constructor(e){super(),rt(this,e,ds,cs,it,{searchResults:0,highlight:1,groupResults:2,jewel:3,conqueror:4})}}class _s{constructor(){Te(this,"currentLayerId");Te(this,"setups");Te(this,"renderers");Te(this,"dispatchers");Te(this,"needsSetup");Te(this,"needsRedraw");Te(this,"context");Te(this,"width");Te(this,"height");Te(this,"autoclear");Te(this,"pixelRatio");Te(this,"renderLoop");Te(this,"layerObserver");Te(this,"layerRef");Te(this,"layerSequence");Te(this,"renderingLayerId");Te(this,"activeLayerId");Te(this,"activeLayerDispatcher");this.register=this.register.bind(this),this.unregister=this.unregister.bind(this),this.redraw=this.redraw.bind(this),this.getRenderingLayerId=this.getRenderingLayerId.bind(this),this.currentLayerId=1,this.setups=new Map,this.renderers=new Map,this.dispatchers=new Map,this.needsSetup=!1,this.needsRedraw=!0,this.renderingLayerId=0,this.activeLayerId=0,this.layerSequence=[]}redraw(){this.needsRedraw=!0}register({setup:e,render:l,dispatcher:s}){return e&&(this.setups.set(this.currentLayerId,e),this.needsSetup=!0),this.renderers.set(this.currentLayerId,l),this.dispatchers.set(this.currentLayerId,s),this.needsRedraw=!0,this.currentLayerId++}unregister(e){this.renderers.delete(e),this.dispatchers.delete(e),this.needsRedraw=!0}setup(e,l){this.context=e,this.layerRef=l,this.observeLayerSequence(),this.startRenderLoop()}observeLayerSequence(){this.layerObserver=new MutationObserver(this.getLayerSequence.bind(this)),this.layerObserver.observe(this.layerRef,{childList:!0}),this.getLayerSequence()}getLayerSequence(){const e=[...this.layerRef.children];this.layerSequence=e.map(l=>+(l.dataset.layerId??-1)),this.redraw()}startRenderLoop(){this.render(),this.renderLoop=requestAnimationFrame(()=>this.startRenderLoop())}render(){var n;const e=this.context,l=this.width,s=this.height,i=this.pixelRatio;if(this.needsSetup){for(const[r,o]of this.setups)o({context:e,width:l,height:s}),this.setups.delete(r);this.needsSetup=!1}if(this.needsRedraw){e.setTransform(i,0,0,i,0,0),this.autoclear&&e.clearRect(0,0,l,s);for(const r of this.layerSequence)this.renderingLayerId=r,(n=this.renderers.get(r))==null||n({context:e,width:l,height:s});this.needsRedraw=!1}}setActiveLayer(e,l){this.activeLayerId!==e&&(l instanceof MouseEvent&&(this.dispatchLayerEvent(new PointerEvent("pointerleave",l)),this.dispatchLayerEvent(new MouseEvent("mouseleave",l))),this.activeLayerId=e,this.activeLayerDispatcher=this.dispatchers.get(e),l instanceof MouseEvent&&(this.dispatchLayerEvent(new PointerEvent("pointerenter",l)),this.dispatchLayerEvent(new MouseEvent("mouseenter",l))))}dispatchLayerEvent(e){if(this.activeLayerDispatcher){if(window.TouchEvent&&e instanceof TouchEvent){const{left:l,top:s}=e.target.getBoundingClientRect(),{clientX:i,clientY:n}=e.changedTouches[0],r={x:i-l,y:n-s,originalEvent:e};this.activeLayerDispatcher(e.type,r)}else if(e instanceof MouseEvent){const l={x:e.offsetX,y:e.offsetY,originalEvent:e};this.activeLayerDispatcher(e.type,l)}}}getRenderingLayerId(){return this.renderingLayerId}destroy(){typeof window>"u"||(this.layerObserver.disconnect(),cancelAnimationFrame(this.renderLoop))}}const gs=t=>{const e=t*2,l=e>>16&255,s=e>>8&255,i=e&255;return`rgb(${l}, ${s}, ${i})`},ps=(t,e,l)=>{const s=(t<<16|e<<8|l)/2;return s%1?0:s},vs=["drawImage"],bs=["filter","shadowBlur","globalCompositeOperation","globalAlpha"],ws=["drawImage","fill","fillRect","fillText","stroke","strokeRect","strokeText"],Ss=t=>{let e;const l=document.createElement("canvas"),s=l.getContext("2d",{willReadFrequently:!0}),i=()=>{l.width=t.canvas.width,l.height=t.canvas.height};return new MutationObserver(i).observe(t.canvas,{attributeFilter:["width","height"]}),i(),new Proxy(t,{get(r,o){if(o==="_getLayerIdAtPixel")return(c,h)=>{const[p,m,_]=s.getImageData(c,h,1,1).data;return ps(p,m,_)};const a=r[o];return typeof a!="function"?a:function(...c){if(ws.includes(o)){const h=gs(e());s.fillStyle=h,s.strokeStyle=h}if(o==="drawImage"){const h=c.slice(1);s.fillRect(...h)}return vs.includes(o)||Reflect.apply(a,s,c),Reflect.apply(a,r,c)}},set(r,o,a){return o==="_renderingLayerId"?(e=a,!0):(r[o]=a,bs.includes(o)||(s[o]=a),!0)}})};function ks(t){let e,l,s,i=`${t[0]}px`,n=`${t[1]}px`,r,o,a,c,h;const p=t[18].default,m=pt(p,t,t[17],null);return{c(){e=M("canvas"),r=q(),o=M("div"),m&&m.c(),this.h()},l(_){e=P(_,"CANVAS",{width:!0,height:!0,class:!0,style:!0}),L(e).forEach(w),r=U(_),o=P(_,"DIV",{});var f=L(o);m&&m.l(f),f.forEach(w),this.h()},h(){I(e,"width",l=t[0]*t[5]),I(e,"height",s=t[1]*t[5]),I(e,"class",t[4]),I(e,"style",t[2]),He(e,"display","block"),He(e,"width",i),He(e,"height",n),He(o,"display","none")},m(_,f){j(_,e,f),t[64](e),j(_,r,f),j(_,o,f),m&&m.m(o,null),t[65](o),a=!0,c||(h=[C(e,"touchstart",kt(function(){Re(t[3]?t[9]:null)&&(t[3]?t[9]:null).apply(this,arguments)})),C(e,"mousemove",function(){Re(t[3]?t[8]:null)&&(t[3]?t[8]:null).apply(this,arguments)}),C(e,"pointermove",function(){Re(t[3]?t[8]:null)&&(t[3]?t[8]:null).apply(this,arguments)}),C(e,"click",function(){Re(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),C(e,"contextmenu",function(){Re(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),C(e,"dblclick",function(){Re(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),C(e,"mousedown",function(){Re(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),C(e,"mouseenter",function(){Re(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),C(e,"mouseleave",function(){Re(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),C(e,"mouseup",function(){Re(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),C(e,"wheel",function(){Re(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),C(e,"touchcancel",kt(function(){Re(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)})),C(e,"touchend",kt(function(){Re(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)})),C(e,"touchmove",kt(function(){Re(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)})),C(e,"pointerenter",function(){Re(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),C(e,"pointerleave",function(){Re(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),C(e,"pointerdown",function(){Re(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),C(e,"pointerup",function(){Re(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),C(e,"pointercancel",function(){Re(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),C(e,"focus",t[19]),C(e,"blur",t[20]),C(e,"fullscreenchange",t[21]),C(e,"fullscreenerror",t[22]),C(e,"scroll",t[23]),C(e,"cut",t[24]),C(e,"copy",t[25]),C(e,"paste",t[26]),C(e,"keydown",t[27]),C(e,"keypress",t[28]),C(e,"keyup",t[29]),C(e,"auxclick",t[30]),C(e,"click",t[31]),C(e,"contextmenu",t[32]),C(e,"dblclick",t[33]),C(e,"mousedown",t[34]),C(e,"mouseenter",t[35]),C(e,"mouseleave",t[36]),C(e,"mousemove",t[37]),C(e,"mouseover",t[38]),C(e,"mouseout",t[39]),C(e,"mouseup",t[40]),C(e,"select",t[41]),C(e,"wheel",t[42]),C(e,"drag",t[43]),C(e,"dragend",t[44]),C(e,"dragenter",t[45]),C(e,"dragstart",t[46]),C(e,"dragleave",t[47]),C(e,"dragover",t[48]),C(e,"drop",t[49]),C(e,"touchcancel",t[50]),C(e,"touchend",t[51]),C(e,"touchmove",t[52]),C(e,"touchstart",t[53]),C(e,"pointerover",t[54]),C(e,"pointerenter",t[55]),C(e,"pointerdown",t[56]),C(e,"pointermove",t[57]),C(e,"pointerup",t[58]),C(e,"pointercancel",t[59]),C(e,"pointerout",t[60]),C(e,"pointerleave",t[61]),C(e,"gotpointercapture",t[62]),C(e,"lostpointercapture",t[63])],c=!0)},p(_,f){t=_,(!a||f[0]&33&&l!==(l=t[0]*t[5]))&&I(e,"width",l),(!a||f[0]&34&&s!==(s=t[1]*t[5]))&&I(e,"height",s),(!a||f[0]&16)&&I(e,"class",t[4]),(!a||f[0]&4)&&I(e,"style",t[2]);const u=f[0]&4;(f[0]&4||u)&&He(e,"display","block"),(f[0]&5&&i!==(i=`${t[0]}px`)||u)&&He(e,"width",i),(f[0]&6&&n!==(n=`${t[1]}px`)||u)&&He(e,"height",n),m&&m.p&&(!a||f[0]&131072)&&vt(m,p,t,t[17],a?wt(p,t[17],f,null):bt(t[17]),null)},i(_){a||(X(m,_),a=!0)},o(_){x(m,_),a=!1},d(_){_&&(w(e),w(r),w(o)),t[64](null),m&&m.d(_),t[65](null),c=!1,We(h)}}}const Ll=Symbol(),Is=()=>jl(Ll);function Es(t,e,l){let s,{$$slots:i={},$$scope:n}=e,{width:r=640,height:o=640,pixelRatio:a=null,style:c="",autoclear:h=!0,layerEvents:p=!1}=e,{class:m=""}=e,_,f=null,u;const d=new _s;function g(){d.redraw()}function S(){return _}function z(){return f}a==null&&(typeof window<"u"?a=window.devicePixelRatio:a=2),Jl(Ll,{register:d.register,unregister:d.unregister,redraw:d.redraw}),Rl(()=>{const k=_.getContext("2d");p?(f=Ss(k),f._renderingLayerId=d.getRenderingLayerId):f=k,d.setup(f,u)}),zt(()=>d.destroy());const E=k=>{const dt=k.offsetX*s,mt=k.offsetY*s,_t=f._getLayerIdAtPixel(dt,mt);d.setActiveLayer(_t,k),d.dispatchLayerEvent(k)},y=k=>{const{clientX:dt,clientY:mt}=k.changedTouches[0],{left:_t,top:Ct}=_.getBoundingClientRect(),R=(dt-_t)*s,ie=(mt-Ct)*s,pe=f._getLayerIdAtPixel(R,ie);d.setActiveLayer(pe,k),d.dispatchLayerEvent(k)},A=k=>{window.TouchEvent&&k instanceof TouchEvent&&k.preventDefault(),d.dispatchLayerEvent(k)};function T(k){$.call(this,t,k)}function B(k){$.call(this,t,k)}function V(k){$.call(this,t,k)}function Y(k){$.call(this,t,k)}function J(k){$.call(this,t,k)}function K(k){$.call(this,t,k)}function O(k){$.call(this,t,k)}function Q(k){$.call(this,t,k)}function se(k){$.call(this,t,k)}function ne(k){$.call(this,t,k)}function ee(k){$.call(this,t,k)}function ue(k){$.call(this,t,k)}function Ie(k){$.call(this,t,k)}function be(k){$.call(this,t,k)}function we(k){$.call(this,t,k)}function ae(k){$.call(this,t,k)}function Me(k){$.call(this,t,k)}function D(k){$.call(this,t,k)}function b(k){$.call(this,t,k)}function N(k){$.call(this,t,k)}function W(k){$.call(this,t,k)}function G(k){$.call(this,t,k)}function de(k){$.call(this,t,k)}function oe(k){$.call(this,t,k)}function ge(k){$.call(this,t,k)}function fe(k){$.call(this,t,k)}function Pe(k){$.call(this,t,k)}function me(k){$.call(this,t,k)}function Z(k){$.call(this,t,k)}function le(k){$.call(this,t,k)}function he(k){$.call(this,t,k)}function ce(k){$.call(this,t,k)}function Le(k){$.call(this,t,k)}function Oe(k){$.call(this,t,k)}function Ye(k){$.call(this,t,k)}function _e(k){$.call(this,t,k)}function Ee(k){$.call(this,t,k)}function Fe(k){$.call(this,t,k)}function De(k){$.call(this,t,k)}function Ce(k){$.call(this,t,k)}function Ne(k){$.call(this,t,k)}function at(k){$.call(this,t,k)}function ht(k){$.call(this,t,k)}function ct(k){$.call(this,t,k)}function ot(k){$.call(this,t,k)}function ut(k){st[k?"unshift":"push"](()=>{_=k,l(6,_)})}function At(k){st[k?"unshift":"push"](()=>{u=k,l(7,u)})}return t.$$set=k=>{"width"in k&&l(0,r=k.width),"height"in k&&l(1,o=k.height),"pixelRatio"in k&&l(11,a=k.pixelRatio),"style"in k&&l(2,c=k.style),"autoclear"in k&&l(12,h=k.autoclear),"layerEvents"in k&&l(3,p=k.layerEvents),"class"in k&&l(4,m=k.class),"$$scope"in k&&l(17,n=k.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&2048&&l(5,s=a??1),t.$$.dirty[0]&1&&l(16,d.width=r,d),t.$$.dirty[0]&2&&l(16,d.height=o,d),t.$$.dirty[0]&32&&l(16,d.pixelRatio=s,d),t.$$.dirty[0]&4096&&l(16,d.autoclear=h,d),t.$$.dirty[0]&71683&&d.redraw()},[r,o,c,p,m,s,_,u,E,y,A,a,h,g,S,z,d,n,i,T,B,V,Y,J,K,O,Q,se,ne,ee,ue,Ie,be,we,ae,Me,D,b,N,W,G,de,oe,ge,fe,Pe,me,Z,le,he,ce,Le,Oe,Ye,_e,Ee,Fe,De,Ce,Ne,at,ht,ct,ot,ut,At]}class ys extends nt{constructor(e){super(),rt(this,e,Es,ks,it,{width:0,height:1,pixelRatio:11,style:2,autoclear:12,layerEvents:3,class:4,redraw:13,getCanvas:14,getContext:15},null,[-1,-1,-1])}get redraw(){return this.$$.ctx[13]}get getCanvas(){return this.$$.ctx[14]}get getContext(){return this.$$.ctx[15]}}function Ts(t){let e;return{c(){e=M("div"),this.h()},l(l){e=P(l,"DIV",{"data-layer-id":!0}),L(e).forEach(w),this.h()},h(){I(e,"data-layer-id",t[0])},m(l,s){j(l,e,s)},p:$e,i:$e,o:$e,d(l){l&&w(e)}}}function Rs(t,e,l){const{register:s,unregister:i,redraw:n}=Is(),r=Tl();let{setup:o=void 0}=e,{render:a=()=>{}}=e;const c=s({setup:o,render:a,dispatcher:r});return zt(()=>i(c)),t.$$set=h=>{"setup"in h&&l(1,o=h.setup),"render"in h&&l(2,a=h.render)},t.$$.update=()=>{t.$$.dirty&4&&n()},[c,o,a]}class As extends nt{constructor(e){super(),rt(this,e,Rs,Ts,it,{setup:1,render:2})}}let sl;const Nl=Date.now(),Ol=t=>(t(Date.now()-Nl),sl=window.requestAnimationFrame(()=>Ol(t)),()=>window.cancelAnimationFrame(sl));function Cs(){}const Ms=Ql(Date.now()-Nl,typeof window>"u"?Cs:Ol),{window:Pt}=Ml;function il(t){let e,l,s,i,n,r;l=new ys({props:{width:t[0],height:t[1],$$slots:{default:[Ps]},$$scope:{ctx:t}}}),l.$on("pointerdown",t[5]),l.$on("wheel",t[8]);const o=t[26].default,a=pt(o,t,t[27],null);return{c(){e=M("div"),Ve(l.$$.fragment),s=q(),a&&a.c(),this.h()},l(c){e=P(c,"DIV",{style:!0});var h=L(e);Je(l.$$.fragment,h),s=U(h),a&&a.l(h),h.forEach(w),this.h()},h(){He(e,"touch-action","none"),He(e,"cursor",t[2])},m(c,h){j(c,e,h),je(l,e,null),v(e,s),a&&a.m(e,null),i=!0,n||(r=C(e,"resize",t[9]),n=!0)},p(c,h){const p={};h[0]&1&&(p.width=c[0]),h[0]&2&&(p.height=c[1]),h[0]&134217736&&(p.$$scope={dirty:h,ctx:c}),l.$set(p),a&&a.p&&(!i||h[0]&134217728)&&vt(a,o,c,c[27],i?wt(o,c[27],h,null):bt(c[27]),null),(!i||h[0]&4)&&He(e,"cursor",c[2])},i(c){i||(X(l.$$.fragment,c),X(a,c),i=!0)},o(c){x(l.$$.fragment,c),x(a,c),i=!1},d(c){c&&w(e),qe(l),a&&a.d(c),n=!1,r()}}}function Ps(t){let e,l;return e=new As({props:{render:t[3]}}),{c(){Ve(e.$$.fragment)},l(s){Je(e.$$.fragment,s)},m(s,i){je(e,s,i),l=!0},p(s,i){const n={};i[0]&8&&(n.render=s[3]),e.$set(n)},i(s){l||(X(e.$$.fragment,s),l=!0)},o(s){x(e.$$.fragment,s),l=!1},d(s){qe(e,s)}}}function zs(t){let e,l,s,i,n=t[0]&&t[1]&&il(t);return{c(){n&&n.c(),e=ke()},l(r){n&&n.l(r),e=ke()},m(r,o){n&&n.m(r,o),j(r,e,o),l=!0,s||(i=[C(Pt,"pointerup",t[6]),C(Pt,"pointermove",t[7]),C(Pt,"resize",t[9])],s=!0)},p(r,o){r[0]&&r[1]?n?(n.p(r,o),o[0]&3&&X(n,1)):(n=il(r),n.c(),X(n,1),n.m(e.parentNode,e)):n&&(Ue(),x(n,1,1,()=>{n=null}),Be())},i(r){l||(X(n),l=!0)},o(r){x(n),l=!1},d(r){r&&w(e),n&&n.d(r),s=!1,We(i)}}}const nl="25px Roboto Mono",rl="17px Roboto Mono",al=2.6;function Ls(t,e,l){let s,i,n,{$$slots:r={},$$scope:o}=e,{clickNode:a}=e,{circledNode:c}=e,{selectedJewel:h}=e,{selectedConqueror:p}=e,{seed:m}=e,{highlighted:_=[]}=e,{disabled:f=[]}=e,{highlightJewels:u=!1}=e;const d=Zl(Ms,b=>(!_||!_.length)&&!u?0:Math.round(b/40));yt(t,d,b=>l(25,n=b));const g=[427,320,226,227,323,422,329];let S=10,z=0,E=0;const y={},A={},T=(b,N,W,G=!1,de=!1)=>{let oe=G?Yl[N]:Bt[N];!oe&&G&&(oe=Bt[N]);const ge=oe.filename;ge in(G?A:y)||((G?A:y)[ge]=new Image,(G?A:y)[ge].src=ge);const fe=oe.coords[N],Pe=fe.w/S*al,me=fe.h/S*al,Z=W.x-Pe/2,le=W.y-me/2;let he=le;de&&(he=le-me/2),b.drawImage((G?A:y)[ge],fe.x,fe.y,fe.w,fe.h,Z,he,Pe,me),de&&(b.save(),b.translate(Z,le),b.rotate(Math.PI),b.drawImage((G?A:y)[ge],fe.x,fe.y,fe.w,fe.h,-Pe,-(me/2),Pe,-me),b.restore())},B=(b,N,W)=>{const G=[];let de="";return b.split(" ").forEach(oe=>{N.measureText(de+oe).width<W?de+=" "+oe:(G.push(de.trim()),de=oe)}),de.length>0&&G.push(de.trim()),G};let V={x:Number.MIN_VALUE,y:Number.MIN_VALUE},Y="unset",J,K=0,O=0,Q=0,se=0,ne=!1;const ee=b=>{ne=!0,K=b.offsetX,O=b.offsetY,Q=z,se=E,l(21,V={x:b.offsetX,y:b.offsetY}),J&&a(J)},ue=b=>{b.type==="pointerup"&&(ne=!1),l(21,V={x:b.offsetX,y:b.offsetY})},Ie=b=>{ne&&(l(19,z=Q-(K-b.offsetX)*S),l(20,E=se-(O-b.offsetY)*S)),l(21,V={x:b.offsetX,y:b.offsetY})},be=b=>{b.deltaY>0?S<30&&(l(19,z+=b.offsetX),l(20,E+=b.offsetY)):S>3&&(l(19,z-=b.offsetX),l(20,E-=b.offsetY)),l(18,S=Math.min(30,Math.max(3,S+b.deltaY/100))),b.preventDefault(),b.stopPropagation(),b.stopImmediatePropagation()};let we=0,ae=0;const Me=()=>{l(0,we=window.innerWidth),l(1,ae=window.innerHeight)};let D=!1;return t.$$set=b=>{"clickNode"in b&&l(10,a=b.clickNode),"circledNode"in b&&l(11,c=b.circledNode),"selectedJewel"in b&&l(12,h=b.selectedJewel),"selectedConqueror"in b&&l(13,p=b.selectedConqueror),"seed"in b&&l(14,m=b.seed),"highlighted"in b&&l(15,_=b.highlighted),"disabled"in b&&l(16,f=b.disabled),"highlightJewels"in b&&l(17,u=b.highlightJewels),"$$scope"in b&&l(27,o=b.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&262144&&l(24,s=Kl/S),t.$$.dirty[0]&8650752&&(!D&&Ke&&(l(23,D=!0),l(19,z=Ke.min_x+window.innerWidth/2*S),l(20,E=Ke.min_y+window.innerHeight/2*S)),Me()),t.$$.dirty[0]&58718208&&l(3,i=({context:b,width:N,height:W})=>{const G=window.performance.now();b.clearRect(0,0,N,W),b.fillStyle="#080c11",b.fillRect(0,0,N,W);const de={};Object.keys(Mt).forEach(me=>{const Z=Mt[me],le=Vt(Z.x,Z.y,z,E,S),he=Math.max(...Z.orbits);g.indexOf(parseInt(me))>=0||(he==1?T(b,"PSGroupBackground1",le,!1):he==2?T(b,"PSGroupBackground2",le,!1):(he==3||Z.orbits.length>1)&&T(b,"PSGroupBackground3",le,!1,!0))}),Object.keys(tt).forEach(me=>{var ce;const Z=tt[me],le=Jt(Z.orbit,Z.orbitIndex),he=It(Z,z,E,S);(ce=Z.out)==null||ce.forEach(Le=>{if(!tt[parseInt(Le)])return;const Oe=Math.min(parseInt(Le),parseInt(me)),Ye=Math.max(parseInt(Le),parseInt(me)),_e=Oe+":"+Ye;if(_e in de)return;de[_e]=!0;const Ee=tt[parseInt(Le)];if(!Ee||Ee.isMastery)return;const Fe=Jt(Ee.orbit,Ee.orbitIndex),De=It(Ee,z,E,S);if(b.beginPath(),Z.group!=Ee.group||Z.orbit!=Ee.orbit)b.moveTo(he.x,he.y),b.lineTo(De.x,De.y);else{let Ce=Math.PI/180-Math.PI/180*le,Ne=Math.PI/180-Math.PI/180*Fe;Ce-=Math.PI/2,Ne-=Math.PI/2;const at=Math.abs(Math.max(Ce,Ne)-Math.min(Ce,Ne)),ht=at>Math.PI?Math.max(Ce,Ne):Math.min(Ce,Ne),ct=at>Math.PI?Math.min(Ce,Ne):Math.max(Ce,Ne),ot=Mt[Z.group],ut=Vt(ot.x,ot.y,z,E,S);b.arc(ut.x,ut.y,Ke.constants.orbitRadii[Z.orbit]/S+1,ht,ct)}b.lineWidth=6/S,b.strokeStyle="#524518",b.stroke()})});let oe;c&&(oe=It(tt[c],z,E,S),b.strokeStyle="#ad2b2b");let ge=!1,fe;if(Object.keys(tt).forEach(me=>{const Z=tt[me],le=It(Z,z,E,S);let he=0,ce=!1;c&&jt(le,oe)<s&&(ce=!0),f.indexOf(Z.skill)>=0&&(ce=!1),Z.isKeystone?(he=110,T(b,Z.icon,le,ce),ce?T(b,"KeystoneFrameAllocated",le,!1):T(b,"KeystoneFrameUnallocated",le,!1)):Z.isNotable?(he=70,T(b,Z.icon,le,ce),ce?T(b,"NotableFrameAllocated",le,!1):T(b,"NotableFrameUnallocated",le,!1)):Z.isJewelSocket?(he=70,Z.expansionJewel?T(b,"JewelSocketAltNormal",le,!1):ce?T(b,"JewelFrameAllocated",le,!1):T(b,"JewelFrameUnallocated",le,!1)):Z.isMastery?T(b,Z.inactiveIcon,le,ce):(he=50,T(b,Z.icon,le,ce),ce?T(b,"PSSkillFrameActive",le,!1):T(b,"PSSkillFrame",le,!1)),(_.indexOf(Z.skill)>=0||u&&Z.isJewelSocket)&&(b.strokeStyle=`hsl(${n}, 100%, 50%)`,b.lineWidth=3,b.beginPath(),b.arc(le.x,le.y,(he+30)/S,0,Math.PI*2),b.stroke()),jt(le,V)<he/S&&(fe=Z,ge=ce)}),l(22,J=fe),c&&(b.strokeStyle="#ad2b2b",b.lineWidth=1,b.beginPath(),b.arc(oe.x,oe.y,s,0,Math.PI*2),b.stroke()),J){let me=J.name,Z=(J.stats||[]).map(_e=>({text:_e,special:!1}));if(!J.isJewelSocket&&ge&&J.skill&&m&&h&&p){const _e=Cl.Calculate(re.TreeToPassive[J.skill].Index,m,h,p);_e&&("AlternatePassiveSkill"in _e&&_e.AlternatePassiveSkill&&(Z=[],me=_e.AlternatePassiveSkill.Name,"StatsKeys"in _e.AlternatePassiveSkill&&_e.AlternatePassiveSkill.StatsKeys.forEach((Ee,Fe)=>{const De=re.GetStatByIndex(Ee),Ce=qt[De.ID]||"";Ce&&Z.push({text:Ut(Ce,_e.StatRolls[Fe])||De.ID,special:!0})})),_e.AlternatePassiveAdditionInformations&&_e.AlternatePassiveAdditionInformations.forEach(Ee=>{"StatsKeys"in Ee.AlternatePassiveAddition&&Ee.AlternatePassiveAddition.StatsKeys.forEach((Fe,De)=>{const Ce=re.GetStatByIndex(Fe),Ne=qt[Ce.ID]||"";Ne&&Z.push({text:Ut(Ne,Ee.StatRolls[De])||Ce.ID,special:!0})})}))}b.font=nl;const le=b.measureText(me),he=Math.max(le.width+50,600);b.font=rl;const ce=[],Le=30;let Oe=85;Z&&Z.length>0?Z.forEach(_e=>{ce.length>0&&(Oe+=5),_e.text.split(`
`).forEach(Ee=>{ce.length>0&&(Oe+=10),B(Ee,b,he-Le).forEach(De=>{ce.push({text:De,offset:Oe,special:_e.special}),Oe+=20})})}):J.isJewelSocket&&(ce.push({text:"Click to select this socket",offset:Oe,special:!0}),Oe+=20);const Ye=55;b.fillStyle="rgba(75,63,24,0.9)",b.fillRect(V.x,V.y,he,Ye),b.fillStyle="#ffffff",b.font=nl,b.textAlign="center",b.fillText(me,V.x+he/2,V.y+35),b.fillStyle="rgba(0,0,0,0.8)",b.fillRect(V.x,V.y+Ye,he,Oe-Ye),b.font=rl,b.textAlign="left",ce.forEach(_e=>{_e.special?b.fillStyle="#8cf34c":b.fillStyle="#ffffff",b.fillText(_e.text,V.x+Le/2,V.y+_e.offset)})}J&&J.isJewelSocket?l(2,Y="pointer"):l(2,Y="unset"),b.fillStyle="#ffffff",b.textAlign="right",b.font="12px Roboto Mono";const Pe=window.performance.now();b.fillText(`${(Pe-G).toFixed(1)}ms`,N-5,17)})},[we,ae,Y,i,d,ee,ue,Ie,be,Me,a,c,h,p,m,_,f,u,S,z,E,V,J,D,s,n,r,o]}class Ns extends nt{constructor(e){super(),rt(this,e,Ls,zs,it,{clickNode:10,circledNode:11,selectedJewel:12,selectedConqueror:13,seed:14,highlighted:15,disabled:16,highlightJewels:17},null,[-1,-1])}}const et={25:1,26:1,42:1,49:1,56:1,63:1,70:2,95:4,117:1,124:4,134:1,150:2,216:1,434:1,482:1,483:1,484:1,488:1,554:1,556:1,593:3,594:3,595:3,619:1,943:1,944:1,945:1,946:1,2133:4,3108:3,3109:4,3110:4,3111:4,5815:4,8835:1,9091:1,9772:1,14775:2,209:1,447:1,573:2,1294:1,1361:1,2031:5,8177:2,448:2,486:1,579:2,1404:1,2030:5,9090:1,9711:2,9712:2,9713:2,9714:2,9716:1,9717:1,9718:1,9721:1,9722:1,9723:1,9724:1,186:2,490:1,1251:3,1654:1,3392:1,6042:1,6048:1,6049:1,6050:1,6136:1,7499:2};const{window:Os}=Ml;function ol(t,e,l){const s=t.slice();return s[79]=e[l],s[80]=e,s[81]=l,s}function ul(t,e,l){const s=t.slice();return s[72]=e[l],s}function fl(t,e,l){const s=t.slice();return s[72]=e[l],s}function hl(t,e,l){const s=t.slice();return s[72]=e[l],s}function Ds(t){let e,l="<div></div> <div></div> <div></div>",s,i;return{c(){e=M("button"),e.innerHTML=l,this.h()},l(n){e=P(n,"BUTTON",{class:!0,"data-svelte-h":!0}),xe(e)!=="svelte-rq6e1l"&&(e.innerHTML=l),this.h()},h(){I(e,"class","burger-menu absolute top-0 left-0 bg-black/80 backdrop-blur-sm rounded-br-lg p-4 pt-5")},m(n,r){j(n,e,r),s||(i=C(e,"click",t[67]),s=!0)},p:$e,i:$e,o:$e,d(n){n&&w(e),s=!1,i()}}}function Vs(t){let e,l,s,i,n,r="<div></div> <div></div> <div></div>",o,a,c=(t[14]?t[10]("Results"):t[10]("Timeless Jewel"))+"",h,p,m,_,f,u,d,g,S,z;_=new Fl({});let E=t[18]&&cl(t),y=!t[14]&&ml(t),A=t[18]&&t[14]&&yl(t);return{c(){e=M("div"),l=M("div"),s=M("div"),i=M("div"),n=M("button"),n.innerHTML=r,o=q(),a=M("h3"),h=F(c),p=q(),m=M("div"),Ve(_.$$.fragment),f=q(),E&&E.c(),u=q(),y&&y.c(),d=q(),A&&A.c(),this.h()},l(T){e=P(T,"DIV",{class:!0});var B=L(e);l=P(B,"DIV",{class:!0});var V=L(l);s=P(V,"DIV",{class:!0});var Y=L(s);i=P(Y,"DIV",{class:!0});var J=L(i);n=P(J,"BUTTON",{class:!0,"data-svelte-h":!0}),xe(n)!=="svelte-mvbl10"&&(n.innerHTML=r),o=U(J),a=P(J,"H3",{class:!0});var K=L(a);h=H(K,c),K.forEach(w),p=U(J),m=P(J,"DIV",{class:!0});var O=L(m);Je(_.$$.fragment,O),O.forEach(w),J.forEach(w),f=U(Y),E&&E.l(Y),Y.forEach(w),u=U(V),y&&y.l(V),d=U(V),A&&A.l(V),V.forEach(w),B.forEach(w),this.h()},h(){I(n,"class","burger-menu mr-3"),I(a,"class","flex-grow"),I(m,"class","ml-4"),I(i,"class","flex flex-row items-center"),I(s,"class","flex flex-row justify-between mb-2"),I(l,"class","p-4 max-h-screen flex flex-col"),I(e,"class","w-screen md:w-10/12 lg:w-2/3 xl:w-1/2 2xl:w-5/12 3xl:w-1/3 4xl:w-1/4 absolute top-0 left-0 bg-black/80 backdrop-blur-sm themed rounded-br-lg max-h-screen")},m(T,B){j(T,e,B),v(e,l),v(l,s),v(s,i),v(i,n),v(i,o),v(i,a),v(a,h),v(i,p),v(i,m),je(_,m,null),v(s,f),E&&E.m(s,null),v(l,u),y&&y.m(l,null),v(l,d),A&&A.m(l,null),g=!0,S||(z=C(n,"click",t[45]),S=!0)},p(T,B){(!g||B[0]&17408)&&c!==(c=(T[14]?T[10]("Results"):T[10]("Timeless Jewel"))+"")&&te(h,c),T[18]?E?E.p(T,B):(E=cl(T),E.c(),E.m(s,null)):E&&(E.d(1),E=null),T[14]?y&&(Ue(),x(y,1,1,()=>{y=null}),Be()):y?(y.p(T,B),B[0]&16384&&X(y,1)):(y=ml(T),y.c(),X(y,1),y.m(l,d)),T[18]&&T[14]?A?(A.p(T,B),B[0]&278528&&X(A,1)):(A=yl(T),A.c(),X(A,1),A.m(l,null)):A&&(Ue(),x(A,1,1,()=>{A=null}),Be())},i(T){g||(X(_.$$.fragment,T),X(y),X(A),g=!0)},o(T){x(_.$$.fragment,T),x(y),x(A),g=!1},d(T){T&&w(e),qe(_),E&&E.d(),y&&y.d(),A&&A.d(),S=!1,z()}}}function cl(t){let e,l,s,i=(t[14]?t[10]("Config"):t[10]("Results"))+"",n,r,o,a=t[14]&&dl(t);return{c(){e=M("div"),a&&a.c(),l=q(),s=M("button"),n=F(i),this.h()},l(c){e=P(c,"DIV",{class:!0});var h=L(e);a&&a.l(h),l=U(h),s=P(h,"BUTTON",{class:!0});var p=L(s);n=H(p,i),p.forEach(w),h.forEach(w),this.h()},h(){I(s,"class","bg-neutral-100/20 px-4 p-1 rounded"),I(e,"class","flex flex-row")},m(c,h){j(c,e,h),a&&a.m(e,null),v(e,l),v(e,s),v(s,n),r||(o=C(s,"click",t[49]),r=!0)},p(c,h){c[14]?a?a.p(c,h):(a=dl(c),a.c(),a.m(e,l)):a&&(a.d(1),a=null),h[0]&17408&&i!==(i=(c[14]?c[10]("Config"):c[10]("Results"))+"")&&te(n,i)},d(c){c&&w(e),a&&a.d(),r=!1,o()}}}function dl(t){let e,l=t[10]("Trade")+"",s,i,n,r,o=t[10]("Trade")+"",a,c,h,p,m,_=t[10]("Grouped")+"",f,u,d,g;return{c(){e=M("button"),s=F(l),n=q(),r=M("button"),a=F(o),c=F(" CN"),p=q(),m=M("button"),f=F(_),this.h()},l(S){e=P(S,"BUTTON",{class:!0});var z=L(e);s=H(z,l),z.forEach(w),n=U(S),r=P(S,"BUTTON",{class:!0});var E=L(r);a=H(E,o),c=H(E," CN"),E.forEach(w),p=U(S),m=P(S,"BUTTON",{class:!0});var y=L(m);f=H(y,_),y.forEach(w),this.h()},h(){I(e,"class","p-1 px-3 bg-blue-500/40 bg-blue-500/70 rounded disabled:bg-blue-900/40 mr-2"),e.disabled=i=!t[18],I(r,"class","p-1 px-3 bg-red-500/40 hover:bg-red-500/70 rounded disabled:bg-red-900/40 mr-2"),r.disabled=h=!t[18],I(m,"class","p-1 px-3 bg-blue-500/40 rounded disabled:bg-blue-900/40 mr-2 svelte-9h6fz6"),m.disabled=u=!t[18],ve(m,"grouped",t[5])},m(S,z){j(S,e,z),v(e,s),j(S,n,z),j(S,r,z),v(r,a),v(r,c),j(S,p,z),j(S,m,z),v(m,f),d||(g=[C(e,"click",t[46]),C(r,"click",t[47]),C(m,"click",t[48])],d=!0)},p(S,z){z[0]&1024&&l!==(l=S[10]("Trade")+"")&&te(s,l),z[0]&262144&&i!==(i=!S[18])&&(e.disabled=i),z[0]&1024&&o!==(o=S[10]("Trade")+"")&&te(a,o),z[0]&262144&&h!==(h=!S[18])&&(r.disabled=h),z[0]&1024&&_!==(_=S[10]("Grouped")+"")&&te(f,_),z[0]&262144&&u!==(u=!S[18])&&(m.disabled=u),z[0]&32&&ve(m,"grouped",S[5])},d(S){S&&(w(e),w(n),w(r),w(p),w(m)),d=!1,We(g)}}}function ml(t){let e,l,s,i,n;function r(c){t[50](c)}let o={items:t[26]};t[0]!==void 0&&(o.value=t[0]),e=new Rt({props:o}),st.push(()=>Dt(e,"value",r)),e.$on("change",t[32]);let a=t[0]&&_l(t);return{c(){Ve(e.$$.fragment),s=q(),a&&a.c(),i=ke()},l(c){Je(e.$$.fragment,c),s=U(c),a&&a.l(c),i=ke()},m(c,h){je(e,c,h),j(c,s,h),a&&a.m(c,h),j(c,i,h),n=!0},p(c,h){const p={};!l&&h[0]&1&&(l=!0,p.value=c[0],Lt(()=>l=!1)),e.$set(p),c[0]?a?(a.p(c,h),h[0]&1&&X(a,1)):(a=_l(c),a.c(),X(a,1),a.m(i.parentNode,i)):a&&(Ue(),x(a,1,1,()=>{a=null}),Be())},i(c){n||(X(e.$$.fragment,c),X(a),n=!0)},o(c){x(e.$$.fragment,c),x(a),n=!1},d(c){c&&(w(s),w(i)),qe(e,c),a&&a.d(c)}}}function _l(t){let e,l,s=t[10]("Conqueror")+"",i,n,r,o,a,c=t[1]&&Object.keys(re.TimelessJewelConquerors[t[0].value]).indexOf(t[1].value)>=0,h,p;function m(u){t[51](u)}let _={items:t[25]};t[1]!==void 0&&(_.value=t[1]),r=new Rt({props:_}),st.push(()=>Dt(r,"value",m)),r.$on("change",t[27]);let f=c&&gl(t);return{c(){e=M("div"),l=M("h3"),i=F(s),n=q(),Ve(r.$$.fragment),a=q(),f&&f.c(),h=ke(),this.h()},l(u){e=P(u,"DIV",{class:!0});var d=L(e);l=P(d,"H3",{class:!0});var g=L(l);i=H(g,s),g.forEach(w),n=U(d),Je(r.$$.fragment,d),d.forEach(w),a=U(u),f&&f.l(u),h=ke(),this.h()},h(){I(l,"class","mb-2"),I(e,"class","mt-4")},m(u,d){j(u,e,d),v(e,l),v(l,i),v(e,n),je(r,e,null),j(u,a,d),f&&f.m(u,d),j(u,h,d),p=!0},p(u,d){(!p||d[0]&1024)&&s!==(s=u[10]("Conqueror")+"")&&te(i,s);const g={};d[0]&33554432&&(g.items=u[25]),!o&&d[0]&2&&(o=!0,g.value=u[1],Lt(()=>o=!1)),r.$set(g),d[0]&3&&(c=u[1]&&Object.keys(re.TimelessJewelConquerors[u[0].value]).indexOf(u[1].value)>=0),c?f?(f.p(u,d),d[0]&3&&X(f,1)):(f=gl(u),f.c(),X(f,1),f.m(h.parentNode,h)):f&&(Ue(),x(f,1,1,()=>{f=null}),Be())},i(u){p||(X(r.$$.fragment,u),X(f),p=!0)},o(u){x(r.$$.fragment,u),x(f),p=!1},d(u){u&&(w(e),w(a),w(h)),qe(r),f&&f.d(u)}}}function gl(t){let e,l,s=t[10]("Enter Seed")+"",i,n,r,o=t[10]("Select Stats")+"",a,c,h,p,m,_,f,u,d;const g=[js,Js],S=[];function z(y,A){return y[11]==="seed"?0:y[11]==="stats"?1:-1}~(h=z(t))&&(p=S[h]=g[h](t));let E=!t[3]&&El(t);return{c(){e=M("div"),l=M("button"),i=F(s),n=q(),r=M("button"),a=F(o),c=q(),p&&p.c(),m=q(),E&&E.c(),_=ke(),this.h()},l(y){e=P(y,"DIV",{class:!0});var A=L(e);l=P(A,"BUTTON",{class:!0});var T=L(l);i=H(T,s),T.forEach(w),n=U(A),r=P(A,"BUTTON",{class:!0});var B=L(r);a=H(B,o),B.forEach(w),A.forEach(w),c=U(y),p&&p.l(y),m=U(y),E&&E.l(y),_=ke(),this.h()},h(){I(l,"class","selection-button svelte-9h6fz6"),ve(l,"selected",t[11]==="seed"),I(r,"class","selection-button svelte-9h6fz6"),ve(r,"selected",t[11]==="stats"),I(e,"class","mt-4 w-full flex flex-row")},m(y,A){j(y,e,A),v(e,l),v(l,i),v(e,n),v(e,r),v(r,a),j(y,c,A),~h&&S[h].m(y,A),j(y,m,A),E&&E.m(y,A),j(y,_,A),f=!0,u||(d=[C(l,"click",t[52]),C(r,"click",t[53])],u=!0)},p(y,A){(!f||A[0]&1024)&&s!==(s=y[10]("Enter Seed")+"")&&te(i,s),(!f||A[0]&2048)&&ve(l,"selected",y[11]==="seed"),(!f||A[0]&1024)&&o!==(o=y[10]("Select Stats")+"")&&te(a,o),(!f||A[0]&2048)&&ve(r,"selected",y[11]==="stats");let T=h;h=z(y),h===T?~h&&S[h].p(y,A):(p&&(Ue(),x(S[T],1,1,()=>{S[T]=null}),Be()),~h?(p=S[h],p?p.p(y,A):(p=S[h]=g[h](y),p.c()),X(p,1),p.m(m.parentNode,m)):p=null),y[3]?E&&(E.d(1),E=null):E?E.p(y,A):(E=El(y),E.c(),E.m(_.parentNode,_))},i(y){f||(X(p),f=!0)},o(y){x(p),f=!1},d(y){y&&(w(e),w(c),w(m),w(_)),~h&&S[h].d(y),E&&E.d(y),u=!1,We(d)}}}function Js(t){let e,l,s=t[10]("Add Stat")+"",i,n,r,o,a=Object.keys(t[4]).length>0,c,h,p={items:t[23]};r=new Rt({props:p}),t[61](r),r.$on("change",t[30]);let m=a&&pl(t);return{c(){e=M("div"),l=M("h3"),i=F(s),n=q(),Ve(r.$$.fragment),o=q(),m&&m.c(),c=ke(),this.h()},l(_){e=P(_,"DIV",{class:!0});var f=L(e);l=P(f,"H3",{class:!0});var u=L(l);i=H(u,s),u.forEach(w),n=U(f),Je(r.$$.fragment,f),f.forEach(w),o=U(_),m&&m.l(_),c=ke(),this.h()},h(){I(l,"class","mb-2"),I(e,"class","mt-4")},m(_,f){j(_,e,f),v(e,l),v(l,i),v(e,n),je(r,e,null),j(_,o,f),m&&m.m(_,f),j(_,c,f),h=!0},p(_,f){(!h||f[0]&1024)&&s!==(s=_[10]("Add Stat")+"")&&te(i,s);const u={};f[0]&8388608&&(u.items=_[23]),r.$set(u),f[0]&16&&(a=Object.keys(_[4]).length>0),a?m?m.p(_,f):(m=pl(_),m.c(),m.m(c.parentNode,c)):m&&(m.d(1),m=null)},i(_){h||(X(r.$$.fragment,_),h=!0)},o(_){x(r.$$.fragment,_),h=!1},d(_){_&&(w(e),w(o),w(c)),t[61](null),qe(r),m&&m.d(_)}}}function js(t){let e,l,s=t[10]("Seed")+"",i,n,r,o,a,c,h,p,m,_,f,u=(t[2]<re.TimelessJewelSeedRanges[t[0].value].Min||t[2]>re.TimelessJewelSeedRanges[t[0].value].Max)&&bl(t),d=t[2]>=re.TimelessJewelSeedRanges[t[0].value].Min&&t[2]<=re.TimelessJewelSeedRanges[t[0].value].Max&&wl(t);return{c(){e=M("div"),l=M("h3"),i=F(s),n=q(),r=M("input"),c=q(),u&&u.c(),h=q(),d&&d.c(),p=ke(),this.h()},l(g){e=P(g,"DIV",{class:!0});var S=L(e);l=P(S,"H3",{class:!0});var z=L(l);i=H(z,s),z.forEach(w),n=U(S),r=P(S,"INPUT",{type:!0,min:!0,max:!0}),c=U(S),u&&u.l(S),S.forEach(w),h=U(g),d&&d.l(g),p=ke(),this.h()},h(){I(l,"class","mb-2"),I(r,"type","number"),I(r,"min",o=re.TimelessJewelSeedRanges[t[0].value].Min),I(r,"max",a=re.TimelessJewelSeedRanges[t[0].value].Max),I(e,"class","mt-4")},m(g,S){j(g,e,S),v(e,l),v(l,i),v(e,n),v(e,r),Ze(r,t[2]),v(e,c),u&&u.m(e,null),j(g,h,S),d&&d.m(g,S),j(g,p,S),m=!0,_||(f=[C(r,"input",t[54]),C(r,"blur",t[27])],_=!0)},p(g,S){(!m||S[0]&1024)&&s!==(s=g[10]("Seed")+"")&&te(i,s),(!m||S[0]&1&&o!==(o=re.TimelessJewelSeedRanges[g[0].value].Min))&&I(r,"min",o),(!m||S[0]&1&&a!==(a=re.TimelessJewelSeedRanges[g[0].value].Max))&&I(r,"max",a),S[0]&4&&Qe(r.value)!==g[2]&&Ze(r,g[2]),g[2]<re.TimelessJewelSeedRanges[g[0].value].Min||g[2]>re.TimelessJewelSeedRanges[g[0].value].Max?u?u.p(g,S):(u=bl(g),u.c(),u.m(e,null)):u&&(u.d(1),u=null),g[2]>=re.TimelessJewelSeedRanges[g[0].value].Min&&g[2]<=re.TimelessJewelSeedRanges[g[0].value].Max?d?(d.p(g,S),S[0]&5&&X(d,1)):(d=wl(g),d.c(),X(d,1),d.m(p.parentNode,p)):d&&(Ue(),x(d,1,1,()=>{d=null}),Be())},i(g){m||(X(d),m=!0)},o(g){x(d),m=!1},d(g){g&&(w(e),w(h),w(p)),u&&u.d(),d&&d.d(g),_=!1,We(f)}}}function pl(t){let e,l,s,i,n,r=t[10]("Min Total Weight")+"",o,a,c,h,p,m,_,f=t[10]("Select All")+"",u,d,g,S,z=t[10]("Notables")+"",E,y,A,T,B=t[10]("Passives")+"",V,Y,J,K,O=t[10]("Deselect")+"",Q,se,ne,ee,ue,Ie,be,we=ze(Object.keys(t[4])),ae=[];for(let N=0;N<we.length;N+=1)ae[N]=vl(ol(t,we,N));function Me(N,W){return N[16]?Us:qs}let D=Me(t),b=D(t);return{c(){e=M("div");for(let N=0;N<ae.length;N+=1)ae[N].c();l=q(),s=M("div"),i=M("div"),n=M("div"),o=F(r),a=q(),c=M("input"),h=q(),p=M("div"),m=M("div"),_=M("button"),u=F(f),g=q(),S=M("button"),E=F(z),A=q(),T=M("button"),V=F(B),J=q(),K=M("button"),Q=F(O),ne=q(),ee=M("div"),ue=M("button"),b.c(),this.h()},l(N){e=P(N,"DIV",{class:!0});var W=L(e);for(let Le=0;Le<ae.length;Le+=1)ae[Le].l(W);W.forEach(w),l=U(N),s=P(N,"DIV",{class:!0});var G=L(s);i=P(G,"DIV",{class:!0});var de=L(i);n=P(de,"DIV",{class:!0});var oe=L(n);o=H(oe,r),oe.forEach(w),a=U(de),c=P(de,"INPUT",{type:!0,min:!0}),de.forEach(w),G.forEach(w),h=U(N),p=P(N,"DIV",{class:!0});var ge=L(p);m=P(ge,"DIV",{class:!0});var fe=L(m);_=P(fe,"BUTTON",{class:!0});var Pe=L(_);u=H(Pe,f),Pe.forEach(w),g=U(fe),S=P(fe,"BUTTON",{class:!0});var me=L(S);E=H(me,z),me.forEach(w),A=U(fe),T=P(fe,"BUTTON",{class:!0});var Z=L(T);V=H(Z,B),Z.forEach(w),J=U(fe),K=P(fe,"BUTTON",{class:!0});var le=L(K);Q=H(le,O),le.forEach(w),fe.forEach(w),ne=U(ge),ee=P(ge,"DIV",{class:!0});var he=L(ee);ue=P(he,"BUTTON",{class:!0});var ce=L(ue);b.l(ce),ce.forEach(w),he.forEach(w),ge.forEach(w),this.h()},h(){I(e,"class","mt-4 flex flex-col overflow-auto min-h-[100px]"),I(n,"class","mr-2 min-w-fit"),I(c,"type","number"),I(c,"min","0"),I(i,"class","flex flex-row items-center"),I(s,"class","flex flex-col mt-2"),I(_,"class","p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 mr-2"),_.disabled=d=t[16]||t[12].size==0,I(S,"class","p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 mr-2"),S.disabled=y=t[16]||t[12].size==0,I(T,"class","p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 mr-2"),T.disabled=Y=t[16]||t[12].size==0,I(K,"class","p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 flex-grow"),K.disabled=se=t[16]||t[12].size>=t[9].length,I(m,"class","flex flex-row"),I(ue,"class","p-2 px-3 bg-green-500/40 rounded disabled:bg-green-900/40 flex-grow"),ue.disabled=t[16],I(ee,"class","flex flex-row mt-2"),I(p,"class","flex flex-col mt-4")},m(N,W){j(N,e,W);for(let G=0;G<ae.length;G+=1)ae[G]&&ae[G].m(e,null);j(N,l,W),j(N,s,W),v(s,i),v(i,n),v(n,o),v(i,a),v(i,c),Ze(c,t[15]),j(N,h,W),j(N,p,W),v(p,m),v(m,_),v(_,u),v(m,g),v(m,S),v(S,E),v(m,A),v(m,T),v(T,V),v(m,J),v(m,K),v(K,Q),v(p,ne),v(p,ee),v(ee,ue),b.m(ue,null),Ie||(be=[C(c,"input",t[65]),C(_,"click",t[35]),C(S,"click",t[36]),C(T,"click",t[37]),C(K,"click",t[38]),C(ue,"click",t[66])],Ie=!0)},p(N,W){if(W[0]&1040|W[1]&1){we=ze(Object.keys(N[4]));let G;for(G=0;G<we.length;G+=1){const de=ol(N,we,G);ae[G]?ae[G].p(de,W):(ae[G]=vl(de),ae[G].c(),ae[G].m(e,null))}for(;G<ae.length;G+=1)ae[G].d(1);ae.length=we.length}W[0]&1024&&r!==(r=N[10]("Min Total Weight")+"")&&te(o,r),W[0]&32768&&Qe(c.value)!==N[15]&&Ze(c,N[15]),W[0]&1024&&f!==(f=N[10]("Select All")+"")&&te(u,f),W[0]&69632&&d!==(d=N[16]||N[12].size==0)&&(_.disabled=d),W[0]&1024&&z!==(z=N[10]("Notables")+"")&&te(E,z),W[0]&69632&&y!==(y=N[16]||N[12].size==0)&&(S.disabled=y),W[0]&1024&&B!==(B=N[10]("Passives")+"")&&te(V,B),W[0]&69632&&Y!==(Y=N[16]||N[12].size==0)&&(T.disabled=Y),W[0]&1024&&O!==(O=N[10]("Deselect")+"")&&te(Q,O),W[0]&70144&&se!==(se=N[16]||N[12].size>=N[9].length)&&(K.disabled=se),D===(D=Me(N))&&b?b.p(N,W):(b.d(1),b=D(N),b&&(b.c(),b.m(ue,null))),W[0]&65536&&(ue.disabled=N[16])},d(N){N&&(w(e),w(l),w(s),w(h),w(p)),lt(ae,N),b.d(),Ie=!1,We(be)}}}function vl(t){let e,l,s,i="-",n,r,o=ft(t[4][t[79]].id)+"",a,c,h,p,m,_=t[10]("Min")+"",f,u,d,g,S,z,E,y=t[10]("Weight")+"",A,T,B,V,Y,J,K;function O(){return t[62](t[79])}function Q(){t[63].call(g,t[79])}function se(){t[64].call(V,t[79])}return{c(){e=M("div"),l=M("div"),s=M("button"),s.textContent=i,n=q(),r=M("span"),a=F(o),c=q(),h=M("div"),p=M("div"),m=M("div"),f=F(_),u=F(":"),d=q(),g=M("input"),S=q(),z=M("div"),E=M("div"),A=F(y),T=F(":"),B=q(),V=M("input"),Y=q(),this.h()},l(ne){e=P(ne,"DIV",{class:!0});var ee=L(e);l=P(ee,"DIV",{});var ue=L(l);s=P(ue,"BUTTON",{class:!0,"data-svelte-h":!0}),xe(s)!=="svelte-bzfob2"&&(s.textContent=i),n=U(ue),r=P(ue,"SPAN",{});var Ie=L(r);a=H(Ie,o),Ie.forEach(w),ue.forEach(w),c=U(ee),h=P(ee,"DIV",{class:!0});var be=L(h);p=P(be,"DIV",{class:!0});var we=L(p);m=P(we,"DIV",{class:!0});var ae=L(m);f=H(ae,_),u=H(ae,":"),ae.forEach(w),d=U(we),g=P(we,"INPUT",{type:!0,min:!0}),we.forEach(w),S=U(be),z=P(be,"DIV",{class:!0});var Me=L(z);E=P(Me,"DIV",{class:!0});var D=L(E);A=H(D,y),T=H(D,":"),D.forEach(w),B=U(Me),V=P(Me,"INPUT",{type:!0,min:!0}),Me.forEach(w),be.forEach(w),Y=U(ee),ee.forEach(w),this.h()},h(){I(s,"class","p-2 px-4 bg-red-500/40 rounded mr-2"),I(m,"class","mr-2"),I(g,"type","number"),I(g,"min","0"),I(p,"class","mr-4 flex flex-row items-center"),I(E,"class","mr-2"),I(V,"type","number"),I(V,"min","0"),I(z,"class","flex flex-row items-center"),I(h,"class","mt-2 flex flex-row"),I(e,"class","mb-4 flex flex-row items-start flex-col border-neutral-100/40 border-b pb-4")},m(ne,ee){j(ne,e,ee),v(e,l),v(l,s),v(l,n),v(l,r),v(r,a),v(e,c),v(e,h),v(h,p),v(p,m),v(m,f),v(m,u),v(p,d),v(p,g),Ze(g,t[4][t[79]].min),v(h,S),v(h,z),v(z,E),v(E,A),v(E,T),v(z,B),v(z,V),Ze(V,t[4][t[79]].weight),v(e,Y),J||(K=[C(s,"click",O),C(g,"input",Q),C(V,"input",se)],J=!0)},p(ne,ee){t=ne,ee[0]&16&&o!==(o=ft(t[4][t[79]].id)+"")&&te(a,o),ee[0]&1024&&_!==(_=t[10]("Min")+"")&&te(f,_),ee[0]&16&&Qe(g.value)!==t[4][t[79]].min&&Ze(g,t[4][t[79]].min),ee[0]&1024&&y!==(y=t[10]("Weight")+"")&&te(A,y),ee[0]&16&&Qe(V.value)!==t[4][t[79]].weight&&Ze(V,t[4][t[79]].weight)},d(ne){ne&&w(e),J=!1,We(K)}}}function qs(t){let e=t[10]("Search")+"",l;return{c(){l=F(e)},l(s){l=H(s,e)},m(s,i){j(s,l,i)},p(s,i){i[0]&1024&&e!==(e=s[10]("Search")+"")&&te(l,e)},d(s){s&&w(l)}}}function Us(t){let e,l,s=re.TimelessJewelSeedRanges[t[0].value].Max+"",i;return{c(){e=F(t[17]),l=F(" / "),i=F(s)},l(n){e=H(n,t[17]),l=H(n," / "),i=H(n,s)},m(n,r){j(n,e,r),j(n,l,r),j(n,i,r)},p(n,r){r[0]&131072&&te(e,n[17]),r[0]&1&&s!==(s=re.TimelessJewelSeedRanges[n[0].value].Max+"")&&te(i,s)},d(n){n&&(w(e),w(l),w(i))}}}function bl(t){let e,l=t[10]("Seed must be between",{values:{min:re.TimelessJewelSeedRanges[t[0].value].Min,max:re.TimelessJewelSeedRanges[t[0].value].Max}})+"",s;return{c(){e=M("div"),s=F(l),this.h()},l(i){e=P(i,"DIV",{class:!0});var n=L(e);s=H(n,l),n.forEach(w),this.h()},h(){I(e,"class","mt-2")},m(i,n){j(i,e,n),v(e,s)},p(i,n){n[0]&1025&&l!==(l=i[10]("Seed must be between",{values:{min:re.TimelessJewelSeedRanges[i[0].value].Min,max:re.TimelessJewelSeedRanges[i[0].value].Max}})+"")&&te(s,l)},d(i){i&&w(e)}}}function wl(t){let e,l,s,i=t[10]("Sort Order")+"",n,r,o,a,c,h,p,m=t[10]("Colors")+"",_,f,u,d,g=t[10]("Split")+"",S,z,E,y,A,T;function B(O){t[55](O)}let V={items:t[41]};t[6]!==void 0&&(V.value=t[6]),o=new Rt({props:V}),st.push(()=>Dt(o,"value",B));function Y(O,Q){return O[8]?Bs:Fs}let J=Y(t),K=J(t);return{c(){e=M("div"),l=M("div"),s=M("h3"),n=F(i),r=q(),Ve(o.$$.fragment),c=q(),h=M("div"),p=M("button"),_=F(m),f=q(),u=M("div"),d=M("button"),S=F(g),z=q(),K.c(),E=ke(),this.h()},l(O){e=P(O,"DIV",{class:!0});var Q=L(e);l=P(Q,"DIV",{class:!0});var se=L(l);s=P(se,"H3",{class:!0});var ne=L(s);n=H(ne,i),ne.forEach(w),r=U(se),Je(o.$$.fragment,se),se.forEach(w),c=U(Q),h=P(Q,"DIV",{class:!0});var ee=L(h);p=P(ee,"BUTTON",{class:!0});var ue=L(p);_=H(ue,m),ue.forEach(w),ee.forEach(w),f=U(Q),u=P(Q,"DIV",{class:!0});var Ie=L(u);d=P(Ie,"BUTTON",{class:!0});var be=L(d);S=H(be,g),be.forEach(w),Ie.forEach(w),Q.forEach(w),z=U(O),K.l(O),E=ke(),this.h()},h(){I(s,"class","mb-2"),I(l,"class","flex-grow"),I(p,"class","bg-neutral-500/20 p-2 px-4 rounded svelte-9h6fz6"),ve(p,"selected",t[7]),I(h,"class","ml-2"),I(d,"class","bg-neutral-500/20 p-2 px-4 rounded svelte-9h6fz6"),ve(d,"selected",t[8]),I(u,"class","ml-2"),I(e,"class","flex flex-row mt-4 items-end")},m(O,Q){j(O,e,Q),v(e,l),v(l,s),v(s,n),v(l,r),je(o,l,null),v(e,c),v(e,h),v(h,p),v(p,_),v(e,f),v(e,u),v(u,d),v(d,S),j(O,z,Q),K.m(O,Q),j(O,E,Q),y=!0,A||(T=[C(p,"click",t[56]),C(d,"click",t[57])],A=!0)},p(O,Q){(!y||Q[0]&1024)&&i!==(i=O[10]("Sort Order")+"")&&te(n,i);const se={};!a&&Q[0]&64&&(a=!0,se.value=O[6],Lt(()=>a=!1)),o.$set(se),(!y||Q[0]&1024)&&m!==(m=O[10]("Colors")+"")&&te(_,m),(!y||Q[0]&128)&&ve(p,"selected",O[7]),(!y||Q[0]&1024)&&g!==(g=O[10]("Split")+"")&&te(S,g),(!y||Q[0]&256)&&ve(d,"selected",O[8]),J===(J=Y(O))&&K?K.p(O,Q):(K.d(1),K=J(O),K&&(K.c(),K.m(E.parentNode,E)))},i(O){y||(X(o.$$.fragment,O),y=!0)},o(O){x(o.$$.fragment,O),y=!1},d(O){O&&(w(e),w(z),w(E)),qe(o),K.d(O),A=!1,We(T)}}}function Bs(t){let e,l,s="Notables",i,n,r,o,a="Smalls",c,h,p=ze(t[40](t[39](t[24],t[7],"notables"),t[6].value)),m=[];for(let u=0;u<p.length;u+=1)m[u]=Sl(fl(t,p,u));let _=ze(t[40](t[39](t[24],t[7],"passives"),t[6].value)),f=[];for(let u=0;u<_.length;u+=1)f[u]=kl(ul(t,_,u));return{c(){e=M("div"),l=M("h3"),l.textContent=s,i=q(),n=M("ul");for(let u=0;u<m.length;u+=1)m[u].c();r=q(),o=M("h3"),o.textContent=a,c=q(),h=M("ul");for(let u=0;u<f.length;u+=1)f[u].c();this.h()},l(u){e=P(u,"DIV",{class:!0});var d=L(e);l=P(d,"H3",{"data-svelte-h":!0}),xe(l)!=="svelte-uhg2bi"&&(l.textContent=s),i=U(d),n=P(d,"UL",{class:!0});var g=L(n);for(let z=0;z<m.length;z+=1)m[z].l(g);g.forEach(w),r=U(d),o=P(d,"H3",{class:!0,"data-svelte-h":!0}),xe(o)!=="svelte-mdvksr"&&(o.textContent=a),c=U(d),h=P(d,"UL",{class:!0});var S=L(h);for(let z=0;z<f.length;z+=1)f[z].l(S);S.forEach(w),d.forEach(w),this.h()},h(){I(n,"class","mt-1 svelte-9h6fz6"),ve(n,"rainbow",t[7]),I(o,"class","mt-2"),I(h,"class","mt-1 svelte-9h6fz6"),ve(h,"rainbow",t[7]),I(e,"class","overflow-auto mt-4")},m(u,d){j(u,e,d),v(e,l),v(e,i),v(e,n);for(let g=0;g<m.length;g+=1)m[g]&&m[g].m(n,null);v(e,r),v(e,o),v(e,c),v(e,h);for(let g=0;g<f.length;g+=1)f[g]&&f[g].m(h,null)},p(u,d){if(d[0]&16777412|d[1]&776){p=ze(u[40](u[39](u[24],u[7],"notables"),u[6].value));let g;for(g=0;g<p.length;g+=1){const S=fl(u,p,g);m[g]?m[g].p(S,d):(m[g]=Sl(S),m[g].c(),m[g].m(n,null))}for(;g<m.length;g+=1)m[g].d(1);m.length=p.length}if(d[0]&128&&ve(n,"rainbow",u[7]),d[0]&16777412|d[1]&776){_=ze(u[40](u[39](u[24],u[7],"passives"),u[6].value));let g;for(g=0;g<_.length;g+=1){const S=ul(u,_,g);f[g]?f[g].p(S,d):(f[g]=kl(S),f[g].c(),f[g].m(h,null))}for(;g<f.length;g+=1)f[g].d(1);f.length=_.length}d[0]&128&&ve(h,"rainbow",u[7])},d(u){u&&w(e),lt(m,u),lt(f,u)}}}function Fs(t){let e,l=ze(t[40](t[39](t[24],t[7],"all"),t[6].value)),s=[];for(let i=0;i<l.length;i+=1)s[i]=Il(hl(t,l,i));return{c(){e=M("ul");for(let i=0;i<s.length;i+=1)s[i].c();this.h()},l(i){e=P(i,"UL",{class:!0});var n=L(e);for(let r=0;r<s.length;r+=1)s[r].l(n);n.forEach(w),this.h()},h(){I(e,"class","mt-4 overflow-auto svelte-9h6fz6"),ve(e,"rainbow",t[7])},m(i,n){j(i,e,n);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null)},p(i,n){if(n[0]&16777412|n[1]&776){l=ze(i[40](i[39](i[24],i[7],"all"),i[6].value));let r;for(r=0;r<l.length;r+=1){const o=hl(i,l,r);s[r]?s[r].p(o,n):(s[r]=Il(o),s[r].c(),s[r].m(e,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=l.length}n[0]&128&&ve(e,"rainbow",i[7])},d(i){i&&w(e),lt(s,i)}}}function Sl(t){let e,l,s,i=t[72].passives.length+"",n,r,o,a,c,h=t[72].stat+"",p,m,_;function f(){return t[59](t[72])}return{c(){e=M("li"),l=M("span"),s=F("("),n=F(i),r=F(")"),o=q(),a=M("span"),c=new Nt(!1),p=q(),this.h()},l(u){e=P(u,"LI",{class:!0});var d=L(e);l=P(d,"SPAN",{class:!0});var g=L(l);s=H(g,"("),n=H(g,i),r=H(g,")"),g.forEach(w),o=U(d),a=P(d,"SPAN",{class:!0});var S=L(a);c=Ot(S,!1),S.forEach(w),p=U(d),d.forEach(w),this.h()},h(){I(l,"class","font-bold"),ve(l,"text-white",(et[t[72].id]||0)<3),c.a=null,I(a,"class","text-white"),I(e,"class","cursor-pointer")},m(u,d){j(u,e,d),v(e,l),v(l,s),v(l,n),v(l,r),v(e,o),v(e,a),c.m(h,a),v(e,p),m||(_=C(e,"click",f),m=!0)},p(u,d){t=u,d[0]&16777408&&i!==(i=t[72].passives.length+"")&&te(n,i),d[0]&16777408|d[1]&768&&ve(l,"text-white",(et[t[72].id]||0)<3),d[0]&16777408&&h!==(h=t[72].stat+"")&&c.p(h)},d(u){u&&w(e),m=!1,_()}}}function kl(t){let e,l,s,i=t[72].passives.length+"",n,r,o,a,c,h=t[72].stat+"",p,m,_;function f(){return t[60](t[72])}return{c(){e=M("li"),l=M("span"),s=F("("),n=F(i),r=F(")"),o=q(),a=M("span"),c=new Nt(!1),p=q(),this.h()},l(u){e=P(u,"LI",{class:!0});var d=L(e);l=P(d,"SPAN",{class:!0});var g=L(l);s=H(g,"("),n=H(g,i),r=H(g,")"),g.forEach(w),o=U(d),a=P(d,"SPAN",{class:!0});var S=L(a);c=Ot(S,!1),S.forEach(w),p=U(d),d.forEach(w),this.h()},h(){I(l,"class","font-bold"),ve(l,"text-white",(et[t[72].id]||0)<3),c.a=null,I(a,"class","text-white"),I(e,"class","cursor-pointer")},m(u,d){j(u,e,d),v(e,l),v(l,s),v(l,n),v(l,r),v(e,o),v(e,a),c.m(h,a),v(e,p),m||(_=C(e,"click",f),m=!0)},p(u,d){t=u,d[0]&16777408&&i!==(i=t[72].passives.length+"")&&te(n,i),d[0]&16777408|d[1]&768&&ve(l,"text-white",(et[t[72].id]||0)<3),d[0]&16777408&&h!==(h=t[72].stat+"")&&c.p(h)},d(u){u&&w(e),m=!1,_()}}}function Il(t){let e,l,s,i=t[72].passives.length+"",n,r,o,a,c,h=t[72].stat+"",p,m,_;function f(){return t[58](t[72])}return{c(){e=M("li"),l=M("span"),s=F("("),n=F(i),r=F(")"),o=q(),a=M("span"),c=new Nt(!1),p=q(),this.h()},l(u){e=P(u,"LI",{class:!0});var d=L(e);l=P(d,"SPAN",{class:!0});var g=L(l);s=H(g,"("),n=H(g,i),r=H(g,")"),g.forEach(w),o=U(d),a=P(d,"SPAN",{class:!0});var S=L(a);c=Ot(S,!1),S.forEach(w),p=U(d),d.forEach(w),this.h()},h(){I(l,"class","font-bold"),ve(l,"text-white",(et[t[72].id]||0)<3),c.a=null,I(a,"class","text-white"),I(e,"class","cursor-pointer")},m(u,d){j(u,e,d),v(e,l),v(l,s),v(l,n),v(l,r),v(e,o),v(e,a),c.m(h,a),v(e,p),m||(_=C(e,"click",f),m=!0)},p(u,d){t=u,d[0]&16777408&&i!==(i=t[72].passives.length+"")&&te(n,i),d[0]&16777408|d[1]&768&&ve(l,"text-white",(et[t[72].id]||0)<3),d[0]&16777408&&h!==(h=t[72].stat+"")&&c.p(h)},d(u){u&&w(e),m=!1,_()}}}function El(t){let e,l=t[10]("Click on a jewel socket")+"",s;return{c(){e=M("h2"),s=F(l),this.h()},l(i){e=P(i,"H2",{class:!0});var n=L(e);s=H(n,l),n.forEach(w),this.h()},h(){I(e,"class","mt-4")},m(i,n){j(i,e,n),v(e,s)},p(i,n){n[0]&1024&&l!==(l=i[10]("Click on a jewel socket")+"")&&te(s,l)},d(i){i&&w(e)}}}function yl(t){let e,l;return e=new ms({props:{searchResults:t[18],groupResults:t[5],highlight:t[34],jewel:t[19],conqueror:t[20]}}),{c(){Ve(e.$$.fragment)},l(s){Je(e.$$.fragment,s)},m(s,i){je(e,s,i),l=!0},p(s,i){const n={};i[0]&262144&&(n.searchResults=s[18]),i[0]&32&&(n.groupResults=s[5]),i[0]&524288&&(n.jewel=s[19]),i[0]&1048576&&(n.conqueror=s[20]),e.$set(n)},i(s){l||(X(e.$$.fragment,s),l=!0)},o(s){x(e.$$.fragment,s),l=!1},d(s){qe(e,s)}}}function Hs(t){let e,l,s,i,n='<a href="https://github.com/Vilsol/timeless-jewels" target="_blank" rel="noopener">Source (Github)</a>',r;const o=[Vs,Ds],a=[];function c(h,p){return h[22]?1:0}return e=c(t),l=a[e]=o[e](t),{c(){l.c(),s=q(),i=M("div"),i.innerHTML=n,this.h()},l(h){l.l(h),s=U(h),i=P(h,"DIV",{class:!0,"data-svelte-h":!0}),xe(i)!=="svelte-1xcazan"&&(i.innerHTML=n),this.h()},h(){I(i,"class","text-orange-500 absolute bottom-0 right-0 m-2")},m(h,p){a[e].m(h,p),j(h,s,p),j(h,i,p),r=!0},p(h,p){let m=e;e=c(h),e===m?a[e].p(h,p):(Ue(),x(a[m],1,1,()=>{a[m]=null}),Be(),l=a[e],l?l.p(h,p):(l=a[e]=o[e](h),l.c()),X(l,1),l.m(s.parentNode,s))},i(h){r||(X(l),r=!0)},o(h){x(l),r=!1},d(h){h&&(w(s),w(i)),a[e].d(h)}}}function Ks(t){var n,r;let e,l,s,i;return e=new Ns({props:{clickNode:t[29],circledNode:t[3],selectedJewel:(n=t[0])==null?void 0:n.value,selectedConqueror:(r=t[1])==null?void 0:r.value,highlighted:t[21],seed:t[2],highlightJewels:!t[3],disabled:[...t[12]],$$slots:{default:[Hs]},$$scope:{ctx:t}}}),{c(){Ve(e.$$.fragment)},l(o){Je(e.$$.fragment,o)},m(o,a){je(e,o,a),l=!0,s||(i=C(Os,"paste",t[42]),s=!0)},p(o,a){var h,p;const c={};a[0]&8&&(c.circledNode=o[3]),a[0]&1&&(c.selectedJewel=(h=o[0])==null?void 0:h.value),a[0]&2&&(c.selectedConqueror=(p=o[1])==null?void 0:p.value),a[0]&2097152&&(c.highlighted=o[21]),a[0]&4&&(c.seed=o[2]),a[0]&8&&(c.highlightJewels=!o[3]),a[0]&4096&&(c.disabled=[...o[12]]),a[0]&65011711|a[2]&1048576&&(c.$$scope={dirty:a,ctx:o}),e.$set(c)},i(o){l||(X(e.$$.fragment,o),l=!0)},o(o){x(e.$$.fragment,o),l=!1},d(o){qe(e,o),s=!1,i()}}}function Ys(t,e,l){let s,i,n,r,o,a,c;yt(t,Al,R=>l(10,a=R)),yt(t,Hl,R=>l(68,c=R));const h=c.url.searchParams,p=Object.keys(re.TimelessJewels).map(R=>({value:parseInt(R),label:a(re.TimelessJewels[R])}));let m=h.has("jewel")?p.find(R=>R.value==h.get("jewel")):void 0,_=h.has("conqueror")?{value:h.get("conqueror"),label:h.get("conqueror")}:void 0,f=h.has("seed")?parseInt(h.get("seed")):0,u=h.has("location")?parseInt(h.get("location")):void 0,d={};h.has("stat")&&h.getAll("stat").forEach(R=>{const ie=parseInt(R);l(4,d[ie]={weight:1,min:0,id:ie},d)});let g=h.has("mode")?h.get("mode"):"";const S=()=>{const R=new URL(window.location.origin+window.location.pathname);m&&R.searchParams.append("jewel",m.value.toString()),_&&R.searchParams.append("conqueror",_.value),f&&R.searchParams.append("seed",f.toString()),u&&R.searchParams.append("location",u.toString()),g&&R.searchParams.append("mode",g),Object.keys(d).forEach(ie=>{R.searchParams.append("stat",ie.toString())}),Bl(R.toString())},z=R=>{l(11,g=R),S()};let E=new Set;const y=R=>{R.isJewelSocket?(l(3,u=R.skill),S()):R.isMastery||(E.has(R.skill)?E.delete(R.skill):E.add(R.skill),l(12,E))},A=JSON.parse(re.PossibleStats);let T;const B=R=>{l(4,d[R.detail.value]={weight:1,min:0,id:R.detail.value},d),l(4,d),T.handleClear(),S()},V=R=>{delete d[R],l(4,d),S()},Y=()=>{l(4,d={}),S()};let J=!1,K=0,O=!1,Q=0,se,ne=1,ee="";const ue=()=>{if(!u)return;l(19,ne=m.value),l(20,ee=_.value),l(16,O=!0),l(18,se=void 0);const R={jewel:m.value,conqueror:_.value,nodes:i.filter(ie=>!E.has(ie.skill)).map(ie=>re.TreeToPassive[ie.skill]).filter(ie=>!!ie).map(ie=>ie.Index),stats:Object.keys(d).map(ie=>d[ie]),minTotalWeight:K};Xl.search(R,Wl(ie=>l(17,Q=ie))).then(ie=>{l(18,se=ie),l(16,O=!1),l(14,J=!0)})};let Ie=[];const be=(R,ie)=>{l(2,f=R),l(21,Ie=ie),S()},we=()=>{E.clear(),l(12,E)},ae=()=>{i.forEach(R=>{R.isNotable&&E.delete(R.skill)}),l(12,E)},Me=()=>{i.forEach(R=>{R.isNotable||E.delete(R.skill)}),l(12,E)},D=()=>{i.filter(R=>!R.isJewelSocket&&!R.isMastery).forEach(R=>E.add(R.skill)),l(12,E)};let b=localStorage.getItem("groupResults")===null?!0:localStorage.getItem("groupResults")==="true";const N={physical:"#c79d93",cast:"#b3f8fe",fire:"#ff9a77",cold:"#93d8ff",lightning:"#f8cb76",attack:"#da814d",life:"#c96e6e",chaos:"#d8a7d3",unique:"#af6025",critical:"#b2a7d6"},W=R=>(Object.keys(N).forEach(ie=>{const pe=N[ie];R=R.replace(new RegExp(`(${ie}(?:$|\\s))|((?:^|\\s)${ie})`,"gi"),`<span style='color: ${pe}; font-weight: bold'>$1$2</span>`)}),R),G=(R,ie,pe)=>{const ye={};return R.forEach(Se=>{Ke.nodes[Se.node].isKeystone||pe!=="all"&&(pe==="notables"&&!Ke.nodes[Se.node].isNotable||pe==="passives"&&Ke.nodes[Se.node].isNotable)||(Se.result.AlternatePassiveSkill&&Se.result.AlternatePassiveSkill.StatsKeys&&Se.result.AlternatePassiveSkill.StatsKeys.forEach(Ae=>{ye[Ae]=[...ye[Ae]||[],Se.node]}),Se.result.AlternatePassiveAdditionInformations&&Se.result.AlternatePassiveAdditionInformations.forEach(Ae=>{Ae.AlternatePassiveAddition.StatsKeys&&Ae.AlternatePassiveAddition.StatsKeys.forEach(Ge=>{ye[Ge]=[...ye[Ge]||[],Se.node]})}))}),Object.keys(ye).map(Se=>{const Ae=ft(parseInt(Se));return{stat:ie?W(Ae):Ae,rawStat:Ae,id:Se,passives:ye[Se]}})},de=(R,ie)=>{switch(ie){case"alphabet":return R.sort((pe,ye)=>pe.rawStat.replace(/[#+%]/gi,"").trim().toLowerCase().localeCompare(ye.rawStat.replace(/[#+%]/gi,"").trim().toLowerCase()));case"count":return R.sort((pe,ye)=>ye.passives.length-pe.passives.length);case"rarity":return R.sort((pe,ye)=>A[m.value][pe.id]-A[m.value][ye.id]);case"value":return R.sort((pe,ye)=>{const Se=et[pe.id]||0,Ae=et[ye.id]||0;return Se!=Ae?Ae-Se:A[m.value][pe.id]-A[m.value][ye.id]})}return R},oe=[{label:a("Count"),value:"count"},{label:a("Alphabetical"),value:"alphabet"},{label:a("Rarity"),value:"rarity"},{label:a("Value"),value:"value"}];let ge=oe.find(R=>R.value===(localStorage.getItem("sortOrder")||"count")),fe=localStorage.getItem("colored")===null?!0:localStorage.getItem("colored")==="true",Pe=localStorage.getItem("split")===null?!0:localStorage.getItem("split")==="true";const me=R=>{if(R.type!=="paste")return;const pe=(R.clipboardData||window.clipboardData).getData("text").split(`
`);if(pe.length<14)return;const ye=p.find(Ge=>Ge.label===pe[2]);if(!ye)return;let Se,Ae;for(let Ge=10;Ge<pe.length;Ge++)if(Ae=Object.keys(re.TimelessJewelConquerors[ye.value]).find(St=>pe[Ge].indexOf(St)>=0),Ae){const St=/(\d+)/.exec(pe[Ge]);if(St.length===0)continue;Se=parseInt(St[1]);break}!Ae||!Se||(l(14,J=!1),l(11,g="seed"),l(2,f=Se),l(0,m=ye),l(1,_={label:Ae,value:Ae}),S())};let Z=!1;const le=()=>l(22,Z=!0),he=()=>Tt(ne,ee,se.raw),ce=()=>Tt(ne,ee,se.raw,"tencent"),Le=()=>l(5,b=!b),Oe=()=>l(14,J=!J);function Ye(R){m=R,l(0,m)}function _e(R){_=R,l(1,_)}const Ee=()=>z("seed"),Fe=()=>z("stats");function De(){f=Qe(this.value),l(2,f)}function Ce(R){ge=R,l(6,ge)}const Ne=()=>l(7,fe=!fe),at=()=>l(8,Pe=!Pe),ht=R=>be(f,R.passives),ct=R=>be(f,R.passives),ot=R=>be(f,R.passives);function ut(R){st[R?"unshift":"push"](()=>{T=R,l(13,T)})}const At=R=>V(d[R].id);function k(R){d[R].min=Qe(this.value),l(4,d)}function dt(R){d[R].weight=Qe(this.value),l(4,d)}function mt(){K=Qe(this.value),l(15,K)}const _t=()=>ue(),Ct=()=>l(22,Z=!1);return t.$$.update=()=>{t.$$.dirty[0]&1025&&l(25,s=m?Object.keys(re.TimelessJewelConquerors[m.value]).map(R=>({value:R,label:a(R)})):[]),t.$$.dirty[0]&8&&l(9,i=u?Gl(Ke.nodes[u]).filter(R=>!R.isJewelSocket&&!R.isMastery):[]),t.$$.dirty[0]&519&&l(24,n=!f||!m||!_||Object.keys(re.TimelessJewelConquerors[m.value]).indexOf(_.value)<0?[]:i.filter(R=>!!re.TreeToPassive[R.skill]).map(R=>({node:R.skill,result:Cl.Calculate(re.TreeToPassive[R.skill].Index,f,m.value,_.value)}))),t.$$.dirty[0]&1&&l(44,r=m?Object.keys(A[m.value]):[]),t.$$.dirty[0]&16|t.$$.dirty[1]&8192&&l(23,o=r.map(R=>{const ie=parseInt(R);return{label:ft(ie),value:ie}}).filter(R=>!(R.value in d))),t.$$.dirty[0]&32&&localStorage.setItem("groupResults",b?"true":"false"),t.$$.dirty[0]&64&&localStorage.setItem("sortOrder",ge.value),t.$$.dirty[0]&128&&localStorage.setItem("colored",fe?"true":"false"),t.$$.dirty[0]&256&&localStorage.setItem("split",Pe?"true":"false")},[m,_,f,u,d,b,ge,fe,Pe,i,a,g,E,T,J,K,O,Q,se,ne,ee,Ie,Z,o,n,s,p,S,z,y,B,V,Y,ue,be,we,ae,Me,D,G,de,oe,me,N,r,le,he,ce,Le,Oe,Ye,_e,Ee,Fe,De,Ce,Ne,at,ht,ct,ot,ut,At,k,dt,mt,_t,Ct]}class ti extends nt{constructor(e){super(),rt(this,e,Ys,Ks,it,{colorKeys:43},null,[-1,-1,-1])}get colorKeys(){return this.$$.ctx[43]}}export{ti as component};

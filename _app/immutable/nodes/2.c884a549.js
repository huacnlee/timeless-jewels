import{s as Ue,p as ae,f as A,l as P,a as O,g as I,h as R,m as E,d as b,c as C,A as se,j as w,i as D,y as h,B as Z,n as M,C as ie,D as qe,r as ke,e as G,E as Se,F as Ne,G as ne}from"../chunks/scheduler.9ae0719f.js";import{S as Be,i as ye,f as oe,b as re,d as fe,m as ue,a as U,t as z,c as He,e as ce,g as Le}from"../chunks/index.dd85e640.js";import{S as _e,e as X,g as Fe}from"../chunks/Select.23e4c3bd.js";import"../chunks/i18n.39b8106f.js";import{a as Ke,b as ze}from"../chunks/paths.080cd0a8.js";import{p as Qe}from"../chunks/stores.54da8398.js";import{d as $,c as We,a as Xe}from"../chunks/index.ef3acaca.js";function we(i,l,a){const t=i.slice();return t[19]=l[a],t}function Ae(i,l,a){const t=i.slice();t[22]=l[a],t[25]=a;const s=$.GetStatByIndex(t[19].AlternatePassiveAddition.StatsKeys[t[25]]);return t[23]=s,t}function Ie(i,l,a){const t=i.slice();t[22]=l[a],t[25]=a;const s=$.GetStatByIndex(t[5].AlternatePassiveSkill.StatsKeys[t[25]]);return t[23]=s,t}function Pe(i){let l,a,t=i[4]("Conqueror")+"",s,u,e,d,f,c=i[1]&&Object.keys($.TimelessJewelConquerors[i[0].value]).indexOf(i[1].value)>=0,_,o;function m(r){i[14](r)}let p={items:i[6]};i[1]!==void 0&&(p.value=i[1]),e=new _e({props:p}),ae.push(()=>oe(e,"value",m)),e.$on("select",i[9]);let n=c&&Ee(i);return{c(){l=A("div"),a=A("h3"),s=P(t),u=O(),re(e.$$.fragment),f=O(),n&&n.c(),_=G(),this.h()},l(r){l=I(r,"DIV",{class:!0});var v=R(l);a=I(v,"H3",{class:!0});var k=R(a);s=E(k,t),k.forEach(b),u=C(v),fe(e.$$.fragment,v),v.forEach(b),f=C(r),n&&n.l(r),_=G(),this.h()},h(){w(a,"class","mb-2"),w(l,"class","mt-4")},m(r,v){D(r,l,v),h(l,a),h(a,s),h(l,u),ue(e,l,null),D(r,f,v),n&&n.m(r,v),D(r,_,v),o=!0},p(r,v){(!o||v&16)&&t!==(t=r[4]("Conqueror")+"")&&M(s,t);const k={};v&64&&(k.items=r[6]),!d&&v&2&&(d=!0,k.value=r[1],ie(()=>d=!1)),e.$set(k),v&3&&(c=r[1]&&Object.keys($.TimelessJewelConquerors[r[0].value]).indexOf(r[1].value)>=0),c?n?(n.p(r,v),v&3&&U(n,1)):(n=Ee(r),n.c(),U(n,1),n.m(_.parentNode,_)):n&&(Le(),z(n,1,1,()=>{n=null}),He())},i(r){o||(U(e.$$.fragment,r),U(n),o=!0)},o(r){z(e.$$.fragment,r),z(n),o=!1},d(r){r&&(b(l),b(f),b(_)),ce(e),n&&n.d(r)}}}function Ee(i){let l,a,t=i[4]("Passive Skill")+"",s,u,e,d,f,c,_;function o(n){i[15](n)}let m={items:i[8]};i[2]!==void 0&&(m.value=i[2]),e=new _e({props:m}),ae.push(()=>oe(e,"value",o)),e.$on("select",i[9]);let p=i[2]&&Re(i);return{c(){l=A("div"),a=A("h3"),s=P(t),u=O(),re(e.$$.fragment),f=O(),p&&p.c(),c=G(),this.h()},l(n){l=I(n,"DIV",{class:!0});var r=R(l);a=I(r,"H3",{class:!0});var v=R(a);s=E(v,t),v.forEach(b),u=C(r),fe(e.$$.fragment,r),r.forEach(b),f=C(n),p&&p.l(n),c=G(),this.h()},h(){w(a,"class","mb-2"),w(l,"class","mt-4")},m(n,r){D(n,l,r),h(l,a),h(a,s),h(l,u),ue(e,l,null),D(n,f,r),p&&p.m(n,r),D(n,c,r),_=!0},p(n,r){(!_||r&16)&&t!==(t=n[4]("Passive Skill")+"")&&M(s,t);const v={};!d&&r&4&&(d=!0,v.value=n[2],ie(()=>d=!1)),e.$set(v),n[2]?p?p.p(n,r):(p=Re(n),p.c(),p.m(c.parentNode,c)):p&&(p.d(1),p=null)},i(n){_||(U(e.$$.fragment,n),_=!0)},o(n){z(e.$$.fragment,n),_=!1},d(n){n&&(b(l),b(f),b(c)),ce(e),p&&p.d(n)}}}function Re(i){let l,a,t=i[4]("Seed")+"",s,u,e,d,f,c,_,o,m,p,n=(i[3]<$.TimelessJewelSeedRanges[i[0].value].Min||i[3]>$.TimelessJewelSeedRanges[i[0].value].Max)&&Te(i),r=i[5]&&je(i);return{c(){l=A("div"),a=A("h3"),s=P(t),u=O(),e=A("input"),c=O(),n&&n.c(),_=O(),r&&r.c(),o=G(),this.h()},l(v){l=I(v,"DIV",{class:!0});var k=R(l);a=I(k,"H3",{class:!0});var q=R(a);s=E(q,t),q.forEach(b),u=C(k),e=I(k,"INPUT",{type:!0,class:!0,min:!0,max:!0}),c=C(k),n&&n.l(k),k.forEach(b),_=C(v),r&&r.l(v),o=G(),this.h()},h(){w(a,"class","mb-2"),w(e,"type","number"),w(e,"class","seed"),w(e,"min",d=$.TimelessJewelSeedRanges[i[0].value].Min),w(e,"max",f=$.TimelessJewelSeedRanges[i[0].value].Max),w(l,"class","mt-4")},m(v,k){D(v,l,k),h(l,a),h(a,s),h(l,u),h(l,e),Se(e,i[3]),h(l,c),n&&n.m(l,null),D(v,_,k),r&&r.m(v,k),D(v,o,k),m||(p=[Z(e,"input",i[16]),Z(e,"blur",i[9])],m=!0)},p(v,k){k&16&&t!==(t=v[4]("Seed")+"")&&M(s,t),k&1&&d!==(d=$.TimelessJewelSeedRanges[v[0].value].Min)&&w(e,"min",d),k&1&&f!==(f=$.TimelessJewelSeedRanges[v[0].value].Max)&&w(e,"max",f),k&8&&Ne(e.value)!==v[3]&&Se(e,v[3]),v[3]<$.TimelessJewelSeedRanges[v[0].value].Min||v[3]>$.TimelessJewelSeedRanges[v[0].value].Max?n?n.p(v,k):(n=Te(v),n.c(),n.m(l,null)):n&&(n.d(1),n=null),v[5]?r?r.p(v,k):(r=je(v),r.c(),r.m(o.parentNode,o)):r&&(r.d(1),r=null)},d(v){v&&(b(l),b(_),b(o)),n&&n.d(),r&&r.d(v),m=!1,qe(p)}}}function Te(i){let l,a=i[4]("Seed must be between",{values:{min:$.TimelessJewelSeedRanges[i[0].value].Min,max:$.TimelessJewelSeedRanges[i[0].value].Max}})+"",t;return{c(){l=A("div"),t=P(a),this.h()},l(s){l=I(s,"DIV",{class:!0});var u=R(l);t=E(u,a),u.forEach(b),this.h()},h(){w(l,"class","mt-2")},m(s,u){D(s,l,u),h(l,t)},p(s,u){u&17&&a!==(a=s[4]("Seed must be between",{values:{min:$.TimelessJewelSeedRanges[s[0].value].Min,max:$.TimelessJewelSeedRanges[s[0].value].Max}})+"")&&M(t,a)},d(s){s&&b(l)}}}function je(i){var u;let l,a,t=i[5].AlternatePassiveSkill&&De(i),s="AlternatePassiveAdditionInformations"in i[5]&&((u=i[5].AlternatePassiveAdditionInformations)==null?void 0:u.length)>0&&Oe(i);return{c(){t&&t.c(),l=O(),s&&s.c(),a=G()},l(e){t&&t.l(e),l=C(e),s&&s.l(e),a=G()},m(e,d){t&&t.m(e,d),D(e,l,d),s&&s.m(e,d),D(e,a,d)},p(e,d){var f;e[5].AlternatePassiveSkill?t?t.p(e,d):(t=De(e),t.c(),t.m(l.parentNode,l)):t&&(t.d(1),t=null),"AlternatePassiveAdditionInformations"in e[5]&&((f=e[5].AlternatePassiveAdditionInformations)==null?void 0:f.length)>0?s?s.p(e,d):(s=Oe(e),s.c(),s.m(a.parentNode,a)):s&&(s.d(1),s=null)},d(e){e&&(b(l),b(a)),t&&t.d(e),s&&s.d(e)}}}function De(i){let l,a,t=i[4]("Alternate Passive Skill")+"",s,u,e,d=i[5].AlternatePassiveSkill.Name+"",f,c,_=i[5].AlternatePassiveSkill.ID+"",o,m,p=i[5].AlternatePassiveSkill+"",n,r,v,k=i[5].StatRolls&&Object.keys(i[5].StatRolls).length>0,q,j=k&&Je(i);return{c(){l=A("div"),a=A("h3"),s=P(t),u=O(),e=A("span"),f=P(d),c=P(" ("),o=P(_),m=P(") ("),n=P(p),r=P(")"),v=O(),j&&j.c(),q=G(),this.h()},l(S){l=I(S,"DIV",{class:!0});var T=R(l);a=I(T,"H3",{});var g=R(a);s=E(g,t),g.forEach(b),u=C(T),e=I(T,"SPAN",{});var N=R(e);f=E(N,d),c=E(N," ("),o=E(N,_),m=E(N,") ("),n=E(N,p),r=E(N,")"),N.forEach(b),T.forEach(b),v=C(S),j&&j.l(S),q=G(),this.h()},h(){w(l,"class","mt-4")},m(S,T){D(S,l,T),h(l,a),h(a,s),h(l,u),h(l,e),h(e,f),h(e,c),h(e,o),h(e,m),h(e,n),h(e,r),D(S,v,T),j&&j.m(S,T),D(S,q,T)},p(S,T){T&16&&t!==(t=S[4]("Alternate Passive Skill")+"")&&M(s,t),T&32&&d!==(d=S[5].AlternatePassiveSkill.Name+"")&&M(f,d),T&32&&_!==(_=S[5].AlternatePassiveSkill.ID+"")&&M(o,_),T&32&&p!==(p=S[5].AlternatePassiveSkill+"")&&M(n,p),T&32&&(k=S[5].StatRolls&&Object.keys(S[5].StatRolls).length>0),k?j?j.p(S,T):(j=Je(S),j.c(),j.m(q.parentNode,q)):j&&(j.d(1),j=null)},d(S){S&&(b(l),b(v),b(q)),j&&j.d(S)}}}function Je(i){let l,a=X(Object.keys(i[5].StatRolls)),t=[];for(let s=0;s<a.length;s+=1)t[s]=$e(Ie(i,a,s));return{c(){l=A("ol");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){l=I(s,"OL",{class:!0});var u=R(l);for(let e=0;e<t.length;e+=1)t[e].l(u);u.forEach(b),this.h()},h(){w(l,"class","mt-4 list-decimal pl-8")},m(s,u){D(s,l,u);for(let e=0;e<t.length;e+=1)t[e]&&t[e].m(l,null)},p(s,u){if(u&32){a=X(Object.keys(s[5].StatRolls));let e;for(e=0;e<a.length;e+=1){const d=Ie(s,a,e);t[e]?t[e].p(d,u):(t[e]=$e(d),t[e].c(),t[e].m(l,null))}for(;e<t.length;e+=1)t[e].d(1);t.length=a.length}},d(s){s&&b(l),ne(t,s)}}}function $e(i){let l,a=(i[23].Text||"<no name>")+"",t,s,u=i[23].ID+"",e,d,f=i[5].StatRolls[i[22]]+"",c;return{c(){l=A("li"),t=P(a),s=P(" ("),e=P(u),d=P(") - "),c=P(f)},l(_){l=I(_,"LI",{});var o=R(l);t=E(o,a),s=E(o," ("),e=E(o,u),d=E(o,") - "),c=E(o,f),o.forEach(b)},m(_,o){D(_,l,o),h(l,t),h(l,s),h(l,e),h(l,d),h(l,c)},p(_,o){o&32&&a!==(a=(_[23].Text||"<no name>")+"")&&M(t,a),o&32&&u!==(u=_[23].ID+"")&&M(e,u),o&32&&f!==(f=_[5].StatRolls[_[22]]+"")&&M(c,f)},d(_){_&&b(l)}}}function Oe(i){let l,a,t=i[4]("Additions")+"",s,u,e,d=X(i[5].AlternatePassiveAdditionInformations),f=[];for(let c=0;c<d.length;c+=1)f[c]=Ve(we(i,d,c));return{c(){l=A("div"),a=A("h3"),s=P(t),u=O(),e=A("ul");for(let c=0;c<f.length;c+=1)f[c].c();this.h()},l(c){l=I(c,"DIV",{class:!0});var _=R(l);a=I(_,"H3",{});var o=R(a);s=E(o,t),o.forEach(b),u=C(_),e=I(_,"UL",{class:!0});var m=R(e);for(let p=0;p<f.length;p+=1)f[p].l(m);m.forEach(b),_.forEach(b),this.h()},h(){w(e,"class","list-disc pl-8"),w(l,"class","mt-4")},m(c,_){D(c,l,_),h(l,a),h(a,s),h(l,u),h(l,e);for(let o=0;o<f.length;o+=1)f[o]&&f[o].m(e,null)},p(c,_){if(_&16&&t!==(t=c[4]("Additions")+"")&&M(s,t),_&32){d=X(c[5].AlternatePassiveAdditionInformations);let o;for(o=0;o<d.length;o+=1){const m=we(c,d,o);f[o]?f[o].p(m,_):(f[o]=Ve(m),f[o].c(),f[o].m(e,null))}for(;o<f.length;o+=1)f[o].d(1);f.length=d.length}},d(c){c&&b(l),ne(f,c)}}}function Ce(i){let l,a=X(Object.keys(i[19].StatRolls)),t=[];for(let s=0;s<a.length;s+=1)t[s]=Me(Ae(i,a,s));return{c(){l=A("ol");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){l=I(s,"OL",{class:!0});var u=R(l);for(let e=0;e<t.length;e+=1)t[e].l(u);u.forEach(b),this.h()},h(){w(l,"class","list-decimal pl-8")},m(s,u){D(s,l,u);for(let e=0;e<t.length;e+=1)t[e]&&t[e].m(l,null)},p(s,u){if(u&32){a=X(Object.keys(s[19].StatRolls));let e;for(e=0;e<a.length;e+=1){const d=Ae(s,a,e);t[e]?t[e].p(d,u):(t[e]=Me(d),t[e].c(),t[e].m(l,null))}for(;e<t.length;e+=1)t[e].d(1);t.length=a.length}},d(s){s&&b(l),ne(t,s)}}}function Me(i){let l,a=(i[23].Text||"<no name>")+"",t,s,u=i[23].ID+"",e,d,f=i[19].StatRolls[i[22]]+"",c;return{c(){l=A("li"),t=P(a),s=P(" ("),e=P(u),d=P(") - "),c=P(f)},l(_){l=I(_,"LI",{});var o=R(l);t=E(o,a),s=E(o," ("),e=E(o,u),d=E(o,") - "),c=E(o,f),o.forEach(b)},m(_,o){D(_,l,o),h(l,t),h(l,s),h(l,e),h(l,d),h(l,c)},p(_,o){o&32&&a!==(a=(_[23].Text||"<no name>")+"")&&M(t,a),o&32&&u!==(u=_[23].ID+"")&&M(e,u),o&32&&f!==(f=_[19].StatRolls[_[22]]+"")&&M(c,f)},d(_){_&&b(l)}}}function Ve(i){let l,a,t=i[19].AlternatePassiveAddition.ID+"",s,u,e=i[19].AlternatePassiveAddition.Index+"",d,f,c,_=i[19].StatRolls&&Object.keys(i[19].StatRolls).length>0,o,m=_&&Ce(i);return{c(){l=A("li"),a=A("span"),s=P(t),u=P(" ("),d=P(e),f=P(")"),c=O(),m&&m.c(),o=O(),this.h()},l(p){l=I(p,"LI",{class:!0});var n=R(l);a=I(n,"SPAN",{});var r=R(a);s=E(r,t),u=E(r," ("),d=E(r,e),f=E(r,")"),r.forEach(b),c=C(n),m&&m.l(n),o=C(n),n.forEach(b),this.h()},h(){w(l,"class","mt-4")},m(p,n){D(p,l,n),h(l,a),h(a,s),h(a,u),h(a,d),h(a,f),h(l,c),m&&m.m(l,null),h(l,o)},p(p,n){n&32&&t!==(t=p[19].AlternatePassiveAddition.ID+"")&&M(s,t),n&32&&e!==(e=p[19].AlternatePassiveAddition.Index+"")&&M(d,e),n&32&&(_=p[19].StatRolls&&Object.keys(p[19].StatRolls).length>0),_?m?m.p(p,n):(m=Ce(p),m.c(),m.m(l,o)):m&&(m.d(1),m=null)},d(p){p&&b(l),m&&m.d()}}}function Ye(i){let l,a,t,s,u=i[4]("app_name")+"",e,d,f,c,_="English",o,m,p="中文",n,r,v,k=i[4]("Skill Tree View")+"",q,j,S,T,g=i[4]("Timeless Jewel")+"",N,Q,L,x,ee,le,y,he=`<div class="text-right text-orange-500"><a href="https://discord.gg/mfacademy" target="_blank" rel="noopener" class="flex flex-row align-middle"><img src="${Ke}/mf-academy-logo.png" width="24px"/> <span class="ml-2">MF Academy</span></a></div> <div class="text-orange-500"><a href="https://github.com/Vilsol/timeless-jewels" target="_blank" rel="noopener">Source (Github)</a></div>`,F,te,ve;function Ge(V){i[13](V)}let de={items:i[7]};i[0]!==void 0&&(de.value=i[0]),L=new _e({props:de}),ae.push(()=>oe(L,"value",Ge)),L.$on("select",i[9]);let J=i[0]&&Pe(i);return{c(){l=A("div"),a=A("div"),t=A("div"),s=A("h1"),e=P(u),d=O(),f=A("div"),c=A("a"),c.textContent=_,o=O(),m=A("a"),m.textContent=p,n=O(),r=A("a"),v=A("h2"),q=P(k),j=O(),S=A("div"),T=A("h3"),N=P(g),Q=O(),re(L.$$.fragment),ee=O(),J&&J.c(),le=O(),y=A("div"),y.innerHTML=he,this.h()},l(V){l=I(V,"DIV",{class:!0});var H=R(l);a=I(H,"DIV",{class:!0});var K=R(a);t=I(K,"DIV",{});var B=R(t);s=I(B,"H1",{class:!0});var me=R(s);e=E(me,u),me.forEach(b),d=C(B),f=I(B,"DIV",{class:!0});var Y=R(f);c=I(Y,"A",{href:!0,class:!0,"data-svelte-h":!0}),se(c)!=="svelte-1k13i6n"&&(c.textContent=_),o=C(Y),m=I(Y,"A",{href:!0,class:!0,"data-svelte-h":!0}),se(m)!=="svelte-77a5tk"&&(m.textContent=p),Y.forEach(b),n=C(B),r=I(B,"A",{href:!0});var pe=R(r);v=I(pe,"H2",{class:!0});var be=R(v);q=E(be,k),be.forEach(b),pe.forEach(b),j=C(B),S=I(B,"DIV",{class:!0});var W=R(S);T=I(W,"H3",{class:!0});var ge=R(T);N=E(ge,g),ge.forEach(b),Q=C(W),fe(L.$$.fragment,W),ee=C(W),J&&J.l(W),W.forEach(b),B.forEach(b),le=C(K),y=I(K,"DIV",{class:!0,"data-svelte-h":!0}),se(y)!=="svelte-1drlief"&&(y.innerHTML=he),K.forEach(b),H.forEach(b),this.h()},h(){w(s,"class","text-white mb-5 text-center"),w(c,"href","#"),w(c,"class","hover:text-orange-400"),w(m,"href","#"),w(m,"class","hover:text-orange-400"),w(f,"class","mb-10 space-x-2 text-center"),w(v,"class","text-white mb-10 text-center underline text-orange-500"),w(r,"href",ze+"/tree"),w(T,"class","mb-2"),w(S,"class","themed"),w(y,"class","flex justify-between"),w(a,"class","flex flex-col justify-between w-1/3"),w(l,"class","py-10 flex flex-row justify-center w-screen h-screen")},m(V,H){D(V,l,H),h(l,a),h(a,t),h(t,s),h(s,e),h(t,d),h(t,f),h(f,c),h(f,o),h(f,m),h(t,n),h(t,r),h(r,v),h(v,q),h(t,j),h(t,S),h(S,T),h(T,N),h(S,Q),ue(L,S,null),h(S,ee),J&&J.m(S,null),h(a,le),h(a,y),F=!0,te||(ve=[Z(c,"click",i[11]),Z(m,"click",i[12])],te=!0)},p(V,[H]){(!F||H&16)&&u!==(u=V[4]("app_name")+"")&&M(e,u),(!F||H&16)&&k!==(k=V[4]("Skill Tree View")+"")&&M(q,k),(!F||H&16)&&g!==(g=V[4]("Timeless Jewel")+"")&&M(N,g);const K={};!x&&H&1&&(x=!0,K.value=V[0],ie(()=>x=!1)),L.$set(K),V[0]?J?(J.p(V,H),H&1&&U(J,1)):(J=Pe(V),J.c(),U(J,1),J.m(S,null)):J&&(Le(),z(J,1,1,()=>{J=null}),He())},i(V){F||(U(L.$$.fragment,V),U(J),F=!0)},o(V){z(L.$$.fragment,V),z(J),F=!1},d(V){V&&b(l),ce(L),J&&J.d(),te=!1,qe(ve)}}}function Ze(i,l,a){let t,s,u;ke(i,Qe,g=>a(17,s=g)),ke(i,Xe,g=>a(4,u=g));const e=s.url.searchParams,d=Object.keys($.TimelessJewels).map(g=>({value:parseInt(g),label:u($.TimelessJewels[g])}));let f=e.has("jewel")?d.find(g=>g.value==e.get("jewel")):void 0,c=e.has("conqueror")?{value:e.get("conqueror"),label:e.get("conqueror")}:void 0;const _=Object.values($.PassiveSkills).map(g=>({value:g.Index,label:g.Name+" ("+g.ID+")"}));let o=e.has("passive_skill")?_.find(g=>g.value==e.get("passive_skill")):void 0,m=e.has("seed")?e.get("seed"):0,p;const n=()=>{{const g={};f&&(g.jewel=f.value),c&&(g.conqueror=c.value),o&&(g.passive_skill=o.value),m&&(g.seed=m);const N=Object.keys(g).map(Q=>Q+"="+encodeURIComponent(g[Q])).join("&");Fe(s.url.pathname+"?"+N)}},r=g=>{localStorage.setItem("locale",g),location.reload()},v=()=>r("en"),k=()=>r("zh");function q(g){f=g,a(0,f)}function j(g){c=g,a(1,c)}function S(g){o=g,a(2,o)}function T(){m=Ne(this.value),a(3,m)}return i.$$.update=()=>{i.$$.dirty&17&&a(6,t=f?Object.keys($.TimelessJewelConquerors[f.value]).map(g=>({value:g,label:u(g)})):[]),i.$$.dirty&15&&o&&m&&f&&c&&a(5,p=We.Calculate(o.value,typeof m=="string"?parseInt(m):m,f.value,c.value))},[f,c,o,m,u,p,t,d,_,n,r,v,k,q,j,S,T]}class nl extends Be{constructor(l){super(),ye(this,l,Ze,Ye,Ue,{})}}export{nl as component};
